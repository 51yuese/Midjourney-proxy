
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as e}from"../config/config.e980ec46.js";import{d as l,u as a,r as p,G as t,x as d,j as i,o as r,c as u,b as o,f as y,g as c,H as n,K as s,h as A,P as f,p as h,k as m,_ as W,q as _}from"../main-5b9099dc.js";const b=e=>(h("data-v-33cfdf01"),e=e(),m(),e),C=b((()=>o("div",{style:{"font-size":"15px",color:"#20295A","font-weight":"500","margin-top":"32px"}}," 支付参数设置 ",-1))),g={style:{display:"flex","align-items":"center","margin-top":"16px","margin-bottom":"24px"}},I=b((()=>o("div",{style:{color:"#9FA3B8","font-size":"15px"}},"启用当前支付",-1))),P={style:{"margin-top":"3px","margin-left":"12px"}},x={style:{display:"flex","align-items":"center","margin-top":"30px","margin-bottom":"16px"}},V={key:0},v={key:1},S={style:{"margin-top":"16px"}},U=l({__name:"wechat",setup(l){const h=a(),m=p(0),W=t({payWechatStatus:"",payWeChatMchId:"",payWeChatSecret:"",payWeChatNotifyUrl:"",payWeChatH5Url:"",payWeChatPublicKey:"",payWeChatPrivateKey:"",payWeChatAppId:"",payWeMiniAppId:"",WE_APP_APPID:"",payAliPublicSecret:"",payAliWebAppId:"",payAliWebSecret:"",payAliAppAppId:"",payAliAppSecret:""}),_=p({payWechatStatus:[{required:!0,trigger:"change",message:"请选择当前支付开启状态"}]}),b=p();async function U(){const l=await e.queryConfig({keys:["payWeChatSecret","payWeChatNotifyUrl","payWeChatH5Url","payWeChatAppId","payWeMiniAppId","payWechatStatus","payWeChatMchId","payWeChatPublicKey","payWeChatPrivateKey","WE_APP_APPID","payAliPublicSecret","payAliWebAppId","payAliWebSecret","payAliAppAppId","payAliAppSecret"]});Object.assign(W,l.data)}function K(){var l;null==(l=b.value)||l.validate((async l=>{if(!W.payWeChatAppId&&!W.payWeMiniAppId)return f.error("微信公众号AppId 和 微信小程序AppId 必填一个");if(l){if(0==h.isUserModifyPermissions())return f.error("非超级管理员无权限操作！");try{var a={payWechatStatus:W.payWechatStatus,payWeChatNotifyUrl:W.payWeChatNotifyUrl};0==m.value?(a.payWeChatMchId=W.payWeChatMchId,a.payWeChatSecret=W.payWeChatSecret,a.payWeChatPublicKey=W.payWeChatPublicKey,a.payWeChatPrivateKey=W.payWeChatPrivateKey,a.payWeChatH5Url=W.payWeChatH5Url,a.payWeChatAppId=W.payWeChatAppId,a.payWeMiniAppId=W.payWeMiniAppId,a.WE_APP_APPID=W.WE_APP_APPID):1==m.value&&(a.payAliPublicSecret=W.payAliPublicSecret,a.payAliWebAppId=W.payAliWebAppId,a.payAliWebSecret=W.payAliWebSecret,a.payAliAppAppId=W.payAliAppAppId,a.payAliAppSecret=W.payAliAppSecret),await e.setConfig({settings:(p=a,Object.keys(p).map((e=>({configKey:e,configVal:p[e]}))))}),f.success("变更配置信息成功")}catch(t){}U()}else f.error("请填写完整信息");var p}))}function z(e){m.value=e}return d((()=>{U()})),(e,l)=>{const a=i("el-alert"),p=i("el-switch"),t=i("el-input"),d=i("el-form-item"),f=i("el-col"),h=i("el-row"),U=i("el-form"),M=i("el-button");return r(),u("div",null,[o("div",null,[y(a,{closable:!1,"show-icon":"",title:"官方微信支付参数说明",description:"官方微信支付设置、同时开启多个支付、我们以微信支付优先级为最高、在pc端我们会调用native支付、在微信环境内、我们将调用Jsapi支付、请确认您的微信支付已经申请了支付权限、所有的支付通知地址统一为 https://域名/api/pay/notify 将域名修改为您的域名即可！",type:"warning"})]),o("div",null,[o("div",null,[C,o("div",g,[I,o("div",P,[y(p,{modelValue:W.payWechatStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>W.payWechatStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])])]),o("div",null,[y(U,{ref_key:"formRef",ref:b,rules:_.value,model:W,"label-width":"140px","label-position":"top"},{default:c((()=>[y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"支付通知地址",prop:"payWeChatNotifyUrl"},{default:c((()=>[y(t,{size:"large",modelValue:W.payWeChatNotifyUrl,"onUpdate:modelValue":l[1]||(l[1]=e=>W.payWeChatNotifyUrl=e),placeholder:"请填写支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),o("div",x,[o("div",{class:n(0==m.value?"type_title":"def_type_title"),onClick:l[2]||(l[2]=e=>z(0))},"微信支付",2),o("div",{class:n(1==m.value?"type_title":"def_type_title"),onClick:l[3]||(l[3]=e=>z(1))},"支付宝支付",2)]),0==m.value?(r(),u("div",V,[y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"微信支付商户ID",prop:"payWeChatMchId"},{default:c((()=>[y(t,{size:"large",modelValue:W.payWeChatMchId,"onUpdate:modelValue":l[4]||(l[4]=e=>W.payWeChatMchId=e),placeholder:"请填写微信支付商户ID",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"微信支付商户秘钥",prop:"payWeChatSecret"},{default:c((()=>[y(t,{size:"large",modelValue:W.payWeChatSecret,"onUpdate:modelValue":l[5]||(l[5]=e=>W.payWeChatSecret=e),placeholder:"请填写Secret秘钥",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"公钥地址",prop:"payWeChatPublicKey"},{default:c((()=>[y(t,{size:"large",modelValue:W.payWeChatPublicKey,"onUpdate:modelValue":l[6]||(l[6]=e=>W.payWeChatPublicKey=e),type:"textarea",rows:6,placeholder:"请填写支付公钥信息（cert.pem文件）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"私钥地址",prop:"payWeChatPrivateKey"},{default:c((()=>[y(t,{size:"large",modelValue:W.payWeChatPrivateKey,"onUpdate:modelValue":l[7]||(l[7]=e=>W.payWeChatPrivateKey=e),type:"textarea",rows:6,placeholder:"请填写支付私钥地址（key.pem文件）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"H5支付通知地址",prop:"payWeChatH5Url"},{default:c((()=>[y(t,{size:"large",modelValue:W.payWeChatH5Url,"onUpdate:modelValue":l[8]||(l[8]=e=>W.payWeChatH5Url=e),placeholder:"请填写H5支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"微信公众号AppId",prop:"payWeChatAppId"},{default:c((()=>[y(t,{size:"large",modelValue:W.payWeChatAppId,"onUpdate:modelValue":l[9]||(l[9]=e=>W.payWeChatAppId=e),placeholder:"请填写微信公众号AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"微信小程序AppId",prop:"payWeMiniAppId"},{default:c((()=>[y(t,{size:"large",modelValue:W.payWeMiniAppId,"onUpdate:modelValue":l[10]||(l[10]=e=>W.payWeMiniAppId=e),placeholder:"请填写微信小程序AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"微信App AppId",prop:"WE_APP_APPID"},{default:c((()=>[y(t,{size:"large",modelValue:W.WE_APP_APPID,"onUpdate:modelValue":l[11]||(l[11]=e=>W.WE_APP_APPID=e),placeholder:"请填写微信App AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])):s("",!0),1==m.value?(r(),u("div",v,[y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"支付宝支付公钥",prop:"payAliPublicSecret"},{default:c((()=>[y(t,{size:"large",modelValue:W.payAliPublicSecret,"onUpdate:modelValue":l[12]||(l[12]=e=>W.payAliPublicSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝支付公钥",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"支付宝网页支付应用id",prop:"payAliWebAppId"},{default:c((()=>[y(t,{size:"large",modelValue:W.payAliWebAppId,"onUpdate:modelValue":l[13]||(l[13]=e=>W.payAliWebAppId=e),placeholder:"请填写支付宝网页支付应用id",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"支付宝网页支付私钥（PKCS1格式）",prop:"payAliWebSecret"},{default:c((()=>[y(t,{size:"large",modelValue:W.payAliWebSecret,"onUpdate:modelValue":l[14]||(l[14]=e=>W.payAliWebSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝网页支付私钥（PKCS1格式）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"支付宝App支付应用id",prop:"payAliAppAppId"},{default:c((()=>[y(t,{size:"large",modelValue:W.payAliAppAppId,"onUpdate:modelValue":l[15]||(l[15]=e=>W.payAliAppAppId=e),placeholder:"请填写支付宝App支付应用id",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),y(h,null,{default:c((()=>[y(f,{xs:24,md:20,lg:15,xl:8},{default:c((()=>[y(d,{label:"支付宝App支付私钥（PKCS1格式）",prop:"payAliAppSecret"},{default:c((()=>[y(t,{size:"large",modelValue:W.payAliAppSecret,"onUpdate:modelValue":l[16]||(l[16]=e=>W.payAliAppSecret=e),type:"textarea",rows:6,placeholder:"请填写支付宝App支付私钥（PKCS1格式）",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])):s("",!0)])),_:1},8,["rules","model"])])]),o("div",S,[y(M,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:K},{default:c((()=>[A("保存设置")])),_:1})])])}}});"function"==typeof _&&_(U);const K=W(U,[["__scopeId","data-v-33cfdf01"]]);export{K as default};
