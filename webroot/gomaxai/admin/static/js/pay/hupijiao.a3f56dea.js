
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as e}from"../config/config.e980ec46.js";import{d as a,u as l,G as p,r as t,x as u,j as i,o as r,c as o,b as s,f as d,g as n,h as y,P as c,p as f,k as m,_ as g,q as H}from"../main-5b9099dc.js";const x=e=>(f("data-v-35faa761"),e=e(),m(),e),b=x((()=>s("div",{style:{"font-size":"15px",color:"#20295A","font-weight":"500","margin-top":"32px"}}," 支付参数设置 ",-1))),_={style:{display:"flex","align-items":"center","margin-top":"16px","margin-bottom":"24px"}},U=x((()=>s("div",{style:{color:"#9FA3B8","font-size":"15px"}},"启用当前支付",-1))),v={style:{"margin-top":"3px","margin-left":"12px"}},V={style:{"margin-top":"16px"}},h={style:{"margin-top":"16px"}},w=a({__name:"hupijiao",setup(a){const f=l(),m=p({payHupiStatus:"",payHupiAppId:"",payHupiSecret:"",payHupiGatewayUrl:"",payHupiNotifyUrl:"",payHupiReturnUrl:""}),g=t({payHupiStatus:[{required:!0,trigger:"change",message:"请选择当前支付开启状态"}],payHupiSecret:[{required:!0,trigger:"blur",message:"请填写支付秘钥"}],payHupiGatewayUrl:[{required:!0,trigger:"blur",message:"请填写网关"}],payHupiAppId:[{required:!0,trigger:"blur",message:"请填写Appid"}],payHupiNotifyUrl:[{required:!0,trigger:"blur",message:"请填写支付通知地址"}]}),H=t();async function x(){const a=await e.queryConfig({keys:["payHupiSecret","payHupiNotifyUrl","payHupiGatewayUrl","payHupiReturnUrl","payHupiAppId","payHupiStatus"]});Object.assign(m,a.data)}function w(){var a;null==(a=H.value)||a.validate((async a=>{if(a){if(0==f.isUserModifyPermissions())return c.error("非超级管理员无权限操作！");try{await e.setConfig({settings:(l=m,Object.keys(l).map((e=>({configKey:e,configVal:l[e]}))))}),c.success("变更配置信息成功")}catch(p){}x()}else c.error("请填写完整信息");var l}))}return u((()=>{x()})),(e,a)=>{const l=i("el-alert"),p=i("el-switch"),t=i("el-input"),u=i("el-form-item"),c=i("el-col"),f=i("el-row"),x=i("el-form"),S=i("el-button");return r(),o("div",null,[s("div",null,[d(l,{closable:!1,"show-icon":"",title:"虎皮椒支付参数说明",description:"虎皮椒支付为三方支付、接入请购买微信渠道、详细参数参照 https://www.xunhupay.com/ 目前优先开通微信支付渠道、同时开启开启多种支付、我们将优先按照菜单顺序调用、所有的支付通知地址统一为 https://域名/api/pay/notify 将域名修改为您的域名即可！",type:"warning"})]),s("div",null,[s("div",null,[b,s("div",_,[U,s("div",v,[d(p,{modelValue:m.payHupiStatus,"onUpdate:modelValue":a[0]||(a[0]=e=>m.payHupiStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])])])]),s("div",V,[d(x,{ref_key:"formRef",ref:H,rules:g.value,model:m,"label-width":"120px","label-position":"top"},{default:n((()=>[d(f,null,{default:n((()=>[d(c,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(u,{label:"支付AppId",prop:"payHupiAppId"},{default:n((()=>[d(t,{size:"large",modelValue:m.payHupiAppId,"onUpdate:modelValue":a[1]||(a[1]=e=>m.payHupiAppId=e),placeholder:"请填写AppId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(f,null,{default:n((()=>[d(c,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(u,{label:"支付网关地址",prop:"payHupiGatewayUrl"},{default:n((()=>[d(t,{size:"large",modelValue:m.payHupiGatewayUrl,"onUpdate:modelValue":a[2]||(a[2]=e=>m.payHupiGatewayUrl=e),placeholder:"请填写支付网关地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(f,null,{default:n((()=>[d(c,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(u,{label:"Secret秘钥",prop:"payHupiSecret"},{default:n((()=>[d(t,{size:"large",modelValue:m.payHupiSecret,"onUpdate:modelValue":a[3]||(a[3]=e=>m.payHupiSecret=e),placeholder:"请填写支付秘钥",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(f,null,{default:n((()=>[d(c,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(u,{label:"支付通知地址",prop:"payHupiSecret"},{default:n((()=>[d(t,{size:"large",modelValue:m.payHupiNotifyUrl,"onUpdate:modelValue":a[4]||(a[4]=e=>m.payHupiNotifyUrl=e),placeholder:"请填写支付通知地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(f,null,{default:n((()=>[d(c,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(u,{label:"支付回调地址",prop:"payHupiSecret"},{default:n((()=>[d(t,{size:"large",modelValue:m.payHupiReturnUrl,"onUpdate:modelValue":a[5]||(a[5]=e=>m.payHupiReturnUrl=e),placeholder:"请填写支付成功后的回跳地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["rules","model"])]),s("div",h,[d(S,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:w},{default:n((()=>[y("保存设置")])),_:1})])])}}});"function"==typeof H&&H(w);const S=g(w,[["__scopeId","data-v-35faa761"]]);export{S as default};
