
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as e}from"../config/config.e980ec46.js";/* empty css                     */import{d as t,u as i,a as o,G as n,C as a,r as s,x as l,j as c,o as r,c as p,b as u,f as d,g as f,h as g,P as m,p as y,k as x,_ as b,q as v}from"../main-5b9099dc.js";const h=e=>(y("data-v-1f76abeb"),e=e(),x(),e),A={style:{"margin-top":"16px"}},I=h((()=>u("div",{style:{color:"#20295A","font-size":"15px","margin-top":"24px","margin-bottom":"12px"}}," 公告内容 ",-1))),O={style:{display:"flex","align-items":"center",margin:"16px 0"}},V=h((()=>u("div",{style:{color:"#9FA3B8","font-size":"15px","margin-right":"12px"}}," 自动打开公告 ",-1))),j=t({__name:"notice",setup(t){const y=i(),x=o(),b=n({isAutoOpenNotice:"",noticeInfo:"",noticeTitle:""});async function v(){const t=await e.queryConfig({keys:["noticeInfo","noticeTitle","isAutoOpenNotice"]}),{noticeInfo:i,noticeTitle:o,isAutoOpenNotice:n}=t.data;i&&Object.assign(b,{noticeInfo:i,noticeTitle:o,isAutoOpenNotice:n})}async function h(){if(0==y.isUserModifyPermissions())return m.error("非超级管理员无权限操作！");if(null!=b.noticeInfo){try{await e.setConfig({settings:(t=b,Object.keys(t).map((e=>({configKey:e,configVal:t[e]}))))}),m.success("变更配置信息成功")}catch(i){}var t;v()}else m.error("请填写公告具体信息")}return a((()=>x.settings.app.colorScheme)),s({noticeInfo:[{required:!0,trigger:"blur",message:"请填写公告具体信息"}]}),s(),s("/api/file/upload"),l((()=>{v()})),(e,t)=>{const i=c("el-alert"),o=c("el-input"),n=c("el-switch"),a=c("el-button");return r(),p("div",null,[u("div",A,[d(i,{closable:!1,"show-icon":"",title:"公告设置说明",description:"这里的公告设置是对应用户端的公告页面的、你可以使用MD语法或直接使用Html标签进行发布、您也可以直接粘贴上传图片、作为图床使用、其他地方比如上传商品等地方的图片也可以暂时在此作为临时方案。",type:"warning"})]),u("div",null,[I,d(o,{style:{width:"100%",height:"55vh"},type:"textarea",modelValue:b.noticeInfo,"onUpdate:modelValue":t[0]||(t[0]=e=>b.noticeInfo=e),placeholder:"请输入公告内容",clearable:""},null,8,["modelValue"])]),u("div",null,[u("div",O,[V,d(n,{modelValue:b.isAutoOpenNotice,"onUpdate:modelValue":t[1]||(t[1]=e=>b.isAutoOpenNotice=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),d(a,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:h},{default:f((()=>[g("保存设置 ")])),_:1})])])}}});"function"==typeof v&&v(j);const w=b(j,[["__scopeId","data-v-1f76abeb"]]);export{w as default};
