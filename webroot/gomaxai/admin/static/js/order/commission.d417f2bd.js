
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{d as e,u as a,F as l,r as t,E as o,q as r,j as s,V as d,o as i,c as n,b as p,f as u,g as c,Y as m,X as g,e as f,N as b,h as x,W as y,t as v,I as h,J as w,w as _,O as F,s as k,_ as z}from"../main-c47e4581.js";import{o as C}from"./order.7aa2b1e0.js";const V={class:"search_add_card"},S={style:{display:"flex","align-items":"center"}},Y={style:{"margin-right":"20px"}},A={style:{"margin-left":"10px"}},D={style:{"margin-top":"12px"}},T={style:{color:"#20295A","font-size":"15px","font-weight":"bold","background-color":"#EFF6FF",padding:"15px 20px","border-top":"15px",display:"flex","align-items":"center","justify-content":"space-between","border-top-right-radius":"15px","border-top-left-radius":"15px"}},j={style:{padding:"0 20px","border-bottom":"1px solid var(--el-border-color-lighter)","overflow-y":"scroll","overflow-x":"hidden"}},I={style:{padding:"20px",display:"flex","align-items":"center","justify-content":"space-between"}},U=z(e({__name:"commission",setup(e){const z=a(),U=l(!1),E=l(0),P=l(!1),H=t([]),M=o({page:1,size:20,settleStatus:null,startTime:"",endTime:""}),B=t([]),N={0:"未支付",1:"已支付",2:"支付失败",3:"支付超时"},q={1:"积分套餐",2:"会员套餐"},J={0:"未结算",1:"等待打款",2:"打款完成",3:"打款失败"},O=t(0);function R(e){M.startTime=e[0],M.endTime=e[1]}function W(){M.startTime="",M.endTime="",B.value=[]}function X(){M.page=1,M.settleStatus=null,W(),G()}async function G(){const{data:e}=await C.getCommissionPage(M);H.value=e.rows,E.value=e.count,O.value=e.totalPrice}r((()=>{G()}));const K=l(0),L=o({ids:[],remark:""});function Q(){P.value=!0,async function(){const{data:e}=await C.getCommissionPage({page:1,size:9999,settleStatus:0});K.value=e.totalPrice,L.remark=e.rows.map((e=>e.id))}()}return(e,a)=>{const l=s("el-option"),t=s("el-select"),o=s("el-date-picker"),r=s("el-button"),Z=s("el-icon"),$=s("el-table-column"),ee=s("el-table"),ae=s("el-pagination"),le=s("el-row"),te=k,oe=s("el-form-item"),re=s("el-input"),se=s("el-form"),de=s("el-dialog"),ie=d("loading");return i(),n("div",null,[p("div",V,[p("div",S,[p("div",Y,[a[9]||(a[9]=p("div",{class:"condition_name"}," 是否结算 ",-1)),u(t,{modelValue:f(M).settleStatus,"onUpdate:modelValue":a[0]||(a[0]=e=>f(M).settleStatus=e),placeholder:"是否结算",clearable:"",style:{width:"100px"}},{default:c((()=>[(i(),n(m,null,g(J,((e,a)=>u(l,{key:a,label:e,value:a},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])]),p("div",null,[a[10]||(a[10]=p("div",{class:"condition_name"}," 账单时间 ",-1)),u(o,{modelValue:f(B),"onUpdate:modelValue":a[1]||(a[1]=e=>b(B)?B.value=e:null),type:"datetimerange","start-placeholder":"账单开始时间","end-placeholder":"账单开始时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],onChange:R,onClear:W},null,8,["modelValue","default-time"])]),p("div",A,[u(r,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",height:"32px",background:"#EFF6FF",color:"#60A5FA","border-radius":"8px","margin-top":"25px"},onClick:G},{default:c((()=>a[11]||(a[11]=[x(" 查询 ")]))),_:1})]),p("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:X},[u(Z,{color:"#3B82F6",size:"20"},{default:c((()=>[u(f(y))])),_:1})])]),p("div",null,[u(r,{type:"danger",text:""},{default:c((()=>[x(" 可提现金额："+v(f(O)),1)])),_:1}),f(z).isSuperAdmin||f(z).isAgent?(i(),h(r,{key:0,bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",height:"32px",background:"#EFF6FF",color:"#60A5FA","border-radius":"8px"},onClick:Q},{default:c((()=>a[12]||(a[12]=[x(" 申请提现 ")]))),_:1})):w("",!0)])]),p("div",D,[_((i(),h(ee,{border:"",data:f(H),height:"66vh",width:"100%","show-overflow-tooltip":""},{default:c((()=>[u($,{prop:"orderId",label:"订单ID"}),u($,{prop:"userId",label:"用户ID"}),u($,{prop:"price",label:"套餐价格"}),u($,{prop:"total",label:"订单总金额"}),u($,{prop:"status",label:"订单状态"},{default:c((({row:e})=>[x(v(N[e.status]),1)])),_:1}),u($,{prop:"packageName",label:"套餐名称"}),u($,{prop:"packageType",label:"套餐类型"},{default:c((({row:e})=>[x(v(q[e.packageType]),1)])),_:1}),u($,{prop:"days",label:"会员套餐有效期"}),u($,{prop:"score",label:"套餐包含积分额度"}),u($,{prop:"settleStatus",label:"结算状态"},{default:c((({row:e})=>[x(v(J[e.settleStatus]),1)])),_:1})])),_:1},8,["data"])),[[ie,f(U)]]),u(le,{class:"flex justify-end mt-5 pb-5"},{default:c((()=>[u(ae,{"current-page":f(M).page,"onUpdate:currentPage":a[2]||(a[2]=e=>f(M).page=e),"page-size":f(M).size,"onUpdate:pageSize":a[3]||(a[3]=e=>f(M).size=e),class:"mr-5","page-sizes":[20,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:f(E),onSizeChange:G,onCurrentChange:G},null,8,["current-page","page-size","total"])])),_:1})]),u(de,{modelValue:f(P),"onUpdate:modelValue":a[8]||(a[8]=e=>b(P)?P.value=e:null),"show-close":!1,width:"500px"},{header:c((()=>[p("div",T,[a[13]||(a[13]=p("div",null," 提现申请 ",-1)),p("div",{style:{cursor:"pointer"},onClick:a[4]||(a[4]=e=>P.value=!1)},[u(Z,null,{default:c((()=>[u(te,{name:"close"})])),_:1})])])])),default:c((()=>[p("div",j,[u(se,{model:f(L),"label-width":"120px"},{default:c((()=>[u(oe,{label:"提现订单数："},{default:c((()=>[x(v(f(L).ids.length),1)])),_:1}),u(oe,{label:"提现金额："},{default:c((()=>[x(v(f(K))+"元 ",1)])),_:1}),u(oe,{label:"备注："},{default:c((()=>[u(re,{modelValue:f(L).remark,"onUpdate:modelValue":a[5]||(a[5]=e=>f(L).remark=e),type:"textarea",placeholder:"备注"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])]),p("div",I,[u(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#F4F4F5",color:"#20295A","border-radius":"8px"},onClick:a[6]||(a[6]=e=>P.value=!1)},{default:c((()=>a[14]||(a[14]=[x(" 取消 ")]))),_:1}),u(r,{bg:"",text:"",style:{width:"40%",padding:"20px 0","background-color":"#3B82F6",color:"#FFF","border-radius":"8px"},type:"primary",onClick:a[7]||(a[7]=a=>async function(e){await(null==e?void 0:e.validate((async e=>{e&&(await C.withdrawal(L),F.success("提现申请提交成功"),P.value=!1)})))}(e.formRef))},{default:c((()=>a[15]||(a[15]=[x(" 确定 ")]))),_:1})])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-14a39132"]]);export{U as default};
