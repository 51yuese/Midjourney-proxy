
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as e}from"../config/config.e980ec46.js";import{d as a,u as l,r as t,G as o,x as s,j as r,o as i,c as u,f as d,g as n,J as c,b as p,h as f,P as m,p as g,k as b,_ as v,q as x}from"../main-5b9099dc.js";const y=e=>(g("data-v-62357d52"),e=e(),b(),e),h=y((()=>p("div",null," 网站图标 ",-1))),_=["src"],w=y((()=>p("div",{style:{"font-size":"13px",color:"#737897","margin-left":"12px","margin-top":"65px"}},"建议尺寸：64*64像素，支持ico格式",-1))),A=y((()=>p("div",null," 网站LOGO ",-1))),N=["src"],P=y((()=>p("div",null," 机器人头像 ",-1))),k=["src"],V=y((()=>p("div",{style:{"font-size":"13px",color:"#737897","margin-left":"12px","margin-top":"65px"}},"建议尺寸：64*64像素，支持ico格式",-1))),D=y((()=>p("div",null," 用户默认头像 ",-1))),F=["src"],z={style:{"margin-top":"50px"}},I=a({__name:"siteBase",setup(a){const g=l(),b=t("/api/file/upload"),v=o({siteName:"",clientLogoPath:"",clientFavoIconPath:"",siteDescribtion:"",siteKeyword:"",qqNumber:"",vxNumber:"",robotAvatar:"",userDefautlAvatar:"",buyCramiAddress:"",siteRobotName:"",isShowAppCatIcon:""}),x=t({siteName:[{required:!0,trigger:"blur",message:"请填写网站名称"}]}),y=t();async function I(){const a=await e.queryConfig({keys:["siteName","clientLogoPath","clientFavoIconPath","siteDescribtion","siteKeyword","qqNumber","vxNumber","robotAvatar","userDefautlAvatar","buyCramiAddress","siteRobotName","isShowAppCatIcon"]});Object.assign(v,a.data)}function q(){var a;null==(a=y.value)||a.validate((async a=>{if(a){if(0==g.isUserModifyPermissions())return m.error("非超级管理员无权限操作！");try{await e.setConfig({settings:(l=v,Object.keys(l).map((e=>({configKey:e,configVal:l[e]}))))}),m.success("变更配置信息成功")}catch(t){}I()}else m.error("请填写完整信息");var l}))}const C=e=>["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)?e.size/1024>300?(m.error("当前限制文件最大不超过 300KB!"),!1):void 0:(m.error("当前系统仅支持 PNG、JPEG、GIF、和 WebP 格式的图片!"),!1),K=(e,a)=>{v.clientFavoIconPath=e.data},R=(e,a)=>{v.clientLogoPath=e.data},j=(e,a)=>{v.robotAvatar=e.data},L=(e,a)=>{v.userDefautlAvatar=e.data};return s((()=>{I()})),(e,a)=>{const l=r("el-input"),t=r("el-form-item"),o=r("el-col"),s=r("el-row"),m=r("Plus"),g=r("el-icon"),I=r("el-upload"),G=r("el-form"),U=r("el-button");return i(),u("div",null,[d(G,{ref_key:"formRef",ref:y,rules:x.value,model:v,"label-width":"150px","label-position":"top"},{default:n((()=>[d(s,null,{default:n((()=>[d(o,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{label:"网站名称",prop:"siteName"},{default:n((()=>[d(l,{size:"large",modelValue:v.siteName,"onUpdate:modelValue":a[0]||(a[0]=e=>v.siteName=e),placeholder:"请输入网站名称网站名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(t,null,{default:n((()=>[h,d(I,{class:"avatar-uploader",style:{"margin-left":"33px"},action:b.value,"show-file-list":!1,"on-success":K,"before-upload":C},{default:n((()=>[v.clientFavoIconPath?(i(),u("img",{key:0,src:v.clientFavoIconPath,style:{width:"84px",height:"84px","border-radius":"12px"},class:"avatar"},null,8,_)):(i(),c(g,{key:1,class:"avatar-uploader-icon"},{default:n((()=>[d(m)])),_:1}))])),_:1},8,["action"]),w])),_:1}),d(t,null,{default:n((()=>[A,d(I,{class:"avatar-uploader",action:b.value,"show-file-list":!1,"on-success":R,"before-upload":C},{default:n((()=>[v.clientLogoPath?(i(),u("img",{key:0,src:v.clientLogoPath,style:{width:"84px",height:"84px","border-radius":"12px"},class:"avatar"},null,8,N)):(i(),c(g,{key:1,class:"avatar-uploader-icon"},{default:n((()=>[d(m)])),_:1}))])),_:1},8,["action"])])),_:1}),d(s,null,{default:n((()=>[d(o,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{label:"网站描述",prop:"siteDescribtion"},{default:n((()=>[d(l,{size:"large",modelValue:v.siteDescribtion,"onUpdate:modelValue":a[1]||(a[1]=e=>v.siteDescribtion=e),placeholder:"请输入网站描述",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(s,null,{default:n((()=>[d(o,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{label:"网站关键词",prop:"siteKeyword"},{default:n((()=>[d(l,{size:"large",modelValue:v.siteKeyword,"onUpdate:modelValue":a[2]||(a[2]=e=>v.siteKeyword=e),placeholder:"请输入网站关键词",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(s,null,{default:n((()=>[d(o,{xs:24,md:20,lg:15,xl:8},{default:n((()=>[d(t,{label:"机器人名称",prop:"siteRobotName"},{default:n((()=>[d(l,{size:"large",modelValue:v.siteRobotName,"onUpdate:modelValue":a[3]||(a[3]=e=>v.siteRobotName=e),placeholder:"默认[Ai Robot]、首页默认展示状态下的名称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(t,{prop:"robotAvatar"},{default:n((()=>[P,d(I,{class:"avatar-uploader",style:{"margin-left":"34px"},action:b.value,"show-file-list":!1,"on-success":j,"before-upload":C},{default:n((()=>[v.robotAvatar?(i(),u("img",{key:0,src:v.robotAvatar,style:{width:"84px",height:"84px","border-radius":"12px"},class:"avatar"},null,8,k)):(i(),c(g,{key:1,class:"avatar-uploader-icon"},{default:n((()=>[d(m)])),_:1}))])),_:1},8,["action"]),V])),_:1}),d(t,{prop:"userDefautlAvatar"},{default:n((()=>[D,d(I,{class:"avatar-uploader",action:b.value,"show-file-list":!1,"on-success":L,"before-upload":C},{default:n((()=>[v.userDefautlAvatar?(i(),u("img",{key:0,src:v.userDefautlAvatar,style:{width:"84px",height:"84px","border-radius":"12px"},class:"avatar"},null,8,F)):(i(),c(g,{key:1,class:"avatar-uploader-icon"},{default:n((()=>[d(m)])),_:1}))])),_:1},8,["action"])])),_:1})])),_:1},8,["rules","model"]),p("div",z,[d(U,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:q},{default:n((()=>[f("保存设置 ")])),_:1})])])}}});"function"==typeof x&&x(I);const q=v(I,[["__scopeId","data-v-62357d52"]]);export{q as default};
