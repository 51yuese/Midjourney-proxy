
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as e}from"../config/config.e980ec46.js";import{d as t,u as a,G as r,r as s,x as l,j as i,o as n,c as o,b as d,f as u,g,h as f,P as c,q as p}from"../main-5b9099dc.js";const m=d("div",{style:{display:"flex","align-items":"center","margin-bottom":"16px"}},[d("div",{style:{"font-size":"15px","font-weight":"bold"}},"注册赠送")],-1),S=d("div",{style:{color:"#9FA3B8","font-size":"15px","margin-right":"12px"}}," 注册赠送 ",-1),x={style:{"margin-top":"16px"}},y=t({__name:"register",setup(t){const p=a(),y=r({registerSendStatus:0,registerRewards:""}),b=s();async function v(){const t=await e.queryConfig({keys:["registerSendStatus","registerRewards"]});t.data.registerSendStatus&&(t.data.registerSendStatus=Number(t.data.registerSendStatus)),Object.assign(y,t.data)}async function _(){if(0==p.isUserModifyPermissions())return c.error("非超级管理员无权限操作！");if(0!=y.registerSendStatus)if(y.registerRewards<=0)c.error("开启邀请赠送选项后需填写此项");else{try{await e.setConfig({settings:(t=y,Object.keys(t).map((e=>({configKey:e,configVal:t[e]}))))}),c.success("变更配置信息成功")}catch(a){}var t;v()}else c.error("开启注册赠送后当前配置才能生效")}return l((()=>{v()})),(e,t)=>{const a=i("el-switch"),r=i("el-form-item"),s=i("el-col"),l=i("el-row"),c=i("el-input"),p=i("el-form"),v=i("el-button");return n(),o("div",null,[m,d("div",null,[u(p,{ref_key:"formRef",ref:b,model:y,"label-position":"top"},{default:g((()=>[d("div",null,[u(l,null,{default:g((()=>[u(s,{xs:24,md:20,lg:15,xl:8},{default:g((()=>[u(r,{prop:"registerSendStatus"},{default:g((()=>[S,u(a,{modelValue:y.registerSendStatus,"onUpdate:modelValue":t[0]||(t[0]=e=>y.registerSendStatus=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),u(l,null,{default:g((()=>[u(s,{xs:24,md:20,lg:15,xl:8},{default:g((()=>[u(r,{label:"注册赠送积分",prop:"registerSendIntegral"},{default:g((()=>[u(c,{size:"large",modelValue:y.registerRewards,"onUpdate:modelValue":t[1]||(t[1]=e=>y.registerRewards=e),placeholder:"首次注册赠送积分数量",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])])),_:1},8,["model"]),d("div",x,[u(v,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:_},{default:g((()=>[f("保存设置 ")])),_:1})])])])}}});"function"==typeof p&&p(y);export{y as default};
