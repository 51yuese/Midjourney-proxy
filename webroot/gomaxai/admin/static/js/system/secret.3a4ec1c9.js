
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as e}from"../config/config.e980ec46.js";import{d as a,r as l,G as t,x as s,j as n,o,c as u,f as c,g as i,b as f,h as d,V as r,W as p,P as y,J as m,K as g,q as v}from"../main-5b9099dc.js";const h={class:"flex justify-between"},V=f("b",null,"key池管理",-1),K={class:"flex justify-between",style:{width:"100%"}},b=a({__name:"secret",setup(a){const v=l([]),b=t({chatGptKey:[]});l({chatGptKey:[{required:!0,trigger:"blur",message:"请填写您的chatGpt的key"}]});const k=l();async function x(){const a=await e.queryGptKeys();v.value=a.data.map((e=>({configKey:e.configKey,configVal:e.configVal,status:e.status}))),0===a.data.length&&_(),b.chatGptKey=v.value}function _(){v.value.push({configKey:"",configVal:"",status:1})}function G(){var a;null==(a=k.value)||a.validate((async a=>{if(a){try{await e.setGptKeys({configs:v.value}),y.success("变更配置信息成功")}catch(l){}x()}else y.error("请填写完整信息")}))}return s((()=>{x()})),(e,a)=>{const l=n("el-button"),t=n("el-input"),s=n("el-switch"),y=n("el-form-item"),x=n("el-col"),w=n("el-row"),j=n("el-form"),C=n("el-card");return o(),u("div",null,[c(C,{style:{margin:"20px"}},{header:i((()=>[f("div",h,[V,c(l,{class:"button",text:"",onClick:G},{default:i((()=>[d(" 保存设置 ")])),_:1})])])),default:i((()=>[c(j,{ref_key:"formRef",ref:k,model:b,"label-width":"80px"},{default:i((()=>[c(w,null,{default:i((()=>[c(x,{xs:24,md:21,lg:16,xl:13},{default:i((()=>[(o(!0),u(r,null,p(v.value,((e,a)=>(o(),m(y,{key:e.configKey,label:`key-${a+1}`,prop:"chatGptKey"},{default:i((()=>[f("div",K,[c(t,{modelValue:e.configVal,"onUpdate:modelValue":a=>e.configVal=a,placeholder:"请填写您的ChatGpt-Key",clearable:"",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),1!==v.value.length?(o(),m(l,{key:0,type:"danger",plain:"",class:"ml-1",onClick:e=>function(e){v.value.splice(e,1)}(a)},{default:i((()=>[d(" 删除 ")])),_:2},1032,["onClick"])):g("",!0),c(s,{modelValue:e.status,"onUpdate:modelValue":a=>e.status=a,class:"ml-5","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1032,["label"])))),128))])),_:1})])),_:1}),c(l,{class:"mt-5",style:{"margin-left":"80px"},onClick:_},{default:i((()=>[d(" 添加key ")])),_:1})])),_:1},8,["model"])])),_:1})])}}});"function"==typeof v&&v(b);export{b as default};
