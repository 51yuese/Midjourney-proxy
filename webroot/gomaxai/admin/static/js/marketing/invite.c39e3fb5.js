
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as e}from"../config/config.e980ec46.js";import{d as a,u as l,r as i,G as t,x as d,j as n,o as r,c as s,b as o,f as p,g as u,h as c,P as v,S as g,p as m,k as f,_ as b}from"../main-5b9099dc.js";const y=e=>(m("data-v-e308cd20"),e=e(),f(),e),w=y((()=>o("div",{style:{color:"#20295","font-size":"15px","font-weight":"bold","margin-bottom":"16px"}},"邀请奖励",-1))),x=y((()=>o("div",{style:{color:"#9FA3B8","font-size":"15px","margin-right":"12px"}}," 邀请注册赠送 ",-1))),V={style:{display:"flex","align-items":"center","justify-content":"space-between"}},h={style:{display:"flex","align-items":"center","justify-content":"space-between"}},R={style:{"margin-top":"16px"}},_=y((()=>o("div",{style:{color:"#20295","font-size":"15px","font-weight":"bold","margin-bottom":"16px","margin-top":"32px"}},"邀请记录",-1))),z={class:"search_add_card"},S={style:{display:"flex","align-items":"center"}},F=y((()=>o("div",{class:"condition_name"},"用户信息",-1))),I={style:{"margin-left":"10px"}},k=y((()=>o("div",{class:"condition_name"},"邀请人信息",-1))),U={style:{"margin-left":"10px"}},j=y((()=>o("div",{class:"condition_name"},"邀请人时间",-1))),C={style:{"margin-left":"10px"}},q=b(a({__name:"invite",setup(a){const m=l(),f=i(),b=i([]),y=i(0),q=t({keyword:"",inviterKeyword:"",startTime:"",page:1,size:10}),A=t({inviteSendStatus:0,inviteRewards:"",inviteRewardVip:"",InvitedRewards:"",invitedRewardVip:""}),D=i({inviteRewards:[{required:!0,trigger:"blur",message:"请输入邀请人所获得的积分数量"}],inviteRewardVip:[{required:!0,trigger:"blur",message:"请输入邀请人所获得的会员天数"}],InvitedRewards:[{required:!0,trigger:"blur",message:"请输入被邀请人所获得的积分数量"}],invitedRewardVip:[{required:!0,trigger:"blur",message:"请输入被邀请人所获得的会员天数"}]});async function E(){const a=await e.queryConfig({keys:["inviteSendStatus","inviteRewards","inviteRewardVip","InvitedRewards","invitedRewardVip"]});a.data.inviteSendStatus&&(a.data.inviteSendStatus=Number(a.data.inviteSendStatus)),Object.assign(A,a.data)}async function P(){var a;null==(a=f.value)||a.validate((async a=>{if(a){if(0==m.isUserModifyPermissions())return v.error("非超级管理员无权限操作！");try{await e.setConfig({settings:(l=A,Object.keys(l).map((e=>({configKey:e,configVal:l[e]}))))}),v.success("变更配置信息成功")}catch(i){}E()}else v.error("请填写完整信息");var l}))}async function B(){await g.getInviteLog(q)}function K(){}return d((()=>{B(),E()})),(e,a)=>{const l=n("el-switch"),i=n("el-form-item"),t=n("el-input"),d=n("el-form"),v=n("el-button"),g=n("el-date-picker"),m=n("RefreshRight"),E=n("el-icon"),O=n("el-table-column"),G=n("el-table"),L=n("el-pagination"),M=n("el-row");return r(),s("div",null,[w,o("div",null,[p(d,{ref_key:"formRef",ref:f,rules:D.value,model:A,"label-position":"top"},{default:u((()=>[p(i,{prop:"inviteSendStatus"},{default:u((()=>[x,p(l,{modelValue:A.inviteSendStatus,"onUpdate:modelValue":a[0]||(a[0]=e=>A.inviteSendStatus=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),o("div",V,[p(i,{label:"邀请者赠送积分",prop:"inviteRewards",style:{width:"48%"}},{default:u((()=>[p(t,{size:"large",modelValue:A.inviteRewards,"onUpdate:modelValue":a[1]||(a[1]=e=>A.inviteRewards=e),placeholder:"邀请人获得的积分数量",clearable:""},null,8,["modelValue"])])),_:1}),p(i,{label:"邀请者赠送会员天数",prop:"inviteRewardVip",style:{width:"48%"}},{default:u((()=>[p(t,{size:"large",modelValue:A.inviteRewardVip,"onUpdate:modelValue":a[2]||(a[2]=e=>A.inviteRewardVip=e),placeholder:"邀请人获得的vip天数",clearable:""},null,8,["modelValue"])])),_:1})]),o("div",h,[p(i,{label:"被邀请者赠送积分",prop:"InvitedRewards",style:{width:"48%"}},{default:u((()=>[p(t,{size:"large",modelValue:A.InvitedRewards,"onUpdate:modelValue":a[3]||(a[3]=e=>A.InvitedRewards=e),placeholder:"被邀请人获得的积分数量",clearable:""},null,8,["modelValue"])])),_:1}),p(i,{label:"被邀请者赠送会员天数",prop:"invitedRewardVip",style:{width:"48%"}},{default:u((()=>[p(t,{size:"large",modelValue:A.invitedRewardVip,"onUpdate:modelValue":a[4]||(a[4]=e=>A.invitedRewardVip=e),placeholder:"被邀请人获得的vip天数",clearable:""},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model"]),o("div",R,[p(v,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:P},{default:u((()=>[c("保存设置 ")])),_:1})])]),_,o("div",z,[o("div",S,[o("div",null,[F,p(t,{modelValue:q.userInfo,"onUpdate:modelValue":a[5]||(a[5]=e=>q.userInfo=e),placeholder:"用户名/呢称/手机号/邮箱",style:{width:"200px"}},null,8,["modelValue"])]),o("div",I,[k,p(t,{modelValue:q.inviterInfo,"onUpdate:modelValue":a[6]||(a[6]=e=>q.inviterInfo=e),placeholder:"用户名/呢称/手机号/邮箱",style:{width:"200px"}},null,8,["modelValue"])]),o("div",U,[j,p(g,{modelValue:q.inviterDate,"onUpdate:modelValue":a[7]||(a[7]=e=>q.inviterDate=e),type:"datetime",placeholder:"请输入邀请人时间","prefix-icon":"Calendar"},null,8,["modelValue"])]),o("div",C,[p(v,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",height:"32px",background:"#EFF6FF",color:"#60A5FA","border-radius":"8px","margin-top":"25px"},onClick:B},{default:u((()=>[c(" 查询 ")])),_:1})]),o("div",{style:{"margin-left":"12px","background-color":"#EFF6FF",padding:"4px 16px","border-radius":"8px","margin-top":"22px",cursor:"pointer"},onClick:K},[p(E,{color:"#3B82F6",size:"20"},{default:u((()=>[p(m)])),_:1})])])]),o("div",null,[p(G,{border:"","highlight-current-row":"",data:b.value,style:{width:"100%"},"max-height":"70vh"},{default:u((()=>[p(O,{label:"排序ID"}),p(O,{label:"邀请人头像"}),p(O,{label:"邀请人用户名"}),p(O,{label:"邀请人手机号"}),p(O,{label:"邀请人昵称"}),p(O,{label:"邀请人邮箱"}),p(O,{label:"新用户名"}),p(O,{label:"新用户昵称"}),p(O,{label:"新用户手机号"}),p(O,{label:"新用户邮箱"}),p(O,{label:"注册时间"})])),_:1},8,["data"])]),p(M,{class:"flex justify-end mt-3"},{default:u((()=>[p(L,{"current-page":q.page,"onUpdate:currentPage":a[8]||(a[8]=e=>q.page=e),"page-size":q.size,"onUpdate:pageSize":a[9]||(a[9]=e=>q.size=e),class:"mr-5","page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:B,onCurrentChange:B},null,8,["current-page","page-size","total"])])),_:1})])}}}),[["__scopeId","data-v-e308cd20"]]);export{q as default};
