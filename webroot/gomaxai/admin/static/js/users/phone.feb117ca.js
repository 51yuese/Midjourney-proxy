
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{a as e}from"../config/config.e980ec46.js";import{d as l,u as a,G as s,r as t,x as o,j as i,o as r,c as n,b as c,f as d,g as u,h as m,P as p,p as g,k as f,_ as h,q as y}from"../main-5b9099dc.js";const b=e=>(g("data-v-eb117bd7"),e=e(),f(),e),P={class:"note_register_main"},x=b((()=>c("div",{class:"title"}," 阿里云手机验证码配置 ",-1))),v={style:{display:"flex","align-items":"center","margin-top":"16px","margin-bottom":"24px"}},_=b((()=>c("div",{style:{"font-size":"15px",color:"#9FA3B8"}},"手机号注册",-1))),S={style:{"margin-left":"12px"}},A={style:{"margin-top":"16px"}},K=l({__name:"phone",setup(l){const g=a(),f=s({phoneRegisterStatus:"",aliPhoneAccessKeyId:"",aliPhoneAccessKeySecret:"",aliPhoneSignName:"",aliPhoneTemplateCode:""}),h=t({phoneRegisterStatus:[{required:!1,trigger:"blur",message:"请选择是否开启手机号注册"}],aliPhoneAccessKeyId:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务accessKeyId"}],aliPhoneAccessKeySecret:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务accessKeySecret"}],aliPhoneSignName:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务的模板签名"}],aliPhoneTemplateCode:[{required:!1,trigger:"blur",message:"请填写阿里云短信服务的模板ID"}]}),y=t();async function b(){const l=await e.queryConfig({keys:["phoneRegisterStatus","aliPhoneAccessKeyId","aliPhoneAccessKeySecret","aliPhoneSignName","aliPhoneTemplateCode"]});Object.assign(f,l.data)}function K(){var l;null==(l=y.value)||l.validate((async l=>{if(l){if(0==g.isUserModifyPermissions())return p.error("非超级管理员无权限操作！");try{await e.setConfig({settings:(a=f,Object.keys(a).map((e=>({configKey:e,configVal:a[e]}))))}),p.success("变更配置信息成功")}catch(s){}b()}else p.error("请填写完整信息");var a}))}return o((()=>{b()})),(e,l)=>{const a=i("el-alert"),s=i("el-switch"),t=i("el-tooltip"),o=i("el-input"),p=i("el-form-item"),g=i("el-col"),b=i("el-row"),V=i("el-form"),I=i("el-button");return r(),n("div",null,[c("div",null,[d(a,{closable:!1,"show-icon":"",title:"验证码说明",description:"此处采用阿里云短信服务、请先申请好个人的签名模板以及获取到您的秘钥信息、详细申请地址为：https://dysms.console.aliyun.com/overview 当您配置并开启后则表示开启用户端手机号注册的行为！",type:"warning"})]),c("div",P,[x,c("div",null,[c("div",v,[_,c("div",S,[d(t,{class:"box-item",effect:"dark",content:"如您启用短信验证、则用户端则可以通过手机验证码方式注册或登录！",placement:"right"},{default:u((()=>[d(s,{modelValue:f.phoneRegisterStatus,"onUpdate:modelValue":l[0]||(l[0]=e=>f.phoneRegisterStatus=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])]),c("div",null,[d(V,{ref_key:"formRef",ref:y,rules:h.value,model:f,"label-width":"170px","label-position":"top"},{default:u((()=>[d(b,null,{default:u((()=>[d(g,{xs:24,md:20,lg:15,xl:8},{default:u((()=>[d(p,{label:"AccessKeyId",prop:"aliPhoneAccessKeyId"},{default:u((()=>[d(o,{size:"large",modelValue:f.aliPhoneAccessKeyId,"onUpdate:modelValue":l[1]||(l[1]=e=>f.aliPhoneAccessKeyId=e),placeholder:"请填写AccessKeyId",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(b,null,{default:u((()=>[d(g,{xs:24,md:20,lg:15,xl:8},{default:u((()=>[d(p,{label:"AccessKeySecret",prop:"aliPhoneAccessKeySecret"},{default:u((()=>[d(o,{size:"large",modelValue:f.aliPhoneAccessKeySecret,"onUpdate:modelValue":l[2]||(l[2]=e=>f.aliPhoneAccessKeySecret=e),placeholder:"请填写AccessKeySecret",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(b,null,{default:u((()=>[d(g,{xs:24,md:20,lg:15,xl:8},{default:u((()=>[d(p,{label:"短信签名",prop:"aliPhoneSignName"},{default:u((()=>[d(o,{size:"large",modelValue:f.aliPhoneSignName,"onUpdate:modelValue":l[3]||(l[3]=e=>f.aliPhoneSignName=e),placeholder:"请填写您申请的短信签名",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),d(b,null,{default:u((()=>[d(g,{xs:24,md:20,lg:15,xl:8},{default:u((()=>[d(p,{label:"短信模板ID",prop:"aliPhoneTemplateCode"},{default:u((()=>[d(o,{size:"large",modelValue:f.aliPhoneTemplateCode,"onUpdate:modelValue":l[4]||(l[4]=e=>f.aliPhoneTemplateCode=e),placeholder:"请填写短信模板ID",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["rules","model"])])])]),c("div",A,[d(I,{bg:"",text:"",type:"primary",size:"large",style:{"font-size":"15px",background:"#EFF6FF",height:"42px",color:"#60A5FA","border-radius":"8px",padding:"8px 100px"},onClick:K},{default:u((()=>[m("保存设置")])),_:1})])])}}});"function"==typeof y&&y(K);const V=h(K,[["__scopeId","data-v-eb117bd7"]]);export{V as default};
