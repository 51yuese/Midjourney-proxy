var t=Object.defineProperty,e=(e,i,n)=>(((e,i,n)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n})(e,"symbol"!=typeof i?i+"":i,n),n);import{_ as i,a as n,b as s,c as r,d as a,e as o,f as l,g as h,h as u}from"../03/03.176663c7.js";import{N as c,p as d,b as p,a as f,f as g,c as v,d as m,e as _,A as y,g as x,h as w,i as A,_ as b}from"../mjDraw/mjDraw.ce7de953.js";import{Y as C,Z as k,$ as S,a0 as I,a1 as E,a2 as T,a3 as P,j as O,a4 as M,a5 as B,o as R,f as N,a6 as L,u as D,g as V,a7 as z,r as U,a8 as j,b as F,c as Q,a9 as q,aa as H,e as G,t as J,ab as W,x as Z,ac as X,ad as K,m as Y,ae as $,af as tt,ag as et,O as it,ah as nt,ai as st,J as rt,aj as at,ak as ot,L as lt,H as ht,al as ut,am as ct,d as dt,p as pt,k as ft,v as gt,an as vt,ao as mt,ap as _t,aq as yt,ar as xt,as as wt,W as At,E as bt,at as Ct,R as kt,C as St,B as It,Q as Et,S as Tt,M as Pt,K as Ot,I as Mt,P as Bt,au as Rt,D as Nt,U as Lt,F as Dt,G as Vt,_ as zt,av as Ut,aw as jt,ax as Ft,ay as Qt,az as qt,y as Ht,T as Gt}from"../main-49160028.js";import{m as Jt}from"../marked.esm/marked.esm.cb1ff4ec.js";var Wt;const Zt=(Wt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},function(t){return null==Wt?void 0:Wt[t]});var Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Yt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var $t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var te="\\ud800-\\udfff",ee="\\u2700-\\u27bf",ie="a-z\\xdf-\\xf6\\xf8-\\xff",ne="A-Z\\xc0-\\xd6\\xd8-\\xde",se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",re="["+se+"]",ae="\\d+",oe="["+ee+"]",le="["+ie+"]",he="[^"+te+se+ae+ee+ie+ne+"]",ue="(?:\\ud83c[\\udde6-\\uddff]){2}",ce="[\\ud800-\\udbff][\\udc00-\\udfff]",de="["+ne+"]",pe="(?:"+le+"|"+he+")",fe="(?:"+de+"|"+he+")",ge="(?:['’](?:d|ll|m|re|s|t|ve))?",ve="(?:['’](?:D|LL|M|RE|S|T|VE))?",me="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",_e="[\\ufe0e\\ufe0f]?",ye=_e+me+("(?:\\u200d(?:"+["[^"+te+"]",ue,ce].join("|")+")"+_e+me+")*"),xe="(?:"+[oe,ue,ce].join("|")+")"+ye,we=RegExp([de+"?"+le+"+"+ge+"(?="+[re,de,"$"].join("|")+")",fe+"+"+ve+"(?="+[re,de+pe,"$"].join("|")+")",de+"?"+pe+"+"+ge,de+"+"+ve,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ae,xe].join("|"),"g");function Ae(t,e,i){return t=C(t),void 0===(e=i?void 0:e)?function(t){return $t.test(t)}(t)?function(t){return t.match(we)||[]}(t):function(t){return t.match(Yt)||[]}(t):t.match(e)||[]}var be,Ce=RegExp("['’]","g");const ke=(be=function(t,e,i){return t+(i?"-":"")+e.toLowerCase()},function(t){return function(t,e,i,n){var s=-1,r=null==t?0:t.length;for(n&&r&&(i=t[++s]);++s<r;)i=e(i,t[s],s,t);return i}(Ae(function(t){return(t=C(t))&&t.replace(Xt,Zt).replace(Kt,"")}(t).replace(Ce,"")),be,"")});var Se={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const Ie=function(t,e,i){var n,s=Se[t];return n="string"==typeof s?s:1===e?s.one:s.other.replace("{{count}}",e.toString()),null!=i&&i.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};var Ee={date:k({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:k({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:k({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Te={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const Pe={name:"en-US",locale:{code:"en-US",formatDistance:Ie,formatLong:Ee,formatRelative:function(t,e,i,n){return Te[t]},localize:{ordinalNumber:function(t,e){var i=Number(t),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:S({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:S({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:S({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:S({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:S({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:I({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}}),era:E({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:E({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:E({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:E({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:E({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}};const Oe=B("download",R("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},R("g",{fill:"currentColor","fill-rule":"nonzero"},R("path",{d:"M3.5,13 L12.5,13 C12.7761424,13 13,13.2238576 13,13.5 C13,13.7454599 12.8231248,13.9496084 12.5898756,13.9919443 L12.5,14 L3.5,14 C3.22385763,14 3,13.7761424 3,13.5 C3,13.2545401 3.17687516,13.0503916 3.41012437,13.0080557 L3.5,13 L12.5,13 L3.5,13 Z M7.91012437,1.00805567 L8,1 C8.24545989,1 8.44960837,1.17687516 8.49194433,1.41012437 L8.5,1.5 L8.5,10.292 L11.1819805,7.6109127 C11.3555469,7.43734635 11.6249713,7.4180612 11.8198394,7.55305725 L11.8890873,7.6109127 C12.0626536,7.78447906 12.0819388,8.05390346 11.9469427,8.2487716 L11.8890873,8.31801948 L8.35355339,11.8535534 C8.17998704,12.0271197 7.91056264,12.0464049 7.7156945,11.9114088 L7.64644661,11.8535534 L4.1109127,8.31801948 C3.91565056,8.12275734 3.91565056,7.80617485 4.1109127,7.6109127 C4.28447906,7.43734635 4.55390346,7.4180612 4.7487716,7.55305725 L4.81801948,7.6109127 L7.5,10.292 L7.5,1.5 C7.5,1.25454011 7.67687516,1.05039163 7.91012437,1.00805567 L8,1 L7.91012437,1.00805567 Z"}))))),Me=B("rotateClockwise",R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 12.7916 15.3658 15.2026 13 16.3265V14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5V17.5C12 17.7761 12.2239 18 12.5 18H15.5C15.7761 18 16 17.7761 16 17.5C16 17.2239 15.7761 17 15.5 17H13.8758C16.3346 15.6357 18 13.0128 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 10.2761 2.22386 10.5 2.5 10.5C2.77614 10.5 3 10.2761 3 10Z",fill:"currentColor"}),R("path",{d:"M10 12C11.1046 12 12 11.1046 12 10C12 8.89543 11.1046 8 10 8C8.89543 8 8 8.89543 8 10C8 11.1046 8.89543 12 10 12ZM10 11C9.44772 11 9 10.5523 9 10C9 9.44772 9.44772 9 10 9C10.5523 9 11 9.44772 11 10C11 10.5523 10.5523 11 10 11Z",fill:"currentColor"}))),Be=B("rotateClockwise",R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 12.7916 4.63419 15.2026 7 16.3265V14.5C7 14.2239 7.22386 14 7.5 14C7.77614 14 8 14.2239 8 14.5V17.5C8 17.7761 7.77614 18 7.5 18H4.5C4.22386 18 4 17.7761 4 17.5C4 17.2239 4.22386 17 4.5 17H6.12422C3.66539 15.6357 2 13.0128 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 10.2761 17.7761 10.5 17.5 10.5C17.2239 10.5 17 10.2761 17 10Z",fill:"currentColor"}),R("path",{d:"M10 12C8.89543 12 8 11.1046 8 10C8 8.89543 8.89543 8 10 8C11.1046 8 12 8.89543 12 10C12 11.1046 11.1046 12 10 12ZM10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z",fill:"currentColor"}))),Re=B("zoomIn",R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M11.5 8.5C11.5 8.22386 11.2761 8 11 8H9V6C9 5.72386 8.77614 5.5 8.5 5.5C8.22386 5.5 8 5.72386 8 6V8H6C5.72386 8 5.5 8.22386 5.5 8.5C5.5 8.77614 5.72386 9 6 9H8V11C8 11.2761 8.22386 11.5 8.5 11.5C8.77614 11.5 9 11.2761 9 11V9H11C11.2761 9 11.5 8.77614 11.5 8.5Z",fill:"currentColor"}),R("path",{d:"M8.5 3C11.5376 3 14 5.46243 14 8.5C14 9.83879 13.5217 11.0659 12.7266 12.0196L16.8536 16.1464C17.0488 16.3417 17.0488 16.6583 16.8536 16.8536C16.68 17.0271 16.4106 17.0464 16.2157 16.9114L16.1464 16.8536L12.0196 12.7266C11.0659 13.5217 9.83879 14 8.5 14C5.46243 14 3 11.5376 3 8.5C3 5.46243 5.46243 3 8.5 3ZM8.5 4C6.01472 4 4 6.01472 4 8.5C4 10.9853 6.01472 13 8.5 13C10.9853 13 13 10.9853 13 8.5C13 6.01472 10.9853 4 8.5 4Z",fill:"currentColor"}))),Ne=B("zoomOut",R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M11 8C11.2761 8 11.5 8.22386 11.5 8.5C11.5 8.77614 11.2761 9 11 9H6C5.72386 9 5.5 8.77614 5.5 8.5C5.5 8.22386 5.72386 8 6 8H11Z",fill:"currentColor"}),R("path",{d:"M14 8.5C14 5.46243 11.5376 3 8.5 3C5.46243 3 3 5.46243 3 8.5C3 11.5376 5.46243 14 8.5 14C9.83879 14 11.0659 13.5217 12.0196 12.7266L16.1464 16.8536L16.2157 16.9114C16.4106 17.0464 16.68 17.0271 16.8536 16.8536C17.0488 16.6583 17.0488 16.3417 16.8536 16.1464L12.7266 12.0196C13.5217 11.0659 14 9.83879 14 8.5ZM4 8.5C4 6.01472 6.01472 4 8.5 4C10.9853 4 13 6.01472 13 8.5C13 10.9853 10.9853 13 8.5 13C6.01472 13 4 10.9853 4 8.5Z",fill:"currentColor"}))),Le=N({name:"ResizeSmall",render:()=>R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},R("g",{fill:"none"},R("path",{d:"M5.5 4A1.5 1.5 0 0 0 4 5.5v1a.5.5 0 0 1-1 0v-1A2.5 2.5 0 0 1 5.5 3h1a.5.5 0 0 1 0 1h-1zM16 5.5A1.5 1.5 0 0 0 14.5 4h-1a.5.5 0 0 1 0-1h1A2.5 2.5 0 0 1 17 5.5v1a.5.5 0 0 1-1 0v-1zm0 9a1.5 1.5 0 0 1-1.5 1.5h-1a.5.5 0 0 0 0 1h1a2.5 2.5 0 0 0 2.5-2.5v-1a.5.5 0 0 0-1 0v1zm-12 0A1.5 1.5 0 0 0 5.5 16h1.25a.5.5 0 0 1 0 1H5.5A2.5 2.5 0 0 1 3 14.5v-1.25a.5.5 0 0 1 1 0v1.25zM8.5 7A1.5 1.5 0 0 0 7 8.5v3A1.5 1.5 0 0 0 8.5 13h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 11.5 7h-3zM8 8.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3z",fill:"currentColor"})))}),De=L&&"loading"in document.createElement("img"),Ve=new WeakMap,ze=new WeakMap,Ue=new WeakMap,je=(t,e,i)=>{if(!t)return()=>{};const n=((t={})=>{var e;const{root:i=null}=t;return{hash:`${t.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(t.threshold)?t.threshold.join(","):null!==(e=t.threshold)&&void 0!==e?e:"0"}`,options:Object.assign(Object.assign({},t),{root:("string"==typeof i?document.querySelector(i):i)||document.documentElement})}})(e),{root:s}=n.options;let r;const a=Ve.get(s);let o,l;a?r=a:(r=new Map,Ve.set(s,r)),r.has(n.hash)?(l=r.get(n.hash),l[1].has(t)||(o=l[0],l[1].add(t),o.observe(t))):(o=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const e=ze.get(t.target),i=Ue.get(t.target);e&&e(),i&&(i.value=!0)}}))}),n.options),o.observe(t),l=[o,new Set([t])],r.set(n.hash,l));let h=!1;const u=()=>{h||(ze.delete(t),Ue.delete(t),h=!0,l[1].has(t)&&(l[0].unobserve(t),l[1].delete(t)),l[1].size<=0&&r.delete(n.hash),r.size||Ve.delete(s))};return ze.set(t,u),Ue.set(t,i),u},Fe=N({name:"Tooltip",props:Object.assign(Object.assign({},d),V.props),__popover__:!0,setup(t){const{mergedClsPrefixRef:e}=D(t),i=V("Tooltip","-tooltip",void 0,z,t,e),n=U(null),s={syncPosition(){n.value.syncPosition()},setShow(t){n.value.setShow(t)}};return Object.assign(Object.assign({},s),{popoverRef:n,mergedTheme:i,popoverThemeOverrides:O((()=>i.value.self))})},render(){const{mergedTheme:t,internalExtraClass:e}=this;return R(c,Object.assign(Object.assign({},this.$props),{theme:t.peers.Popover,themeOverrides:t.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:e.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),Qe=Object.assign(Object.assign({},V.props),{onPreviewPrev:Function,onPreviewNext:Function,showToolbar:{type:Boolean,default:!0},showToolbarTooltip:Boolean,renderToolbar:Function}),qe=j("n-image"),He=R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M6 5C5.75454 5 5.55039 5.17688 5.50806 5.41012L5.5 5.5V14.5C5.5 14.7761 5.72386 15 6 15C6.24546 15 6.44961 14.8231 6.49194 14.5899L6.5 14.5V5.5C6.5 5.22386 6.27614 5 6 5ZM13.8536 5.14645C13.68 4.97288 13.4106 4.9536 13.2157 5.08859L13.1464 5.14645L8.64645 9.64645C8.47288 9.82001 8.4536 10.0894 8.58859 10.2843L8.64645 10.3536L13.1464 14.8536C13.3417 15.0488 13.6583 15.0488 13.8536 14.8536C14.0271 14.68 14.0464 14.4106 13.9114 14.2157L13.8536 14.1464L9.70711 10L13.8536 5.85355C14.0488 5.65829 14.0488 5.34171 13.8536 5.14645Z",fill:"currentColor"})),Ge=R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M13.5 5C13.7455 5 13.9496 5.17688 13.9919 5.41012L14 5.5V14.5C14 14.7761 13.7761 15 13.5 15C13.2545 15 13.0504 14.8231 13.0081 14.5899L13 14.5V5.5C13 5.22386 13.2239 5 13.5 5ZM5.64645 5.14645C5.82001 4.97288 6.08944 4.9536 6.28431 5.08859L6.35355 5.14645L10.8536 9.64645C11.0271 9.82001 11.0464 10.0894 10.9114 10.2843L10.8536 10.3536L6.35355 14.8536C6.15829 15.0488 5.84171 15.0488 5.64645 14.8536C5.47288 14.68 5.4536 14.4106 5.58859 14.2157L5.64645 14.1464L9.79289 10L5.64645 5.85355C5.45118 5.65829 5.45118 5.34171 5.64645 5.14645Z",fill:"currentColor"})),Je=R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M4.089 4.216l.057-.07a.5.5 0 0 1 .638-.057l.07.057L10 9.293l5.146-5.147a.5.5 0 0 1 .638-.057l.07.057a.5.5 0 0 1 .057.638l-.057.07L10.707 10l5.147 5.146a.5.5 0 0 1 .057.638l-.057.07a.5.5 0 0 1-.638.057l-.07-.057L10 10.707l-5.146 5.147a.5.5 0 0 1-.638.057l-.07-.057a.5.5 0 0 1-.057-.638l.057-.07L9.293 10L4.146 4.854a.5.5 0 0 1-.057-.638l.057-.07l-.057.07z",fill:"currentColor"})),We=F([F("body >",[Q("image-container","position: fixed;")]),Q("image-preview-container","\n position: fixed;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n display: flex;\n "),Q("image-preview-overlay","\n z-index: -1;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n background: rgba(0, 0, 0, .3);\n ",[q()]),Q("image-preview-toolbar","\n z-index: 1;\n position: absolute;\n left: 50%;\n transform: translateX(-50%);\n border-radius: var(--n-toolbar-border-radius);\n height: 48px;\n bottom: 40px;\n padding: 0 12px;\n background: var(--n-toolbar-color);\n box-shadow: var(--n-toolbar-box-shadow);\n color: var(--n-toolbar-icon-color);\n transition: color .3s var(--n-bezier);\n display: flex;\n align-items: center;\n ",[Q("base-icon","\n padding: 0 8px;\n font-size: 28px;\n cursor: pointer;\n "),q()]),Q("image-preview-wrapper","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n display: flex;\n pointer-events: none;\n ",[H()]),Q("image-preview","\n user-select: none;\n -webkit-user-select: none;\n pointer-events: all;\n margin: auto;\n max-height: calc(100vh - 32px);\n max-width: calc(100vw - 32px);\n transition: transform .3s var(--n-bezier);\n "),Q("image","\n display: inline-flex;\n max-height: 100%;\n max-width: 100%;\n ",[G("preview-disabled","\n cursor: pointer;\n "),F("img","\n border-radius: inherit;\n ")])]),Ze=N({name:"ImagePreview",props:Object.assign(Object.assign({},Qe),{onNext:Function,onPrev:Function,clsPrefix:{type:String,required:!0}}),setup(t){const e=V("Image","-image",We,W,t,J(t,"clsPrefix"));let i=null;const n=U(null),s=U(null),r=U(void 0),a=U(!1),o=U(!1),{localeRef:l}=function(t){const{mergedLocaleRef:e,mergedDateLocaleRef:i}=T(P,null)||{},n=O((()=>{var i,n;return null!==(n=null===(i=null==e?void 0:e.value)||void 0===i?void 0:i[t])&&void 0!==n?n:M[t]}));return{dateLocaleRef:O((()=>{var t;return null!==(t=null==i?void 0:i.value)&&void 0!==t?t:Pe})),localeRef:n}}("Image");function h(e){var i,n;switch(e.key){case" ":e.preventDefault();break;case"ArrowLeft":null===(i=t.onPrev)||void 0===i||i.call(t);break;case"ArrowRight":null===(n=t.onNext)||void 0===n||n.call(t);break;case"Escape":N()}}Z(a,(t=>{t?ot("keydown",document,h):K("keydown",document,h)})),X((()=>{K("keydown",document,h)}));let u=0,c=0,d=0,f=0,g=0,v=0,m=0,_=0,y=!1;function x(t){const{clientX:e,clientY:i}=t;d=e-u,f=i-c,p(B)}function w(t){const{value:e}=n;if(!e)return{offsetX:0,offsetY:0};const i=e.getBoundingClientRect(),{moveVerticalDirection:s,moveHorizontalDirection:r,deltaHorizontal:a,deltaVertical:o}=t||{};let l=0,h=0;return l=i.width<=window.innerWidth?0:i.left>0?(i.width-window.innerWidth)/2:i.right<window.innerWidth?-(i.width-window.innerWidth)/2:"horizontalRight"===r?Math.min((i.width-window.innerWidth)/2,g-(null!=a?a:0)):Math.max(-(i.width-window.innerWidth)/2,g-(null!=a?a:0)),h=i.height<=window.innerHeight?0:i.top>0?(i.height-window.innerHeight)/2:i.bottom<window.innerHeight?-(i.height-window.innerHeight)/2:"verticalBottom"===s?Math.min((i.height-window.innerHeight)/2,v-(null!=o?o:0)):Math.max(-(i.height-window.innerHeight)/2,v-(null!=o?o:0)),{offsetX:l,offsetY:h}}function A(t){K("mousemove",document,x),K("mouseup",document,A);const{clientX:e,clientY:i}=t;y=!1;const n=function(t){const{mouseUpClientX:e,mouseUpClientY:i,mouseDownClientX:n,mouseDownClientY:s}=t,r=n-e,a=s-i;return{moveVerticalDirection:"vertical"+(a>0?"Top":"Bottom"),moveHorizontalDirection:"horizontal"+(r>0?"Left":"Right"),deltaHorizontal:r,deltaVertical:a}}({mouseUpClientX:e,mouseUpClientY:i,mouseDownClientX:m,mouseDownClientY:_}),s=w(n);d=s.offsetX,f=s.offsetY,B()}const b=T(qe,null);let C=0,k=1,S=0;function I(){k=1,C=0}function E(){const{value:t}=n;if(!t)return 1;const{innerWidth:e,innerHeight:i}=window,s=t.naturalHeight/(i-32),r=t.naturalWidth/(e-32);return s<1&&r<1?1:Math.max(s,r)}function B(t=!0){var e;const{value:i}=n;if(!i)return;const{style:s}=i,r=lt(null===(e=null==b?void 0:b.previewedImgPropsRef.value)||void 0===e?void 0:e.style);let a="";if("string"==typeof r)a=r+";";else for(const n in r)a+=`${ke(n)}: ${r[n]};`;const o=`transform-origin: center; transform: translateX(${d}px) translateY(${f}px) rotate(${S}deg) scale(${k});`;s.cssText=y?a+"cursor: grabbing; transition: none;"+o:a+"cursor: grab;"+o+(t?"":"transition: none;"),t||i.offsetHeight}function N(){a.value=!a.value,o.value=!0}const L={setPreviewSrc:t=>{r.value=t},setThumbnailEl:t=>{i=t},toggleShow:N};const z=O((()=>{const{common:{cubicBezierEaseInOut:t},self:{toolbarIconColor:i,toolbarBorderRadius:n,toolbarBoxShadow:s,toolbarColor:r}}=e.value;return{"--n-bezier":t,"--n-toolbar-icon-color":i,"--n-toolbar-color":r,"--n-toolbar-border-radius":n,"--n-toolbar-box-shadow":s}})),{inlineThemeDisabled:j}=D(),F=j?Y("image-preview",void 0,z,t):void 0;return Object.assign({previewRef:n,previewWrapperRef:s,previewSrc:r,show:a,appear:$(),displayed:o,previewedImgProps:null==b?void 0:b.previewedImgPropsRef,handleWheel(t){t.preventDefault()},handlePreviewMousedown:function(t){var e,i;if(null===(i=null===(e=null==b?void 0:b.previewedImgPropsRef.value)||void 0===e?void 0:e.onMousedown)||void 0===i||i.call(e,t),0!==t.button)return;const{clientX:n,clientY:s}=t;y=!0,u=n-d,c=s-f,g=d,v=f,m=n,_=s,B(),ot("mousemove",document,x),ot("mouseup",document,A)},handlePreviewDblclick:function(t){var e,i;null===(i=null===(e=null==b?void 0:b.previewedImgPropsRef.value)||void 0===e?void 0:e.onDblclick)||void 0===i||i.call(e,t);const n=E();k=k===n?1:n,B()},syncTransformOrigin:function(){const{value:t}=s;if(!i||!t)return;const{style:e}=t,n=i.getBoundingClientRect(),r=n.left+n.width/2,a=n.top+n.height/2;e.transformOrigin=`${r}px ${a}px`},handleAfterLeave:()=>{I(),S=0,o.value=!1},handleDragStart:t=>{var e,i;null===(i=null===(e=null==b?void 0:b.previewedImgPropsRef.value)||void 0===e?void 0:e.onDragstart)||void 0===i||i.call(e,t),t.preventDefault()},zoomIn:function(){const t=function(){const{value:t}=n;if(!t)return 1;const{innerWidth:e,innerHeight:i}=window,s=Math.max(1,t.naturalHeight/(i-32)),r=Math.max(1,t.naturalWidth/(e-32));return Math.max(3,2*s,2*r)}();k<t&&(C+=1,k=Math.min(t,Math.pow(1.5,C)),B())},zoomOut:function(){if(k>.5){const t=k;C-=1,k=Math.max(.5,Math.pow(1.5,C));const e=t-k;B(!1);const i=w();k+=e,B(!1),k-=e,d=i.offsetX,f=i.offsetY,B()}},handleDownloadClick:function(){const t=r.value;t&&((t,e)=>{if(!t)return;const i=document.createElement("a");i.href=t,void 0!==e&&(i.download=e),document.body.appendChild(i),i.click(),document.body.removeChild(i)})(t,void 0)},rotateCounterclockwise:function(){S-=90,B()},rotateClockwise:function(){S+=90,B()},handleSwitchPrev:function(){var e;I(),S=0,null===(e=t.onPrev)||void 0===e||e.call(t)},handleSwitchNext:function(){var e;I(),S=0,null===(e=t.onNext)||void 0===e||e.call(t)},withTooltip:function(i,n){if(t.showToolbarTooltip){const{value:t}=e;return R(Fe,{to:!1,theme:t.peers.Tooltip,themeOverrides:t.peerOverrides.Tooltip,keepAliveOnHover:!1},{default:()=>l.value[n],trigger:()=>i})}return i},resizeToOrignalImageSize:function(){k=E(),C=Math.ceil(Math.log(k)/Math.log(1.5)),d=0,f=0,B()},cssVars:j?void 0:z,themeClass:null==F?void 0:F.themeClass,onRender:null==F?void 0:F.onRender},L)},render(){var t,e;const{clsPrefix:i,renderToolbar:n,withTooltip:s}=this,r=s(R(tt,{clsPrefix:i,onClick:this.handleSwitchPrev},{default:()=>He}),"tipPrevious"),a=s(R(tt,{clsPrefix:i,onClick:this.handleSwitchNext},{default:()=>Ge}),"tipNext"),o=s(R(tt,{clsPrefix:i,onClick:this.rotateCounterclockwise},{default:()=>R(Be,null)}),"tipCounterclockwise"),l=s(R(tt,{clsPrefix:i,onClick:this.rotateClockwise},{default:()=>R(Me,null)}),"tipClockwise"),h=s(R(tt,{clsPrefix:i,onClick:this.resizeToOrignalImageSize},{default:()=>R(Le,null)}),"tipOriginalSize"),u=s(R(tt,{clsPrefix:i,onClick:this.zoomOut},{default:()=>R(Ne,null)}),"tipZoomOut"),c=s(R(tt,{clsPrefix:i,onClick:this.handleDownloadClick},{default:()=>R(Oe,null)}),"tipDownload"),d=s(R(tt,{clsPrefix:i,onClick:this.toggleShow},{default:()=>Je}),"tipClose"),p=s(R(tt,{clsPrefix:i,onClick:this.zoomIn},{default:()=>R(Re,null)}),"tipZoomIn");return R(rt,null,null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t),R(et,{show:this.show},{default:()=>{var t;return this.show||this.displayed?(null===(t=this.onRender)||void 0===t||t.call(this),it(R("div",{class:[`${i}-image-preview-container`,this.themeClass],style:this.cssVars,onWheel:this.handleWheel},R(st,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?R("div",{class:`${i}-image-preview-overlay`,onClick:this.toggleShow}):null}),this.showToolbar?R(st,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?R("div",{class:`${i}-image-preview-toolbar`},n?n({nodes:{prev:r,next:a,rotateCounterclockwise:o,rotateClockwise:l,resizeToOriginalSize:h,zoomOut:u,zoomIn:p,download:c,close:d}}):R(rt,null,this.onPrev?R(rt,null,r,a):null,o,l,h,u,p,c,d)):null}):null,R(st,{name:"fade-in-scale-up-transition",onAfterLeave:this.handleAfterLeave,appear:this.appear,onEnter:this.syncTransformOrigin,onBeforeLeave:this.syncTransformOrigin},{default:()=>{const{previewedImgProps:t={}}=this;return it(R("div",{class:`${i}-image-preview-wrapper`,ref:"previewWrapperRef"},R("img",Object.assign({},t,{draggable:!1,onMousedown:this.handlePreviewMousedown,onDblclick:this.handlePreviewDblclick,class:[`${i}-image-preview`,t.class],key:this.previewSrc,src:this.previewSrc,ref:"previewRef",onDragstart:this.handleDragStart}))),[[at,this.show]])}})),[[nt,{enabled:this.show}]])):null}}))}}),Xe=j("n-image-group"),Ke=N({name:"Image",props:Object.assign({alt:String,height:[String,Number],imgProps:Object,previewedImgProps:Object,lazy:Boolean,intersectionObserverOptions:Object,objectFit:{type:String,default:"fill"},previewSrc:String,fallbackSrc:String,width:[String,Number],src:String,previewDisabled:Boolean,loadDescription:String,onError:Function,onLoad:Function},Qe),inheritAttrs:!1,setup(t){const e=U(null),i=U(!1),n=U(null),s=T(Xe,null),{mergedClsPrefixRef:r}=s||D(t),a={click:()=>{if(t.previewDisabled||i.value)return;const r=t.previewSrc||t.src;if(s)return s.setPreviewSrc(r),s.setThumbnailEl(e.value),void s.toggleShow();const{value:a}=n;a&&(a.setPreviewSrc(r),a.setThumbnailEl(e.value),a.toggleShow())}},o=U(!t.lazy);ht((()=>{var t;null===(t=e.value)||void 0===t||t.setAttribute("data-group-id",(null==s?void 0:s.groupId)||"")})),ht((()=>{if(t.lazy&&t.intersectionObserverOptions){let i;const n=ut((()=>{null==i||i(),i=void 0,i=je(e.value,t.intersectionObserverOptions,o)}));X((()=>{n(),null==i||i()}))}})),ut((()=>{var e;t.src||null===(e=t.imgProps)||void 0===e||e.src,i.value=!1}));const l=U(!1);return ct(qe,{previewedImgPropsRef:J(t,"previewedImgProps")}),Object.assign({mergedClsPrefix:r,groupId:null==s?void 0:s.groupId,previewInstRef:n,imageRef:e,showError:i,shouldStartLoading:o,loaded:l,mergedOnClick:e=>{var i,n;a.click(),null===(n=null===(i=t.imgProps)||void 0===i?void 0:i.onClick)||void 0===n||n.call(i,e)},mergedOnError:e=>{if(!o.value)return;i.value=!0;const{onError:n,imgProps:{onError:s}={}}=t;null==n||n(e),null==s||s(e)},mergedOnLoad:e=>{const{onLoad:i,imgProps:{onLoad:n}={}}=t;null==i||i(e),null==n||n(e),l.value=!0}},a)},render(){var t,e;const{mergedClsPrefix:i,imgProps:n={},loaded:s,$attrs:r,lazy:a}=this,o=null===(e=(t=this.$slots).placeholder)||void 0===e?void 0:e.call(t),l=this.src||n.src,h=R("img",Object.assign(Object.assign({},n),{ref:"imageRef",width:this.width||n.width,height:this.height||n.height,src:this.showError?this.fallbackSrc:a&&this.intersectionObserverOptions?this.shouldStartLoading?l:void 0:l,alt:this.alt||n.alt,"aria-label":this.alt||n.alt,onClick:this.mergedOnClick,onError:this.mergedOnError,onLoad:this.mergedOnLoad,loading:De&&a&&!this.intersectionObserverOptions?"lazy":"eager",style:[n.style||"",o&&!s?{height:"0",width:"0",visibility:"hidden"}:"",{objectFit:this.objectFit}],"data-error":this.showError,"data-preview-src":this.previewSrc||this.src}));return R("div",Object.assign({},r,{role:"none",class:[r.class,`${i}-image`,(this.previewDisabled||this.showError)&&`${i}-image--preview-disabled`]}),this.groupId?h:R(Ze,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:i,ref:"previewInstRef",showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip,renderToolbar:this.renderToolbar},{default:()=>h,toolbar:()=>{var t,e;return null===(e=(t=this.$slots).toolbar)||void 0===e?void 0:e.call(t)}}),!s&&o)}}),Ye=F([F("@keyframes spin-rotate","\n from {\n transform: rotate(0);\n }\n to {\n transform: rotate(360deg);\n }\n "),Q("spin-container","\n position: relative;\n ",[Q("spin-body","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n ",[q()])]),Q("spin-body","\n display: inline-flex;\n align-items: center;\n justify-content: center;\n flex-direction: column;\n "),Q("spin","\n display: inline-flex;\n height: var(--n-size);\n width: var(--n-size);\n font-size: var(--n-size);\n color: var(--n-color);\n ",[dt("rotate","\n animation: spin-rotate 2s linear infinite;\n ")]),Q("spin-description","\n display: inline-block;\n font-size: var(--n-font-size);\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n margin-top: 8px;\n "),Q("spin-content","\n opacity: 1;\n transition: opacity .3s var(--n-bezier);\n pointer-events: all;\n ",[dt("spinning","\n user-select: none;\n -webkit-user-select: none;\n pointer-events: none;\n opacity: var(--n-opacity-spinning);\n ")])]),$e={small:20,medium:18,large:16},ti=N({name:"Spin",props:Object.assign(Object.assign({},V.props),{contentClass:String,contentStyle:[Object,String],description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0},delay:Number}),setup(t){const{mergedClsPrefixRef:e,inlineThemeDisabled:i}=D(t),n=V("Spin","-spin",Ye,vt,t,e),s=O((()=>{const{size:e}=t,{common:{cubicBezierEaseInOut:i},self:s}=n.value,{opacitySpinning:r,color:a,textColor:o}=s;return{"--n-bezier":i,"--n-opacity-spinning":r,"--n-size":"number"==typeof e?pt(e):s[ft("size",e)],"--n-color":a,"--n-text-color":o}})),r=i?Y("spin",O((()=>{const{size:e}=t;return"number"==typeof e?String(e):e[0]})),s,t):void 0,a=f(t,["spinning","show"]),o=U(!1);return ut((e=>{let i;if(a.value){const{delay:n}=t;if(n)return i=window.setTimeout((()=>{o.value=!0}),n),void e((()=>{clearTimeout(i)}))}o.value=a.value})),{mergedClsPrefix:e,active:o,mergedStrokeWidth:O((()=>{const{strokeWidth:e}=t;if(void 0!==e)return e;const{size:i}=t;return $e["number"==typeof i?"medium":i]})),cssVars:i?void 0:s,themeClass:null==r?void 0:r.themeClass,onRender:null==r?void 0:r.onRender}},render(){var t,e;const{$slots:i,mergedClsPrefix:n,description:s}=this,r=i.icon&&this.rotate,a=(s||i.description)&&R("div",{class:`${n}-spin-description`},s||(null===(t=i.description)||void 0===t?void 0:t.call(i))),o=i.icon?R("div",{class:[`${n}-spin-body`,this.themeClass]},R("div",{class:[`${n}-spin`,r&&`${n}-spin--rotate`],style:i.default?"":this.cssVars},i.icon()),a):R("div",{class:[`${n}-spin-body`,this.themeClass]},R(gt,{clsPrefix:n,style:i.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${n}-spin`}),a);return null===(e=this.onRender)||void 0===e||e.call(this),i.default?R("div",{class:[`${n}-spin-container`,this.themeClass],style:this.cssVars},R("div",{class:[`${n}-spin-content`,this.active&&`${n}-spin-content--spinning`,this.contentClass],style:this.contentStyle},i),R(st,{name:"fade-in-transition"},{default:()=>this.active?o:null})):o}}),ei="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHoSURBVHgB5VVLUttAEH3dUlFU2OgIzg3MDeJNgAoQzwnAJwCfAOcE8Q3AJxjHiouys1BuEOcE+AjaUMVHmmFGSCqDrN+at5qZ6un3+k13DfDhMPMXUs6X3abxhBaQ83mXlfvPLEPF1BPfvq7q7rQisPjlLyxBtykJowVeraFOuvVY6aDOrlYEJuE1oL2No1qSRhYlCZ7iMNk4GDHx2buQUrtqK7DJWSFgl+/gUF+cHp0rqB/vwkorqSSQUnpWlUk4SYKJfs5+L68RPYxVpD5DY11HwpXK3b073/9zJU4OL5VWA+NoqLU+Z/eT7SSoWPXM+aSKhN8qvu3kGx19sQ9q1I9m/jJAjL8qivdT1Z2iZYYcmFoSR6uLLE3+yHK2uGHCGdkgojB+vh8Cux47HJgoS7w2iQaIdldwH0cMSpIQ0Y2NFUKEmUghjtbFChwapyr6JTZ0GBy4bnSRWEbx8NUy9LGzl1e+mfxNBbnvpmM2e11pPRSnh2Pp3xrVfJVemsaRGiYBO45XNc2FOdhGktlglXKsZWrZ6vvJwT5qUOiipC0ZPVt+dpZbZoYts8wM1gANUDrJ2yoxCB3C5fHxwQQNUToH2yqxep6J/qMFKid5C8m6yR/QmKBIortSNv/NWsG+ydR8l/hweAEG7BK8vBsJ8gAAAABJRU5ErkJggg==",ii="data:image/png;base64,UklGRmYIAABXRUJQVlA4WAoAAAAQAAAATwAATwAAQUxQSPkBAAABkAMAkCFJNXN3b9u2bdu2bdv2f2TbNiNbkW3b6q7H7HRX1UT/SURMAPz/7iSv2W/G4nVLpw1skC1CXqQqC+5q9PluV9dkohKMe4rm33dWdKTEnPAeLZ8oL6P2A/Sv/aDekJRf9MUaSV/UZJCoZpt8bqi0F5FaTXBDhBdp1zhLmFn4th+IeHN4Qo88j5Dhhsh/ZZr5DBHxVn6j2uj9fmwMgIIvkeWuyJB25U/03mM0JgTi3eq5X6FmgVuHf8LQ78NNWvtA9QElXnVMkv/0IXQuGB+SVtGsubC74WYRN2X1B4tNRT2IbsPdL6kJWE31TM5Kxw4U/yTlVDSwXfW1jOMJwX52JeFCZCBMjxJvORR1Raj4FCNEYBGKpTIaUuyW0ZvipIyxFOdkTKa4IGMNxTEZIyl20mkrnShmk2k71Sj6kFlOS1FZxHOXIoGSsBtIz0noQzNMgM5Ak17xOwvEB/h1oqrqpfk8i0HlHvdgPBTISyped6PRwXJWuh4wjP+A0waHA5T5xudmXODZg827XMDUmcHkS0VgG/kqi0/VgXGicYrucTHgXf811ZHkwD31QZLPQ8KBv9v0rjW1KT3IjNLxupWva/KCXLfi8ucGXw/1SQTCw/N2n3vg/B18eunw8sEVYkNQJsaxEKxpcF/AxPl+PmCgeuGg+YcaAFZQOCBGBgAAEB0AnQEqUABQAD5tKJBFpCIhl61XEEAGxLQAZcvYqImhIHl73AG22/mA84P0neeB1Mfom9LR/e8Al7PP6d4R+Kr1TmIYq56iKrk4td7wrBT61a1d4p+pvwAfnj/ney3/ZeNb6k9gf+Vf1z/p9i70CP1iWjPupm8sG36ubSw8usZQ/eUhs2GgCyknr7d8uBUrIkx1yERV/GpaGFrk5VhxqIHmScH9Cga/QcgHsPyM06yrHBMUA/E8BRsnwu/W7h3ZZLV5ZCVHYtJLtFNH3cBPL5voV1G131GNnwxxN2lsrhjdwl5q1BUPqSEf3b63xfDFkAD+/bTq+20578QWFZlifnHZVEyN6BlOEIXGlOTUj8tBz1kzOELgxyvu+Yv/vTMECTXcwGTj/62zAQoto9g9VE713zlzxQvZ/4fv2OtAS/mTqbEulrvVXeHLwfs2AuJXKsOm7e7uy/k8cs1BpT6vakM9CT8M5RUkjiHuwUTCYlvk6M6eYgOb98AV7J7r91s0ouZokR7idUNjvC8MvFo5lB1PUG2otXeJdMvP7cAJ6Jqvu/+YKl/DEylAQbf9Ob67WH5iFmQja9/3G/bh+VmxQzgnZIU90iqFUwTigFOOfcNYqYp3T07iN9Zm42NUPeKFgtc7W9iDDJjmC1IVfpwSIwXVW3ScgEpr6V6duH3ik1qUP616MDPTx45HIWDFv1yK89Evx/oWm7aWeSjwj1ff3qQQzERY3IZNJxUCwsFUcXbVsxuCE5M/5sN/TauoD2bEattCCNDW5OI2Te52ZAIEqW6ZUbQcw/hU3sFdT9/GhoqQHIXfg06aw/MlipHU69nns622rsXjRH34Vqax0xr5Bt+qkpBkmmy8DuhcXU+ev/BwUBo2aJk/1f+6GquyvUh/dGyalBQ/bW4/UZVKNqmpxn0D5v3bfAylGIgff7nZd37WAfe23S/mOrffiANh7/EIa9gTThsfjGkA/Jle0bsHlp78qiZq9jJH5LT2Wtd4ZTI217Ov99+p7JxZjNn+X8eSHNyZPgwuSJQgf6nVkhlZJaz9sZ5jESTf46SBdVQpxvoV2cWATDClzmteph/5MCU+AgndiKX5vXZ5w1h36LOQDqcaHS654CqnLb6ciLTIIQKJ5oiF6mN9EpezCeZl7ymMMhpyJYKPxoPl4kJpDUpZQXeEuAXai3jJi4aHkbBpEdn4+oXw9ooGYVX6qeRUvEH2EPHH+D/4Oq8fpu1f7DvPHjN4+SXX9Ipc0HAgi1nIDozUWOupTG9IPwfguSZDW7w4BBiUj8SOXkya6/YMJSsMFEfGkpGTnAisbpUVsw73T76YHlY1WKFVQsZwq49d9q9k/rMbebkx8J+qMavXHbOLkYZG/wh+jek7k12FJD53PET0vRU5302qazW7/9lP4bzfqToM9zDzcc0Yl0P9Bd58bLJ+DHwt4ABZO54YHoZPG5iF9j+9AFZqUn0Ykh0f3nrzCnlvnUTNVgHlMXxt/5cn52zv4JzMVS/ws9gIsaDn5VLOvzuKHgmhkfNixf/CsO1phnJ0L3nONir8EEockb2wGaXzSa2z+mbEMKoHQz4/edNgDbcW27kUtjJRZE99oce5k5t/178/t5GVPBFcAvgXPvS981eNbJ7G/aVe5tH4rKqlZVByxgtOSl6cKJlLnk6sYbYDhPpKvX6YZantCtThuMyn4nW1SU2nn8O7lVUQ9ACk3YwgqRYECVVAX7Oi8xzMz5sBHs0HcwhTA1KOL45LL4tuMCwUo7uZriRHRRd6jijXoUev5XiTNoGSI6BqEJ6bWMpGFtLUVSThrfiCJq7AkE97XS0E3t3gmP07zoc/HMCEw5T9SkBY/XaqIIsifWvGIhK4c7mwuOW7uf6dzvVe72rzY9jhIPF2gFysVvbKH7OfjiCRwFJ0Exrv5vot89zCYnq/71KNNWt+QXjNS7VIdjp7NRFrKypz89ZDnb45Kn5odR3p7CPaJUapdmIMFfIUer+1cjZ+aQevM3bJDz8rEzP459rA1jv0KJIDKiiVzwwLEc05w+vvmsSUuOmjLcyu0dzWzxibQABo9PVN2CJM1WWGZDcWzMH4jWTmHt9W2nQEGUDzO2xHmKgAwiLzIQb1W2l0+BX/clQOwJ4Ekcgkj4XgAAAAAA==",ni="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAOCAYAAABDwm71AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAClSURBVHgB7dG9DcIwEIbh7xwPkBGyAWwEJQIpWEpBmwyAcOEBYJNsACNkBGqwY878SLSpfEWe6pOrV2fCH2NM+RjVHpHWBFTIZ9C/taub1TPAclCJ7CLeYdu64SvBft96juu0Djdr7R2Z0MYcqiL4K++S4tg5d2ohgCq8b/H5vrOUqETx0RZpUMQFgiguWqbh3LGHIApCzWFTzWFTiQ3TEXEgyPMCwdgsREZ4pVwAAAAASUVORK5CYII=",si="/static/svg/usedApp1-8aa900e2.svg",ri="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACcSURBVHgB7ZDRDcIwDESdwgCxukBWYBOYADZgBDpCNmEURoB/0l7hvzH2B1KRIrXlu0+Kkli6y12IVhYBvM7A+zieVXPFKWGfRWLOA9NSAIS26/FsEadeOVnMgvieuv5W0vxUcI68xVSTy3c2iLvavnFyKBlsx5e65qgxvR4bNbFRUMNQOdkx84PmoiaNxhbrbZ9H/6DdvS1ameQDd6hVrVMRPUwAAAAASUVORK5CYII=",ai="/static/png/eye-b5d14d3a.png";var oi=(t=>(t[t.NONE=0]="NONE",t[t.TEXT_TO_IMAGE=1]="TEXT_TO_IMAGE",t[t.IMAGE_TO_TEXT=2]="IMAGE_TO_TEXT",t[t.IMAGE_MIX_IMAGE=3]="IMAGE_MIX_IMAGE",t[t.U_SCALE=4]="U_SCALE",t[t.V_EXPAND=5]="V_EXPAND",t[t.REGENERATE=6]="REGENERATE",t[t.VARY_STRONG=7]="VARY_STRONG",t[t.VARY_SUBTLE=8]="VARY_SUBTLE",t[t.VARY_REGION=9]="VARY_REGION",t[t.SQUARE=10]="SQUARE",t[t.ZOOM2X=11]="ZOOM2X",t[t.ZOOM1_5X=12]="ZOOM1_5X",t[t.UPSCALE_2X=13]="UPSCALE_2X",t[t.UPSCALE_4X=14]="UPSCALE_4X",t[t.RE_UPSCALE_2X=15]="RE_UPSCALE_2X",t[t.RE_UPSCALE_4X=16]="RE_UPSCALE_4X",t[t.STRETCH=17]="STRETCH",t[t.ZOOM_CUSTOM=18]="ZOOM_CUSTOM",t[t.REDO_UPSCALE_SUBTLE=19]="REDO_UPSCALE_SUBTLE",t[t.REDO_UPSCALE_CREATIVE=20]="REDO_UPSCALE_CREATIVE",t[t.IMAGE_TO_TEXT_ACTION=21]="IMAGE_TO_TEXT_ACTION",t[t.MODAL_ACTION=22]="MODAL_ACTION",t))(oi||{}),li=(t=>(t[t.NONE=0]="NONE",t[t.TEXT_TO_IMAGE=1]="TEXT_TO_IMAGE",t[t.IMAGE_TO_TEXT=2]="IMAGE_TO_TEXT",t[t.IMAGE_MIX_IMAGE=3]="IMAGE_MIX_IMAGE",t[t.IMAGE_ACTION=4]="IMAGE_ACTION",t[t.INSIGHT_FACE=5]="INSIGHT_FACE",t))(li||{});var hi,ui,ci={exports:{}},di={exports:{}};function pi(){return hi||(hi=1,function(t){var e=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],i=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],n="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",s="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},a="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",o={5:a,"5module":a+" export import",6:a+" const class extends export import super"},l=/^in(stanceof)?$/,h=new RegExp("["+s+"]"),u=new RegExp("["+s+n+"]");function c(t,e){for(var i=65536,n=0;n<e.length;n+=2){if((i+=e[n])>t)return!1;if((i+=e[n+1])>=t)return!0}return!1}function d(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&h.test(String.fromCharCode(t)):!1!==e&&c(t,i)))}function p(t,n){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==n&&(c(t,i)||c(t,e)))))}var f=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function g(t,e){return new f(t,{beforeExpr:!0,binop:e})}var v={beforeExpr:!0},m={startsExpr:!0},_={};function y(t,e){return void 0===e&&(e={}),e.keyword=t,_[t]=new f(t,e)}var x={num:new f("num",m),regexp:new f("regexp",m),string:new f("string",m),name:new f("name",m),privateId:new f("privateId",m),eof:new f("eof"),bracketL:new f("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new f("]"),braceL:new f("{",{beforeExpr:!0,startsExpr:!0}),braceR:new f("}"),parenL:new f("(",{beforeExpr:!0,startsExpr:!0}),parenR:new f(")"),comma:new f(",",v),semi:new f(";",v),colon:new f(":",v),dot:new f("."),question:new f("?",v),questionDot:new f("?."),arrow:new f("=>",v),template:new f("template"),invalidTemplate:new f("invalidTemplate"),ellipsis:new f("...",v),backQuote:new f("`",m),dollarBraceL:new f("${",{beforeExpr:!0,startsExpr:!0}),eq:new f("=",{beforeExpr:!0,isAssign:!0}),assign:new f("_=",{beforeExpr:!0,isAssign:!0}),incDec:new f("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new f("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new f("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new f("**",{beforeExpr:!0}),coalesce:g("??",1),_break:y("break"),_case:y("case",v),_catch:y("catch"),_continue:y("continue"),_debugger:y("debugger"),_default:y("default",v),_do:y("do",{isLoop:!0,beforeExpr:!0}),_else:y("else",v),_finally:y("finally"),_for:y("for",{isLoop:!0}),_function:y("function",m),_if:y("if"),_return:y("return",v),_switch:y("switch"),_throw:y("throw",v),_try:y("try"),_var:y("var"),_const:y("const"),_while:y("while",{isLoop:!0}),_with:y("with"),_new:y("new",{beforeExpr:!0,startsExpr:!0}),_this:y("this",m),_super:y("super",m),_class:y("class",m),_extends:y("extends",v),_export:y("export"),_import:y("import",m),_null:y("null",m),_true:y("true",m),_false:y("false",m),_in:y("in",{beforeExpr:!0,binop:7}),_instanceof:y("instanceof",{beforeExpr:!0,binop:7}),_typeof:y("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:y("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:y("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\r\n?|\n|\u2028|\u2029/,A=new RegExp(w.source,"g");function b(t){return 10===t||13===t||8232===t||8233===t}function C(t,e,i){void 0===i&&(i=t.length);for(var n=e;n<i;n++){var s=t.charCodeAt(n);if(b(s))return n<i-1&&13===s&&10===t.charCodeAt(n+1)?n+2:n+1}return-1}var k=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,S=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,I=Object.prototype,E=I.hasOwnProperty,T=I.toString,P=Object.hasOwn||function(t,e){return E.call(t,e)},O=Array.isArray||function(t){return"[object Array]"===T.call(t)},M=Object.create(null);function B(t){return M[t]||(M[t]=new RegExp("^(?:"+t.replace(/ /g,"|")+")$"))}function R(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}var N=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,L=function(t,e){this.line=t,this.column=e};L.prototype.offset=function(t){return new L(this.line,this.column+t)};var D=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function V(t,e){for(var i=1,n=0;;){var s=C(t,n,e);if(s<0)return new L(i,e-n);++i,n=s}}var z={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},U=!1;function j(t){var e={};for(var i in z)e[i]=t&&P(t,i)?t[i]:z[i];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!U&&"object"==typeof console&&console.warn&&(U=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),t&&null!=t.allowHashBang||(e.allowHashBang=e.ecmaVersion>=14),O(e.onToken)){var n=e.onToken;e.onToken=function(t){return n.push(t)}}return O(e.onComment)&&(e.onComment=F(e,e.onComment)),e}function F(t,e){return function(i,n,s,r,a,o){var l={type:i?"Block":"Line",value:n,start:s,end:r};t.locations&&(l.loc=new D(this,a,o)),t.ranges&&(l.range=[s,r]),e.push(l)}}var Q=1,q=2,H=4,G=8,J=16,W=32,Z=64,X=128,K=256,Y=Q|q|K;function $(t,e){return q|(t?H:0)|(e?G:0)}var tt=0,et=1,it=2,nt=3,st=4,rt=5,at=function(t,e,i){this.options=t=j(t),this.sourceFile=t.sourceFile,this.keywords=B(o[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var n="";!0!==t.allowReserved&&(n=r[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(n+=" await")),this.reservedWords=B(n);var s=(n?n+" ":"")+r.strict;this.reservedWordsStrict=B(s),this.reservedWordsStrictBind=B(s+" "+r.strictBind),this.input=String(e),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=x.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Q),this.regexpState=null,this.privateNameStack=[]},ot={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};at.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},ot.inFunction.get=function(){return(this.currentVarScope().flags&q)>0},ot.inGenerator.get=function(){return(this.currentVarScope().flags&G)>0&&!this.currentVarScope().inClassFieldInit},ot.inAsync.get=function(){return(this.currentVarScope().flags&H)>0&&!this.currentVarScope().inClassFieldInit},ot.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&K)return!1;if(e.flags&q)return(e.flags&H)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},ot.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&Z)>0||i||this.options.allowSuperOutsideMethod},ot.allowDirectSuper.get=function(){return(this.currentThisScope().flags&X)>0},ot.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},ot.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&(q|K))>0||i},ot.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&K)>0},at.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=this,n=0;n<t.length;n++)i=t[n](i);return i},at.parse=function(t,e){return new this(e,t).parse()},at.parseExpressionAt=function(t,e,i){var n=new this(i,t,e);return n.nextToken(),n.parseExpression()},at.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(at.prototype,ot);var lt=at.prototype,ht=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;lt.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){S.lastIndex=t,t+=S.exec(this.input)[0].length;var e=ht.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){S.lastIndex=t+e[0].length;var i=S.exec(this.input),n=i.index+i[0].length,s=this.input.charAt(n);return";"===s||"}"===s||w.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||"!"===s&&"="===this.input.charAt(n+1))}t+=e[0].length,S.lastIndex=t,t+=S.exec(this.input)[0].length,";"===this.input[t]&&t++}},lt.eat=function(t){return this.type===t&&(this.next(),!0)},lt.isContextual=function(t){return this.type===x.name&&this.value===t&&!this.containsEsc},lt.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},lt.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},lt.canInsertSemicolon=function(){return this.type===x.eof||this.type===x.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},lt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},lt.semicolon=function(){this.eat(x.semi)||this.insertSemicolon()||this.unexpected()},lt.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},lt.expect=function(t){this.eat(t)||this.unexpected()},lt.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var ut=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};lt.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,e?"Assigning to rvalue":"Parenthesized pattern")}},lt.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,n=t.doubleProto;if(!e)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},lt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},lt.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var ct=at.prototype;ct.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==x.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var n=0,s=Object.keys(this.undefinedExports);n<s.length;n+=1){var r=s[n];this.raiseRecoverable(this.undefinedExports[r].start,"Export '"+r+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var dt={kind:"loop"},pt={kind:"switch"};ct.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;S.lastIndex=this.pos;var e=S.exec(this.input),i=this.pos+e[0].length,n=this.input.charCodeAt(i);if(91===n||92===n)return!0;if(t)return!1;if(123===n||n>55295&&n<56320)return!0;if(d(n,!0)){for(var s=i+1;p(n=this.input.charCodeAt(s),!0);)++s;if(92===n||n>55295&&n<56320)return!0;var r=this.input.slice(i,s);if(!l.test(r))return!0}return!1},ct.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;S.lastIndex=this.pos;var t,e=S.exec(this.input),i=this.pos+e[0].length;return!(w.test(this.input.slice(this.pos,i))||"function"!==this.input.slice(i,i+8)||i+8!==this.input.length&&(p(t=this.input.charCodeAt(i+8))||t>55295&&t<56320))},ct.parseStatement=function(t,e,i){var n,s=this.type,r=this.startNode();switch(this.isLet(t)&&(s=x._var,n="let"),s){case x._break:case x._continue:return this.parseBreakContinueStatement(r,s.keyword);case x._debugger:return this.parseDebuggerStatement(r);case x._do:return this.parseDoStatement(r);case x._for:return this.parseForStatement(r);case x._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!t);case x._class:return t&&this.unexpected(),this.parseClass(r,!0);case x._if:return this.parseIfStatement(r);case x._return:return this.parseReturnStatement(r);case x._switch:return this.parseSwitchStatement(r);case x._throw:return this.parseThrowStatement(r);case x._try:return this.parseTryStatement(r);case x._const:case x._var:return n=n||this.value,t&&"var"!==n&&this.unexpected(),this.parseVarStatement(r,n);case x._while:return this.parseWhileStatement(r);case x._with:return this.parseWithStatement(r);case x.braceL:return this.parseBlock(!0,r);case x.semi:return this.parseEmptyStatement(r);case x._export:case x._import:if(this.options.ecmaVersion>10&&s===x._import){S.lastIndex=this.pos;var a=S.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(40===l||46===l)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),s===x._import?this.parseImport(r):this.parseExport(r,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!t);var h=this.value,u=this.parseExpression();return s===x.name&&"Identifier"===u.type&&this.eat(x.colon)?this.parseLabeledStatement(r,h,u,t):this.parseExpressionStatement(r,u)}},ct.parseBreakContinueStatement=function(t,e){var i="break"===e;this.next(),this.eat(x.semi)||this.insertSemicolon()?t.label=null:this.type!==x.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var s=this.labels[n];if(null==t.label||s.name===t.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(t.label&&i)break}}return n===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},ct.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},ct.parseDoStatement=function(t){return this.next(),this.labels.push(dt),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(x._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(x.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},ct.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(dt),this.enterScope(0),this.expect(x.parenL),this.type===x.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===x._var||this.type===x._const||i){var n=this.startNode(),s=i?"let":this.value;return this.next(),this.parseVar(n,!0,s),this.finishNode(n,"VariableDeclaration"),(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===n.declarations.length?(this.options.ecmaVersion>=9&&(this.type===x._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,n)):(e>-1&&this.unexpected(e),this.parseFor(t,n))}var r=this.isContextual("let"),a=!1,o=new ut,l=this.parseExpression(!(e>-1)||"await",o);return this.type===x._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===x._in?e>-1&&this.unexpected(e):t.await=e>-1),r&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,o),this.checkLValPattern(l),this.parseForIn(t,l)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,l))},ct.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,gt|(i?0:vt),!1,e)},ct.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(x._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},ct.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(x.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},ct.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(x.braceL),this.labels.push(pt),this.enterScope(0);for(var i=!1;this.type!==x.braceR;)if(this.type===x._case||this.type===x._default){var n=this.type===x._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),n?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(x.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},ct.parseThrowStatement=function(t){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ft=[];ct.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e="Identifier"===t.type;return this.enterScope(e?W:0),this.checkLValPattern(t,e?st:it),this.expect(x.parenR),t},ct.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===x._catch){var e=this.startNode();this.next(),this.eat(x.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(x._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},ct.parseVarStatement=function(t,e,i){return this.next(),this.parseVar(t,!1,e,i),this.semicolon(),this.finishNode(t,"VariableDeclaration")},ct.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(dt),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},ct.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},ct.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},ct.parseLabeledStatement=function(t,e,i,n){for(var s=0,r=this.labels;s<r.length;s+=1)r[s].name===e&&this.raise(i.start,"Label '"+e+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===x._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},ct.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},ct.parseBlock=function(t,e,i){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(x.braceL),t&&this.enterScope(0);this.type!==x.braceR;){var n=this.parseStatement(null);e.body.push(n)}return i&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},ct.parseFor=function(t,e){return t.init=e,this.expect(x.semi),t.test=this.type===x.semi?null:this.parseExpression(),this.expect(x.semi),t.update=this.type===x.parenR?null:this.parseExpression(),this.expect(x.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},ct.parseForIn=function(t,e){var i=this.type===x._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!i||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(x.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")},ct.parseVar=function(t,e,i,n){for(t.declarations=[],t.kind=i;;){var s=this.startNode();if(this.parseVarId(s,i),this.eat(x.eq)?s.init=this.parseMaybeAssign(e):n||"const"!==i||this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of")?n||"Identifier"===s.id.type||e&&(this.type===x._in||this.isContextual("of"))?s.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(s,"VariableDeclarator")),!this.eat(x.comma))break}return t},ct.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?et:it,!1)};var gt=1,vt=2,mt=4;function _t(t,e){var i=e.key.name,n=t[i],s="true";return"MethodDefinition"!==e.type||"get"!==e.kind&&"set"!==e.kind||(s=(e.static?"s":"i")+e.kind),"iget"===n&&"iset"===s||"iset"===n&&"iget"===s||"sget"===n&&"sset"===s||"sset"===n&&"sget"===s?(t[i]="true",!1):!!n||(t[i]=s,!1)}function yt(t,e){var i=t.computed,n=t.key;return!i&&("Identifier"===n.type&&n.name===e||"Literal"===n.type&&n.value===e)}ct.parseFunction=function(t,e,i,n,s){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===x.star&&e&vt&&this.unexpected(),t.generator=this.eat(x.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&gt&&(t.id=e&mt&&this.type!==x.name?null:this.parseIdent(),!t.id||e&vt||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?et:it:nt));var r=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope($(t.async,t.generator)),e&gt||(t.id=this.type===x.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1,s),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&gt?"FunctionDeclaration":"FunctionExpression")},ct.parseFunctionParams=function(t){this.expect(x.parenL),t.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},ct.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var n=this.enterClassBody(),s=this.startNode(),r=!1;for(s.body=[],this.expect(x.braceL);this.type!==x.braceR;){var a=this.parseClassElement(null!==t.superClass);a&&(s.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(r&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),r=!0):a.key&&"PrivateIdentifier"===a.key.type&&_t(n,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),t.body=this.finishNode(s,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},ct.parseClassElement=function(t){if(this.eat(x.semi))return null;var e=this.options.ecmaVersion,i=this.startNode(),n="",s=!1,r=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(x.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===x.star?o=!0:n="static"}if(i.static=o,!n&&e>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==x.star||this.canInsertSemicolon()?n="async":r=!0),!n&&(e>=9||!r)&&this.eat(x.star)&&(s=!0),!n&&!r&&!s){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:n=l)}if(n?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=n,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),e<13||this.type===x.parenL||"method"!==a||s||r){var h=!i.static&&yt(i,"constructor"),u=h&&t;h&&"method"!==a&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=h?"constructor":a,this.parseClassMethod(i,s,r,u)}else this.parseClassField(i);return i},ct.isClassElementNameStart=function(){return this.type===x.name||this.type===x.privateId||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword},ct.parseClassElementName=function(t){this.type===x.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},ct.parseClassMethod=function(t,e,i,n){var s=t.key;"constructor"===t.kind?(e&&this.raise(s.start,"Constructor can't be a generator"),i&&this.raise(s.start,"Constructor can't be an async method")):t.static&&yt(t,"prototype")&&this.raise(s.start,"Classes may not have a static property named prototype");var r=t.value=this.parseMethod(e,i,n);return"get"===t.kind&&0!==r.params.length&&this.raiseRecoverable(r.start,"getter should have no params"),"set"===t.kind&&1!==r.params.length&&this.raiseRecoverable(r.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===r.params[0].type&&this.raiseRecoverable(r.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},ct.parseClassField=function(t){if(yt(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&yt(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(x.eq)){var e=this.currentThisScope(),i=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=i}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},ct.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(K|Z);this.type!==x.braceR;){var i=this.parseStatement(null);t.body.push(i)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")},ct.parseClassId=function(t,e){this.type===x.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,it,!1)):(!0===e&&this.unexpected(),t.id=null)},ct.parseClassSuper=function(t){t.superClass=this.eat(x._extends)?this.parseExprSubscripts(null,!1):null},ct.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},ct.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,i=t.used;if(this.options.checkPrivateFields)for(var n=this.privateNameStack.length,s=0===n?null:this.privateNameStack[n-1],r=0;r<i.length;++r){var a=i[r];P(e,a.name)||(s?s.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},ct.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==x.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")},ct.parseExport=function(t,e){if(this.next(),this.eat(x.star))return this.parseExportAllDeclaration(t,e);if(this.eat(x._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==x.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var i=0,n=t.specifiers;i<n.length;i+=1){var s=n[i];this.checkUnreserved(s.local),this.checkLocalExport(s.local),"Literal"===s.local.type&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},ct.parseExportDeclaration=function(t){return this.parseStatement(null)},ct.parseExportDefaultDeclaration=function(){var t;if(this.type===x._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,gt|mt,!1,t)}if(this.type===x._class){var i=this.startNode();return this.parseClass(i,"nullableID")}var n=this.parseMaybeAssign();return this.semicolon(),n},ct.checkExport=function(t,e,i){t&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),P(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},ct.checkPatternExport=function(t,e){var i=e.type;if("Identifier"===i)this.checkExport(t,e,e.start);else if("ObjectPattern"===i)for(var n=0,s=e.properties;n<s.length;n+=1){var r=s[n];this.checkPatternExport(t,r)}else if("ArrayPattern"===i)for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(t,l)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i&&this.checkPatternExport(t,e.argument)},ct.checkVariableExport=function(t,e){if(t)for(var i=0,n=e;i<n.length;i+=1){var s=n[i];this.checkPatternExport(t,s.id)}},ct.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},ct.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")},ct.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(x.braceL);!this.eat(x.braceR);){if(i)i=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;e.push(this.parseExportSpecifier(t))}return e},ct.parseImport=function(t){return this.next(),this.type===x.string?(t.specifiers=ft,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===x.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},ct.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,it),this.finishNode(t,"ImportSpecifier")},ct.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,it),this.finishNode(t,"ImportDefaultSpecifier")},ct.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,it),this.finishNode(t,"ImportNamespaceSpecifier")},ct.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===x.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(x.comma)))return t;if(this.type===x.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(x.braceL);!this.eat(x.braceR);){if(e)e=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;t.push(this.parseImportSpecifier())}return t},ct.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===x.string){var t=this.parseLiteral(this.value);return N.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)},ct.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},ct.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var xt=at.prototype;xt.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,s=t.properties;n<s.length;n+=1){var r=s[n];this.toAssignable(r,e),"RestElement"!==r.type||"ArrayPattern"!==r.argument.type&&"ObjectPattern"!==r.argument.type||this.raise(r.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},xt.toAssignableList=function(t,e){for(var i=t.length,n=0;n<i;n++){var s=t[n];s&&this.toAssignable(s,e)}if(i){var r=t[i-1];6===this.options.ecmaVersion&&e&&r&&"RestElement"===r.type&&"Identifier"!==r.argument.type&&this.unexpected(r.argument.start)}return t},xt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},xt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==x.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},xt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case x.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(x.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case x.braceL:return this.parseObj(!0)}return this.parseIdent()},xt.parseBindingList=function(t,e,i,n){for(var s=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(x.comma),e&&this.type===x.comma)s.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===x.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),s.push(a),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}s.push(this.parseAssignableListItem(n))}return s},xt.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e},xt.parseBindingListItem=function(t){return t},xt.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(x.eq))return i;var n=this.startNodeAt(t,e);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},xt.checkLValSimple=function(t,e,i){void 0===e&&(e=tt);var n=e!==tt;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(n?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(e===it&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),i&&(P(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),e!==rt&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":n&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return n&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,i);default:this.raise(t.start,(n?"Binding":"Assigning to")+" rvalue")}},xt.checkLValPattern=function(t,e,i){switch(void 0===e&&(e=tt),t.type){case"ObjectPattern":for(var n=0,s=t.properties;n<s.length;n+=1){var r=s[n];this.checkLValInnerPattern(r,e,i)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,e,i)}break;default:this.checkLValSimple(t,e,i)}},xt.checkLValInnerPattern=function(t,e,i){switch(void 0===e&&(e=tt),t.type){case"Property":this.checkLValInnerPattern(t.value,e,i);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,i);break;case"RestElement":this.checkLValPattern(t.argument,e,i);break;default:this.checkLValPattern(t,e,i)}};var wt=function(t,e,i,n,s){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=n,this.generator=!!s},At={b_stat:new wt("{",!1),b_expr:new wt("{",!0),b_tmpl:new wt("${",!1),p_stat:new wt("(",!1),p_expr:new wt("(",!0),q_tmpl:new wt("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new wt("function",!1),f_expr:new wt("function",!0),f_expr_gen:new wt("function",!0,!1,null,!0),f_gen:new wt("function",!1,!1,null,!0)},bt=at.prototype;bt.initialContext=function(){return[At.b_stat]},bt.curContext=function(){return this.context[this.context.length-1]},bt.braceIsBlock=function(t){var e=this.curContext();return e===At.f_expr||e===At.f_stat||(t!==x.colon||e!==At.b_stat&&e!==At.b_expr?t===x._return||t===x.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):t===x._else||t===x.semi||t===x.eof||t===x.parenR||t===x.arrow||(t===x.braceL?e===At.b_stat:t!==x._var&&t!==x._const&&t!==x.name&&!this.exprAllowed):!e.isExpr)},bt.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},bt.updateContext=function(t){var e,i=this.type;i.keyword&&t===x.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},bt.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},x.parenR.updateContext=x.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===At.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},x.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?At.b_stat:At.b_expr),this.exprAllowed=!0},x.dollarBraceL.updateContext=function(){this.context.push(At.b_tmpl),this.exprAllowed=!0},x.parenL.updateContext=function(t){var e=t===x._if||t===x._for||t===x._with||t===x._while;this.context.push(e?At.p_stat:At.p_expr),this.exprAllowed=!0},x.incDec.updateContext=function(){},x._function.updateContext=x._class.updateContext=function(t){!t.beforeExpr||t===x._else||t===x.semi&&this.curContext()!==At.p_stat||t===x._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(t===x.colon||t===x.braceL)&&this.curContext()===At.b_stat?this.context.push(At.f_stat):this.context.push(At.f_expr),this.exprAllowed=!1},x.colon.updateContext=function(){"function"===this.curContext().token&&this.context.pop(),this.exprAllowed=!0},x.backQuote.updateContext=function(){this.curContext()===At.q_tmpl?this.context.pop():this.context.push(At.q_tmpl),this.exprAllowed=!1},x.star.updateContext=function(t){if(t===x._function){var e=this.context.length-1;this.context[e]===At.f_expr?this.context[e]=At.f_expr_gen:this.context[e]=At.f_gen}this.exprAllowed=!0},x.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==x.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Ct=at.prototype;function kt(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&kt(t.expression)}Ct.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n,s=t.key;switch(s.type){case"Identifier":n=s.name;break;case"Literal":n=String(s.value);break;default:return}var r=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===r&&(e.proto&&(i?i.doubleProto<0&&(i.doubleProto=s.start):this.raiseRecoverable(s.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[n="$"+n];a?("init"===r?this.strict&&a.init||a.get||a.set:a.init||a[r])&&this.raiseRecoverable(s.start,"Redefinition of property"):a=e[n]={init:!1,get:!1,set:!1},a[r]=!0}}},Ct.parseExpression=function(t,e){var i=this.start,n=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===x.comma){var r=this.startNodeAt(i,n);for(r.expressions=[s];this.eat(x.comma);)r.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(r,"SequenceExpression")}return s},Ct.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var n=!1,s=-1,r=-1,a=-1;e?(s=e.parenthesizedAssign,r=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new ut,n=!0);var o=this.start,l=this.startLoc;this.type!==x.parenL&&this.type!==x.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var h=this.parseMaybeConditional(t,e);if(i&&(h=i.call(this,h,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,this.type===x.eq&&(h=this.toAssignable(h,!1,e)),n||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=h.start&&(e.shorthandAssign=-1),this.type===x.eq?this.checkLValPattern(h):this.checkLValSimple(h),u.left=h,this.next(),u.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(u,"AssignmentExpression")}return n&&this.checkExpressionErrors(e,!0),s>-1&&(e.parenthesizedAssign=s),r>-1&&(e.trailingComma=r),h},Ct.parseMaybeConditional=function(t,e){var i=this.start,n=this.startLoc,s=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return s;if(this.eat(x.question)){var r=this.startNodeAt(i,n);return r.test=s,r.consequent=this.parseMaybeAssign(),this.expect(x.colon),r.alternate=this.parseMaybeAssign(t),this.finishNode(r,"ConditionalExpression")}return s},Ct.parseExprOps=function(t,e){var i=this.start,n=this.startLoc,s=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||s.start===i&&"ArrowFunctionExpression"===s.type?s:this.parseExprOp(s,i,n,-1,t)},Ct.parseExprOp=function(t,e,i,n,s){var r=this.type.binop;if(null!=r&&(!s||this.type!==x._in)&&r>n){var a=this.type===x.logicalOR||this.type===x.logicalAND,o=this.type===x.coalesce;o&&(r=x.logicalAND.binop);var l=this.value;this.next();var h=this.start,u=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,s),h,u,r,s),d=this.buildBinary(e,i,t,c,l,a||o);return(a&&this.type===x.coalesce||o&&(this.type===x.logicalOR||this.type===x.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,e,i,n,s)}return t},Ct.buildBinary=function(t,e,i,n,s,r){"PrivateIdentifier"===n.type&&this.raise(n.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=i,a.operator=s,a.right=n,this.finishNode(a,r?"LogicalExpression":"BinaryExpression")},Ct.parseMaybeUnary=function(t,e,i,n){var s,r=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)s=this.parseAwait(n),e=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===x.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,n),this.checkExpressionErrors(t,!0),l?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&kt(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,s=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==x.privateId){if(s=this.parseExprSubscripts(t,n),this.checkExpressionErrors(t))return s;for(;this.type.postfix&&!this.canInsertSemicolon();){var h=this.startNodeAt(r,a);h.operator=this.value,h.prefix=!1,h.argument=s,this.checkLValSimple(s),this.next(),s=this.finishNode(h,"UpdateExpression")}}else(n||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),s=this.parsePrivateIdent(),this.type!==x._in&&this.unexpected();return i||!this.eat(x.starstar)?s:e?void this.unexpected(this.lastTokStart):this.buildBinary(r,a,s,this.parseMaybeUnary(null,!1,!1,n),"**",!1)},Ct.parseExprSubscripts=function(t,e){var i=this.start,n=this.startLoc,s=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===s.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return s;var r=this.parseSubscripts(s,i,n,!1,e);return t&&"MemberExpression"===r.type&&(t.parenthesizedAssign>=r.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=r.start&&(t.parenthesizedBind=-1),t.trailingComma>=r.start&&(t.trailingComma=-1)),r},Ct.parseSubscripts=function(t,e,i,n,s){for(var r=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,i,n,r,a,s);if(o.optional&&(a=!0),o===t||"ArrowFunctionExpression"===o.type){if(a){var l=this.startNodeAt(e,i);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}t=o}},Ct.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(x.arrow)},Ct.parseSubscriptAsyncArrow=function(t,e,i,n){return this.parseArrowExpression(this.startNodeAt(t,e),i,!0,n)},Ct.parseSubscript=function(t,e,i,n,s,r,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(x.questionDot);n&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var h=this.eat(x.bracketL);if(h||l&&this.type!==x.parenL&&this.type!==x.backQuote||this.eat(x.dot)){var u=this.startNodeAt(e,i);u.object=t,h?(u.property=this.parseExpression(),this.expect(x.bracketR)):this.type===x.privateId&&"Super"!==t.type?u.property=this.parsePrivateIdent():u.property=this.parseIdent("never"!==this.options.allowReserved),u.computed=!!h,o&&(u.optional=l),t=this.finishNode(u,"MemberExpression")}else if(!n&&this.eat(x.parenL)){var c=new ut,d=this.yieldPos,p=this.awaitPos,f=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1,c);if(s&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=f,this.parseSubscriptAsyncArrow(e,i,g,a);this.checkExpressionErrors(c,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;var v=this.startNodeAt(e,i);v.callee=t,v.arguments=g,o&&(v.optional=l),t=this.finishNode(v,"CallExpression")}else if(this.type===x.backQuote){(l||r)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(e,i);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,"TaggedTemplateExpression")}return t},Ct.parseExprAtom=function(t,e,i){this.type===x.slash&&this.readRegexp();var n,s=this.potentialArrowAt===this.start;switch(this.type){case x._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type!==x.parenL||this.allowDirectSuper||this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==x.dot&&this.type!==x.bracketL&&this.type!==x.parenL&&this.unexpected(),this.finishNode(n,"Super");case x._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case x.name:var r=this.start,a=this.startLoc,o=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===l.name&&!this.canInsertSemicolon()&&this.eat(x._function))return this.overrideContext(At.f_expr),this.parseFunction(this.startNodeAt(r,a),0,!1,!0,e);if(s&&!this.canInsertSemicolon()){if(this.eat(x.arrow))return this.parseArrowExpression(this.startNodeAt(r,a),[l],!1,e);if(this.options.ecmaVersion>=8&&"async"===l.name&&this.type===x.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return l=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(x.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,a),[l],!0,e)}return l;case x.regexp:var h=this.value;return(n=this.parseLiteral(h.value)).regex={pattern:h.pattern,flags:h.flags},n;case x.num:case x.string:return this.parseLiteral(this.value);case x._null:case x._true:case x._false:return(n=this.startNode()).value=this.type===x._null?null:this.type===x._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case x.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(s,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),c;case x.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(x.bracketR,!0,!0,t),this.finishNode(n,"ArrayExpression");case x.braceL:return this.overrideContext(At.b_expr),this.parseObj(!1,t);case x._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case x._class:return this.parseClass(this.startNode(),!1);case x._new:return this.parseNew();case x.backQuote:return this.parseTemplate();case x._import:return this.options.ecmaVersion>=11?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}},Ct.parseExprAtomDefault=function(){this.unexpected()},Ct.parseExprImport=function(t){var e=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===x.parenL&&!t)return this.parseDynamicImport(e);if(this.type===x.dot){var i=this.startNodeAt(e.start,e.loc&&e.loc.start);return i.name="import",e.meta=this.finishNode(i,"Identifier"),this.parseImportMeta(e)}this.unexpected()},Ct.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(x.parenR)){var e=this.start;this.eat(x.comma)&&this.eat(x.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},Ct.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},Ct.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},Ct.parseParenExpression=function(){this.expect(x.parenL);var t=this.parseExpression();return this.expect(x.parenR),t},Ct.shouldParseArrow=function(t){return!this.canInsertSemicolon()},Ct.parseParenAndDistinguishExpression=function(t,e){var i,n=this.start,s=this.startLoc,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,l=this.startLoc,h=[],u=!0,c=!1,d=new ut,p=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==x.parenR;){if(u?u=!1:this.expect(x.comma),r&&this.afterTrailingComma(x.parenR,!0)){c=!0;break}if(this.type===x.ellipsis){a=this.start,h.push(this.parseParenItem(this.parseRestBinding())),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}h.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var g=this.lastTokEnd,v=this.lastTokEndLoc;if(this.expect(x.parenR),t&&this.shouldParseArrow(h)&&this.eat(x.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(n,s,h,e);h.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(d,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,h.length>1?((i=this.startNodeAt(o,l)).expressions=h,this.finishNodeAt(i,"SequenceExpression",g,v)):i=h[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,s);return m.expression=i,this.finishNode(m,"ParenthesizedExpression")}return i},Ct.parseParenItem=function(t){return t},Ct.parseParenArrowList=function(t,e,i,n){return this.parseArrowExpression(this.startNodeAt(t,e),i,!1,n)};var St=[];Ct.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===x.dot){var e=this.startNodeAt(t.start,t.loc&&t.loc.start);e.name="new",t.meta=this.finishNode(e,"Identifier"),this.next();var i=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var n=this.start,s=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,s,!0,!1),this.eat(x.parenL)?t.arguments=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1):t.arguments=St,this.finishNode(t,"NewExpression")},Ct.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===x.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===x.backQuote,this.finishNode(i,"TemplateElement")},Ct.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var n=this.parseTemplateElement({isTagged:e});for(i.quasis=[n];!n.tail;)this.type===x.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(x.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(x.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},Ct.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===x.name||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===x.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},Ct.parseObj=function(t,e){var i=this.startNode(),n=!0,s={};for(i.properties=[],this.next();!this.eat(x.braceR);){if(n)n=!1;else if(this.expect(x.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(x.braceR))break;var r=this.parseProperty(t,e);t||this.checkPropClash(r,s,e),i.properties.push(r)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},Ct.parseProperty=function(t,e){var i,n,s,r,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(x.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===x.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,e),this.type===x.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(s=this.start,r=this.startLoc),t||(i=this.eat(x.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(a)?(n=!0,i=this.options.ecmaVersion>=9&&this.eat(x.star),this.parsePropertyName(a)):n=!1,this.parsePropertyValue(a,t,i,n,s,r,e,o),this.finishNode(a,"Property")},Ct.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var e="get"===t.kind?0:1;if(t.value.params.length!==e){var i=t.value.start;"get"===t.kind?this.raiseRecoverable(i,"getter should have no params"):this.raiseRecoverable(i,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")},Ct.parsePropertyValue=function(t,e,i,n,s,r,a,o){(i||n)&&this.type===x.colon&&this.unexpected(),this.eat(x.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===x.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,n)):e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===x.comma||this.type===x.braceR||this.type===x.eq?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||n)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=s),t.kind="init",e?t.value=this.parseMaybeDefault(s,r,this.copyNode(t.key)):this.type===x.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(s,r,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected():((i||n)&&this.unexpected(),this.parseGetterSetter(t))},Ct.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(x.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(x.bracketR),t.key;t.computed=!1}return t.key=this.type===x.num||this.type===x.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},Ct.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},Ct.parseMethod=function(t,e,i){var n=this.startNode(),s=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope($(e,n.generator)|Z|(i?X:0)),this.expect(x.parenL),n.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0,!1),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")},Ct.parseArrowExpression=function(t,e,i,n){var s=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.enterScope($(i,!1)|J),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,n),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},Ct.parseFunctionBody=function(t,e,i,n){var s=e&&this.type!==x.braceL,r=this.strict,a=!1;if(s)t.body=this.parseMaybeAssign(n),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!r&&!a&&!e&&!i&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,rt),t.body=this.parseBlock(!1,void 0,a&&!r),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=l}this.exitScope()},Ct.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1)if("Identifier"!==i[e].type)return!1;return!0},Ct.checkParams=function(t,e){for(var i=Object.create(null),n=0,s=t.params;n<s.length;n+=1){var r=s[n];this.checkLValInnerPattern(r,et,e?null:i)}},Ct.parseExprList=function(t,e,i,n){for(var s=[],r=!0;!this.eat(t);){if(r)r=!1;else if(this.expect(x.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===x.comma?a=null:this.type===x.ellipsis?(a=this.parseSpread(n),n&&this.type===x.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),s.push(a)}return s},Ct.checkUnreserved=function(t){var e=t.start,i=t.end,n=t.name;this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===n&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==n&&"await"!==n||this.raise(e,"Cannot use "+n+" in class static initialization block"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))},Ct.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),"await"!==e.name||this.awaitIdentPos||(this.awaitIdentPos=e.start)),e},Ct.parseIdentNode=function(){var t=this.startNode();return this.type===x.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,"class"!==t.name&&"function"!==t.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop(),this.type=x.name):this.unexpected(),t},Ct.parsePrivateIdent=function(){var t=this.startNode();return this.type===x.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t},Ct.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===x.semi||this.canInsertSemicolon()||this.type!==x.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(x.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},Ct.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var It=at.prototype;It.raise=function(t,e){var i=V(this.input,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=this.pos,n},It.raiseRecoverable=It.raise,It.curPosition=function(){if(this.options.locations)return new L(this.curLine,this.pos-this.lineStart)};var Et=at.prototype,Tt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Et.enterScope=function(t){this.scopeStack.push(new Tt(t))},Et.exitScope=function(){this.scopeStack.pop()},Et.treatFunctionsAsVarInScope=function(t){return t.flags&q||!this.inModule&&t.flags&Q},Et.declareName=function(t,e,i){var n=!1;if(e===it){var s=this.currentScope();n=s.lexical.indexOf(t)>-1||s.functions.indexOf(t)>-1||s.var.indexOf(t)>-1,s.lexical.push(t),this.inModule&&s.flags&Q&&delete this.undefinedExports[t]}else if(e===st)this.currentScope().lexical.push(t);else if(e===nt){var r=this.currentScope();n=this.treatFunctionsAsVar?r.lexical.indexOf(t)>-1:r.lexical.indexOf(t)>-1||r.var.indexOf(t)>-1,r.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(o.flags&W&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){n=!0;break}if(o.var.push(t),this.inModule&&o.flags&Q&&delete this.undefinedExports[t],o.flags&Y)break}n&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},Et.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},Et.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Et.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&Y)return e}},Et.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&Y&&!(e.flags&J))return e}};var Pt=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new D(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},Ot=at.prototype;function Mt(t,e,i,n){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=i),t}Ot.startNode=function(){return new Pt(this,this.start,this.startLoc)},Ot.startNodeAt=function(t,e){return new Pt(this,t,e)},Ot.finishNode=function(t,e){return Mt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},Ot.finishNodeAt=function(t,e,i,n){return Mt.call(this,t,e,i,n)},Ot.copyNode=function(t){var e=new Pt(this,t.start,this.startLoc);for(var i in t)e[i]=t[i];return e};var Bt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Rt=Bt+" Extended_Pictographic",Nt=Rt+" EBase EComp EMod EPres ExtPict",Lt={9:Bt,10:Rt,11:Rt,12:Nt,13:Nt,14:Nt},Dt={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},Vt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",zt="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ut=zt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",jt=Ut+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ft=jt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Qt=Ft+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",qt={9:zt,10:Ut,11:jt,12:Ft,13:Qt,14:Qt+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},Ht={};function Gt(t){var e=Ht[t]={binary:B(Lt[t]+" "+Vt),binaryOfStrings:B(Dt[t]),nonBinary:{General_Category:B(Vt),Script:B(qt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var Jt=0,Wt=[9,10,11,12,13,14];Jt<Wt.length;Jt+=1)Gt(Wt[Jt]);var Zt=at.prototype,Xt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Ht[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Kt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Yt(t){return d(t,!0)||36===t||95===t}function $t(t){return p(t,!0)||36===t||95===t||8204===t||8205===t}function te(t){return t>=65&&t<=90||t>=97&&t<=122}function ee(t){return t>=0&&t<=1114111}Xt.prototype.reset=function(t,e,i){var n=-1!==i.indexOf("v"),s=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,n&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)},Xt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Xt.prototype.at=function(t,e){void 0===e&&(e=!1);var i=this.source,n=i.length;if(t>=n)return-1;var s=i.charCodeAt(t);if(!e&&!this.switchU||s<=55295||s>=57344||t+1>=n)return s;var r=i.charCodeAt(t+1);return r>=56320&&r<=57343?(s<<10)+r-56613888:s},Xt.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var i=this.source,n=i.length;if(t>=n)return n;var s,r=i.charCodeAt(t);return!e&&!this.switchU||r<=55295||r>=57344||t+1>=n||(s=i.charCodeAt(t+1))<56320||s>57343?t+1:t+2},Xt.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},Xt.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},Xt.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},Xt.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},Xt.prototype.eatChars=function(t,e){void 0===e&&(e=!1);for(var i=this.pos,n=0,s=t;n<s.length;n+=1){var r=s[n],a=this.at(i,e);if(-1===a||a!==r)return!1;i=this.nextIndex(i,e)}return this.pos=i,!0},Zt.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,n=!1,s=!1,r=0;r<i.length;r++){var a=i.charAt(r);-1===e.indexOf(a)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(a,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),"u"===a&&(n=!0),"v"===a&&(s=!0)}this.options.ecmaVersion>=15&&n&&s&&this.raise(t.start,"Invalid regular expression flag")},Zt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Zt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var n=i[e];-1===t.groupNames.indexOf(n)&&t.raise("Invalid named capture referenced")}},Zt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Zt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Zt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Zt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},Zt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Zt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Zt.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var n=0,s=-1;if(this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue),t.eat(125)))return-1!==s&&s<n&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},Zt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Zt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Zt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Zt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Zt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Zt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Zt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Kt(e)&&(t.lastIntValue=e,t.advance(),!0)},Zt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!Kt(i);)t.advance();return t.pos!==e},Zt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},Zt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Zt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Zt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=R(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=R(t.lastIntValue);return!0}return!1},Zt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),Yt(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Zt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),$t(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)},Zt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Zt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},Zt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Zt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Zt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Zt.regexp_eatZero=function(t){return 48===t.current()&&!ce(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Zt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Zt.regexp_eatControlLetter=function(t){var e=t.current();return!!te(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Zt.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var i=t.pos,n=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(n&&s>=55296&&s<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=1024*(s-55296)+(a-56320)+65536,!0}t.pos=r,t.lastIntValue=s}return!0}if(n&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&ee(t.lastIntValue))return!0;n&&t.raise("Invalid unicode escape"),t.pos=i}return!1},Zt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},Zt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1};var ie=0,ne=1,se=2;function re(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function ae(t){return te(t)||95===t}function oe(t){return ae(t)||ce(t)}function le(t){return 33===t||t>=35&&t<=38||t>=42&&t<=44||46===t||t>=58&&t<=64||94===t||96===t||126===t}function he(t){return 40===t||41===t||45===t||47===t||t>=91&&t<=93||t>=123&&t<=125}function ue(t){return 33===t||35===t||37===t||38===t||44===t||45===t||t>=58&&t<=62||64===t||96===t||126===t}function ce(t){return t>=48&&t<=57}function de(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function pe(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function fe(t){return t>=48&&t<=55}Zt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(re(e))return t.lastIntValue=-1,t.advance(),ne;var i=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((i=80===e)||112===e)){var n;if(t.lastIntValue=-1,t.advance(),t.eat(123)&&(n=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return i&&n===se&&t.raise("Invalid property name"),n;t.raise("Invalid property name")}return ie},Zt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,n),ne}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var s=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,s)}return ie},Zt.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){P(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},Zt.regexp_validateUnicodePropertyNameOrValue=function(t,e){return t.unicodeProperties.binary.test(e)?ne:t.switchV&&t.unicodeProperties.binaryOfStrings.test(e)?se:void t.raise("Invalid property name")},Zt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";ae(e=t.current());)t.lastStringValue+=R(e),t.advance();return""!==t.lastStringValue},Zt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";oe(e=t.current());)t.lastStringValue+=R(e),t.advance();return""!==t.lastStringValue},Zt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Zt.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),i=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&i===se&&t.raise("Negated character class may contain strings"),!0}return!1},Zt.regexp_classContents=function(t){return 93===t.current()?ne:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),ne)},Zt.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},Zt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||fe(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var n=t.current();return 93!==n&&(t.lastIntValue=n,t.advance(),!0)},Zt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Zt.regexp_classSetExpression=function(t){var e,i=ne;if(this.regexp_eatClassSetRange(t));else if(e=this.regexp_eatClassSetOperand(t)){e===se&&(i=se);for(var n=t.pos;t.eatChars([38,38]);)38!==t.current()&&(e=this.regexp_eatClassSetOperand(t))?e!==se&&(i=ne):t.raise("Invalid character in character class");if(n!==t.pos)return i;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(n!==t.pos)return i}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(!(e=this.regexp_eatClassSetOperand(t)))return i;e===se&&(i=se)}},Zt.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var i=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var n=t.lastIntValue;return-1!==i&&-1!==n&&i>n&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1},Zt.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?ne:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)},Zt.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var i=t.eat(94),n=this.regexp_classContents(t);if(t.eat(93))return i&&n===se&&t.raise("Negated character class may contain strings"),n;t.pos=e}if(t.eat(92)){var s=this.regexp_eatCharacterClassEscape(t);if(s)return s;t.pos=e}return null},Zt.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var i=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return i}else t.raise("Invalid escape");t.pos=e}return null},Zt.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)this.regexp_classString(t)===se&&(e=se);return e},Zt.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return 1===e?ne:se},Zt.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return!(!this.regexp_eatCharacterEscape(t)&&!this.regexp_eatClassSetReservedPunctuator(t)&&(t.eat(98)?(t.lastIntValue=8,0):(t.pos=e,1)));var i=t.current();return!(i<0||i===t.lookahead()&&le(i)||he(i)||(t.advance(),t.lastIntValue=i,0))},Zt.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return!!ue(e)&&(t.lastIntValue=e,t.advance(),!0)},Zt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!ce(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},Zt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Zt.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;ce(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},Zt.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;de(i=t.current());)t.lastIntValue=16*t.lastIntValue+pe(i),t.advance();return t.pos!==e},Zt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*i+t.lastIntValue:t.lastIntValue=8*e+i}else t.lastIntValue=e;return!0}return!1},Zt.regexp_eatOctalDigit=function(t){var e=t.current();return fe(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Zt.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var n=0;n<e;++n){var s=t.current();if(!de(s))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+pe(s),t.advance()}return!0};var ge=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new D(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},ve=at.prototype;function me(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function _e(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}ve.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ge(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ve.getToken=function(){return this.next(),new ge(this)},"undefined"!=typeof Symbol&&(ve[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===x.eof,value:e}}}}),ve.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(x.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},ve.readToken=function(t){return d(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},ve.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},ve.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var n=void 0,s=e;(n=C(this.input,s,this.pos))>-1;)++this.curLine,s=this.lineStart=n;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,i),e,this.pos,t,this.curPosition())},ve.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!b(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},ve.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&k.test(String.fromCharCode(t))))break t;++this.pos}}},ve.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},ve.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(x.ellipsis)):(++this.pos,this.finishToken(x.dot))},ve.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(x.assign,2):this.finishOp(x.slash,1)},ve.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,n=42===t?x.star:x.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,n=x.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(x.assign,i+1):this.finishOp(n,i)},ve.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(x.assign,3):this.finishOp(124===t?x.logicalOR:x.logicalAND,2):61===e?this.finishOp(x.assign,2):this.finishOp(124===t?x.bitwiseOR:x.bitwiseAND,1)},ve.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(x.assign,2):this.finishOp(x.bitwiseXOR,1)},ve.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(x.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(x.assign,2):this.finishOp(x.plusMin,1)},ve.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(x.assign,i+1):this.finishOp(x.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(x.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ve.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(x.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(x.arrow)):this.finishOp(61===t?x.eq:x.prefix,1)},ve.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(x.questionDot,2)}if(63===e)return t>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(x.assign,3):this.finishOp(x.coalesce,2)}return this.finishOp(x.question,1)},ve.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,d(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(x.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+R(t)+"'")},ve.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(x.parenL);case 41:return++this.pos,this.finishToken(x.parenR);case 59:return++this.pos,this.finishToken(x.semi);case 44:return++this.pos,this.finishToken(x.comma);case 91:return++this.pos,this.finishToken(x.bracketL);case 93:return++this.pos,this.finishToken(x.bracketR);case 123:return++this.pos,this.finishToken(x.braceL);case 125:return++this.pos,this.finishToken(x.braceR);case 58:return++this.pos,this.finishToken(x.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(x.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(x.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+R(t)+"'")},ve.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},ve.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(w.test(n)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===n)e=!0;else if("]"===n&&e)e=!1;else if("/"===n&&!e)break;t="\\"===n}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var r=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(r);var o=this.regexpState||(this.regexpState=new Xt(this));o.reset(i,s,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(s,a)}catch(h){}return this.finishToken(x.regexp,{pattern:s,flags:a,value:l})},ve.readInt=function(t,e,i){for(var n=this.options.ecmaVersion>=12&&void 0===e,s=i&&48===this.input.charCodeAt(this.pos),r=this.pos,a=0,o=0,l=0,h=null==e?1/0:e;l<h;++l,++this.pos){var u=this.input.charCodeAt(this.pos),c=void 0;if(n&&95===u)s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=u;else{if((c=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;o=u,a=a*t+c}}return n&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===r||null!=e&&this.pos-r!==e?null:a},ve.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return null==i&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(i=_e(this.input.slice(e,this.pos)),++this.pos):d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,i)},ve.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number");var n=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&110===n){var s=_e(this.input.slice(e,this.pos));return++this.pos,d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,s)}i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1),46!==n||i||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||i||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var r=me(this.input.slice(e,this.pos),i);return this.finishToken(x.num,r)},ve.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},ve.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;92===n?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):8232===n||8233===n?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(b(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(x.string,e)};var ye={};ve.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==ye)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ve.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw ye;this.raise(t,e)},ve.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==x.template&&this.type!==x.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(x.template,t)):36===i?(this.pos+=2,this.finishToken(x.dollarBraceL)):(++this.pos,this.finishToken(x.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(b(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},ve.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(x.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ve.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return R(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(n,8);return s>255&&(n=n.slice(0,-1),s=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),"0"===n&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return b(e)?"":String.fromCharCode(e)}},ve.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},ve.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(p(s,n))this.pos+=s<=65535?1:2;else{if(92!==s)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var r=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?d:p)(a,n)||this.invalidStringToken(r,"Invalid Unicode escape"),t+=R(a),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},ve.readWord=function(){var t=this.readWord1(),e=x.name;return this.keywords.test(t)&&(e=_[t]),this.finishToken(e,t)};var xe="8.11.3";function we(t,e){return at.parse(t,e)}function Ae(t,e,i){return at.parseExpressionAt(t,e,i)}function be(t,e){return at.tokenizer(t,e)}at.acorn={Parser:at,version:xe,defaultOptions:z,Position:L,SourceLocation:D,getLineInfo:V,Node:Pt,TokenType:f,tokTypes:x,keywordTypes:_,TokContext:wt,tokContexts:At,isIdentifierChar:p,isIdentifierStart:d,Token:ge,isNewLine:b,lineBreak:w,lineBreakG:A,nonASCIIwhitespace:k},t.Node=Pt,t.Parser=at,t.Position=L,t.SourceLocation=D,t.TokContext=wt,t.Token=ge,t.TokenType=f,t.defaultOptions=z,t.getLineInfo=V,t.isIdentifierChar=p,t.isIdentifierStart=d,t.isNewLine=b,t.keywordTypes=_,t.lineBreak=w,t.lineBreakG=A,t.nonASCIIwhitespace=k,t.parse=we,t.parseExpressionAt=Ae,t.tokContexts=At,t.tokTypes=x,t.tokenizer=be,t.version=xe}(di.exports)),di.exports}
/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */ui=ci,function(t,e){var i=(t=t||xt).window,n=t.document,s=new function(){var t=/^(statics|enumerable|beans|preserve)$/,i=[],n=i.slice,s=Object.create,r=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=i.forEach||function(t,e){for(var i=0,n=this.length;i<n;i++)t.call(e,this[i],i,this)},l=function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)},h=Object.assign||function(t){for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t},u=function(t,e,i){if(t){var n=r(t,"length");(n&&"number"==typeof n.value?o:l).call(t,e,i=i||t)}return i};function c(e,i,n,s,o){var l={};function h(t,h){"string"==typeof(h=h||(h=r(i,t))&&(h.get?h:h.value))&&"#"===h[0]&&(h=e[h.substring(1)]||h);var u,c="function"==typeof h,p=h,f=o||c&&!h.base?h&&h.get?t in e:e[t]:null;o&&f||(c&&f&&(h.base=f),c&&!1!==s&&(u=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[u[3].toLowerCase()+u[4]]=u[2]),p&&!c&&p.get&&"function"==typeof p.get&&d.isPlainObject(p)||(p={value:p,writable:!0}),(r(e,t)||{configurable:!0}).configurable&&(p.configurable=!0,p.enumerable=null!=n?n:!u),a(e,t,p))}if(i){for(var u in i)i.hasOwnProperty(u)&&!t.test(u)&&h(u);for(var u in l){var c=l[u],p=e["set"+c],f=e["get"+c]||p&&e["is"+c];!f||!0!==s&&0!==f.length||h(u,{get:f,set:p})}}return e}function d(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];i&&h(this,i)}return this}return c(d,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,i=t.beans,n=t.preserve;e!==t&&c(this.prototype,t,t.enumerable,i,n),c(this,e,null,i,n)}for(var s=1,r=arguments.length;s<r;s++)this.inject(arguments[s]);return this},extend:function(){for(var t,e,i,n=this,r=0,o=arguments.length;r<o&&(!t||!e);r++)i=arguments[r],t=t||i.initialize,e=e||i.prototype;return t=t||function(){n.apply(this,arguments)},e=t.prototype=e||s(this.prototype),a(e,"constructor",{value:t,writable:!0,configurable:!0}),c(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=n,t}}).inject({enumerable:!1,initialize:d,set:d,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];i&&c(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){var t=s(this);return t.inject.apply(t,arguments)},each:function(t,e){return u(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:h,each:u,create:s,define:a,describe:r,clone:function(t){return h(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===d||"Object"===e.name)},pick:function(t,i){return t!==e?t:i},slice:function(t,e,i){return n.call(t,e,i)}}})};ui.exports=s,s.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+s.each(this,(function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?h.instance.number(t):"string"===i?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return s.importJSON(t,this)},exportJSON:function(t){return s.exportJSON(this,t)},toJSON:function(){return s.serialize(this)},set:function(t,e){return t&&s.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),i=e.prototype._class;return i&&!s.exports[i]&&(s.exports[i]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((i=t.length)!==e.length)return!1;for(;i--;)if(!s.equals(t[i],e[i]))return!1}else{var i,n=Object.keys(t);if((i=n.length)!==Object.keys(e).length)return!1;for(;i--;){var r=n[i];if(!e.hasOwnProperty(r)||!s.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,i,n,r){if(this===s){var a=this.peek(t,i);return t.__index++,a}var o=this.prototype,l=o._readIndex,h=i||l&&t.__index||0,u=t.length,c=t[h];if(r=r||u-h,c instanceof this||n&&n.readNull&&null==c&&r<=1)return l&&(t.__index=h+1),c&&n&&n.clone?c.clone():c;if(c=s.create(o),l&&(c.__read=!0),c=c.initialize.apply(c,h>0||h+r<u?s.slice(t,h,h+r):t)||c,l){t.__index=h+c.__read;var d=c.__filtered;d&&(t.__filtered=d,c.__filtered=e),c.__read=e}return c},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,n){for(var s,r=[],a=e||0,o=n?a+n:t.length,l=a;l<o;l++)r.push(Array.isArray(s=t[l])?this.read(s,0,i):this.read(t,l,i,1));return r},readNamed:function(t,i,n,r,a){var o=this.getNamed(t,i),l=o!==e;if(l){var h=t.__filtered;if(!h){var u=this.getSource(t);(h=t.__filtered=s.create(u)).__unfiltered=u}h[i]=e}return this.read(l?[o]:t,n,r,a)},readSupported:function(t,i){var n=this.getSource(t),s=this,r=!1;return n&&Object.keys(n).forEach((function(n){if(n in i){var a=s.readNamed(t,n);a!==e&&(i[n]=a),r=!0}})),r},getSource:function(t){var i=t.__source;if(i===e){var n=1===t.length&&t[0];i=t.__source=n&&s.isPlainObject(n)?n:null}return i},getNamed:function(t,e){var i=this.getSource(t);if(i)return e?i[e]:t.__filtered||i},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,i,n,s){var r;function a(s){if(!(n&&s in n||r&&s in r)){var a=i[s];a!==e&&(t[s]=a)}}if(s){for(var o,l={},h=0,u=s.length;h<u;h++)(o=s[h])in i&&(a(o),l[o]=!0);r=l}return Object.keys(i.__unfiltered||i).forEach(a),t},isPlainValue:function(t,e){return s.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,i,n){e=e||{};var r,a=!n;if(a&&(e.formatter=new h(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var i="#"+t._id,n=this.references[i];if(!n){this.length++;var s=e.call(t),r=t._class;r&&s[0]!==r&&s.unshift(r),this.definitions[i]=s,n=this.references[i]=[i]}return n}}),t&&t._serialize){r=t._serialize(e,n);var o=t._class;!o||t._compactSerialize||!a&&i||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var l=0,u=t.length;l<u;l++)r[l]=s.serialize(t[l],e,i,n)}else if(s.isPlainObject(t)){r={};var c=Object.keys(t);for(l=0,u=c.length;l<u;l++){var d=c[l];r[d]=s.serialize(t[d],e,i,n)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return a&&n.length>0?[["dictionary",n.definitions],r]:r},deserialize:function(t,e,i,n,r){var a=t,o=!i,l=o&&t&&t.length&&"dictionary"===t[0][0];if(i=i||{},Array.isArray(t)){var h=t[0],u="dictionary"===h;if(1==t.length&&/^#/.test(h))return i.dictionary[h];a=[];for(var c=(h=s.exports[h])?1:0,d=t.length;c<d;c++)a.push(s.deserialize(t[c],e,i,u,l));if(h){var p=a;a=e?e(h,p,o||r):new h(p)}}else if(s.isPlainObject(t))for(var f in a={},n&&(i.dictionary=a),t)a[f]=s.deserialize(t[f],e,i);return l?a[1]:a},exportJSON:function(t,e){var i=s.serialize(t,e);return e&&0==e.asString?i:JSON.stringify(i)},importJSON:function(t,e){return s.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,i,n){var r=n&&e&&e.constructor===t,a=r?e:s.create(t.prototype);if(1===i.length&&a instanceof w&&(r||!(a instanceof b))){var o=i[0];s.isPlainObject(o)&&(o.insert=!1,r&&(i=i.concat([w.INSERT])))}return(r?a.set:t).apply(a,i),r&&(e=null),a}))},push:function(t,e){var i=e.length;if(i<4096)t.push.apply(t,e);else{var n=t.length;t.length+=i;for(var s=0;s<i;s++)t[n+s]=e[s]}return t},splice:function(t,i,n,r){var a=i&&i.length,o=n===e;(n=o?t.length:n)>t.length&&(n=t.length);for(var l=0;l<a;l++)i[l]._index=n+l;if(o)return s.push(t,i),[];var h=[n,r];i&&s.push(h,i);for(var u=t.splice.apply(t,h),c=(l=0,u.length);l<c;l++)u[l]._index=e;for(l=n+a,c=t.length;l<c;l++)t[l]._index=l;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var r={on:function(t,e){if("string"!=typeof t)s.each(t,(function(t,e){this.on(e,t)}),this);else{var i=this._eventTypes,n=i&&i[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),n&&n.install&&1===r.length&&n.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var i,n=this._eventTypes,r=n&&n[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(i=a.indexOf(e))&&1===a.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==i&&a.splice(i,1)),this}s.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function i(){e.apply(this,arguments),this.off(t,i)}))},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var n=s.slice(arguments,1),r=e&&e.target&&!e.currentTarget;i=i.slice(),r&&(e.currentTarget=this);for(var a=0,o=i.length;a<o;a++)if(0==i[a].apply(this,n)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,n=t?"install":"uninstall";if(e)for(var s in i)if(i[s].length>0){var r=e[s],a=r&&r[n];a&&a.call(this,s)}},statics:{inject:function t(e){var i=e._events;if(i){var n={};s.each(i,(function(t,i){var r="string"==typeof t,a=r?t:i,o=s.capitalize(a),l=a.substring(2).toLowerCase();n[l]=r?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(l,e),t&&this.on(l,t),this[a]=t}})),e._eventTypes=n}return t.base.apply(this,arguments)}}},a=s.extend({_class:"PaperScope",initialize:function e(){at=this,this.settings=new s({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var i=e.prototype;if(!this.support){var n=it.getContext(1,1)||{};i.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:nt.nativeModes},it.release(n)}if(!this.agent){var r=t.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],o="darwin"===a?"mac":a,l=i.agent=i.browser={platform:o};o&&(l[o]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,i,n,s){if(!l.chrome){var r="opera"===e?n:/^(node|trident)$/.test(e)?s:i;l.version=r,l.versionNumber=parseFloat(r),e={trident:"msie",jsdom:"node"}[e]||e,l.name=e,l[e]=!0}})),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.12.17",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var i=at.PaperScript.execute(t,this,e);return G.updateFocus(),i},install:function(t){var e=this;for(var i in s.each(["project","view","tool"],(function(i){s.define(t,i,{configurable:!0,get:function(){return e[i]}})})),this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return at=this,this.project=new x(t),this},createCanvas:function(t,e){return it.getCanvas(t,e)},activate:function(){at=this},clear:function(){for(var t=this.projects,e=this.tools,i=t.length-1;i>=0;i--)t[i].remove();for(i=e.length-1;i>=0;i--)e[i].remove()},remove:function(){this.clear(),delete a._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),o=s.extend(r,{initialize:function(t){this._scope=at,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(s.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),l={findItemBoundsCollisions:function(t,e,i){function n(t){for(var e=new Array(t.length),i=0;i<t.length;i++){var n=t[i].getBounds();e[i]=[n.left,n.top,n.right,n.bottom]}return e}var s=n(t),r=e&&e!==t?n(e):s;return this.findBoundsCollisions(s,r,i||0)},findCurveBoundsCollisions:function(t,e,i,n){function s(t){for(var e=Math.min,i=Math.max,n=new Array(t.length),s=0;s<t.length;s++){var r=t[s];n[s]=[e(r[0],r[2],r[4],r[6]),e(r[1],r[3],r[5],r[7]),i(r[0],r[2],r[4],r[6]),i(r[1],r[3],r[5],r[7])]}return n}var r=s(t),a=e&&e!==t?s(e):r;if(n){for(var o=this.findBoundsCollisions(r,a,i||0,!1,!0),l=this.findBoundsCollisions(r,a,i||0,!0,!0),h=[],u=0,c=o.length;u<c;u++)h[u]={hor:o[u],ver:l[u]};return h}return this.findBoundsCollisions(r,a,i||0)},findBoundsCollisions:function(t,e,i,n,s){var r=!e||t===e,a=r?t:t.concat(e),o=t.length,l=a.length;function h(t,e,i){for(var n=0,s=t.length;n<s;){var r=s+n>>>1;a[t[r]][e]<i?n=r+1:s=r}return n-1}for(var u=n?1:0,c=u+2,d=n?0:1,p=d+2,f=new Array(l),g=0;g<l;g++)f[g]=g;f.sort((function(t,e){return a[t][u]-a[e][u]}));var v=[],m=new Array(o);for(g=0;g<l;g++){var _=f[g],y=a[_],x=r?_:_-o,w=_<o,A=r||!w,b=w?[]:null;if(v.length){var C=h(v,c,y[u]-i)+1;if(v.splice(0,C),r&&s){b=b.concat(v);for(var k=0;k<v.length;k++)m[E=v[k]].push(x)}else{var S=y[p],I=y[d];for(k=0;k<v.length;k++){var E=v[k],T=a[E],P=E<o,O=r||E>=o;(s||(w&&O||A&&P)&&S>=T[d]-i&&I<=T[p]+i)&&(w&&O&&b.push(r?E:E-o),A&&P&&m[E].push(x))}}}if(w&&(t===e&&b.push(_),m[_]=b),v.length){var M=h(v,c,y[c]);v.splice(M+1,0,_)}else v.push(_)}for(g=0;g<m.length;g++){var B=m[g];B&&B.sort((function(t,e){return t-e}))}return m}},h=s.extend({initialize:function(t){this.precision=s.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});h.instance=new h;var u=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,n=Math.sqrt,s=Math.pow,r=Math.log2||function(t){return Math.log(t)*Math.LOG2E},a=1e-12,o=112e-18;function l(t,e,i){return t<e?e:t>i?i:t}function h(t,e,n){function s(t){var e=134217729*t,i=t-e+e;return[i,t-i]}var r=e*e-t*n,a=e*e+t*n;if(3*i(r)<a){var o=s(t),l=s(e),h=s(n),u=e*e,c=t*n;r=u-c+(l[0]*l[0]-u+2*l[0]*l[1]+l[1]*l[1]-(o[0]*h[0]-c+o[0]*h[1]+o[1]*h[0]+o[1]*h[1]))}return r}function c(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?s(2,-Math.round(r(t))):0}return{EPSILON:a,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(n(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=a},isMachineZero:function(t){return t>=-112e-18&&t<=o},clamp:l,integrate:function(i,n,s,r){for(var a=t[r-2],o=e[r-2],l=.5*(s-n),h=l+n,u=0,c=r+1>>1,d=1&r?o[u++]*i(h):0;u<c;){var p=l*a[u];d+=o[u++]*(i(h+p)+i(h-p))}return l*d},findRoot:function(t,e,n,s,r,a,o){for(var h=0;h<a;h++){var u=t(n),c=u/e(n),d=n-c;if(i(c)<o){n=d;break}u>0?(r=n,n=d<=s?.5*(s+r):d):(s=n,n=d>=r?.5*(s+r):d)}return l(n,s,r)},solveQuadratic:function(t,e,s,r,u,d){var p,f=1/0;if(i(t)<a){if(i(e)<a)return i(s)<a?-1:0;p=-s/e}else{var g=h(t,e*=-.5,s);if(g&&i(g)<o){var v=c(i(t),i(e),i(s));v&&(g=h(t*=v,e*=v,s*=v))}if(g>=-112e-18){var m=g<0?0:n(g),_=e+(e<0?-m:m);0===_?f=-(p=s/t):(p=_/t,f=s/_)}}var y=0,x=null==u,w=u-a,A=d+a;return isFinite(p)&&(x||p>w&&p<A)&&(r[y++]=x?p:l(p,u,d)),f!==p&&isFinite(f)&&(x||f>w&&f<A)&&(r[y++]=x?f:l(f,u,d)),y},solveCubic:function(t,e,r,h,d,p,f){var g,v,m,_,y,x=c(i(t),i(e),i(r),i(h));function w(i){var n=t*(g=i);_=(n+(v=n+e))*g+(m=v*g+r),y=m*g+h}if(x&&(t*=x,e*=x,r*=x,h*=x),i(t)<a)t=e,v=r,m=h,g=1/0;else if(i(h)<a)v=e,m=r,g=0;else{w(-e/t/3);var A=y/t,b=s(i(A),1/3),C=A<0?-1:1,k=-_/t,S=k>0?1.324717957244746*Math.max(b,n(k)):b,I=g-C*S;if(I!==g){do{w(I),I=0===_?g:g-y/_/(1+o)}while(C*I>C*g);i(t)*g*g>i(h/g)&&(v=((m=-h/g)-r)/g)}}var E=u.solveQuadratic(t,v,m,d,p,f),T=null==p;return isFinite(g)&&(0===E||E>0&&g!==d[0]&&g!==d[1])&&(T||g>p-a&&g<f+a)&&(d[E++]=T?g:l(g,p,f)),E}}},c={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},d=s.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,s=0;if("number"===i){var r="number"==typeof e;this._set(t,r?e:t),n&&(s=r?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(s=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),s=0)}return n&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new d(this.x,this.y)},toString:function(){var t=h.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();u.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=d.read(arguments),e=this.getLength()*t.getLength();if(u.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=d.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,e=d.read(t),i=e.x-this.x,n=e.y-this.y,r=i*i+n*n;return s.read(t)?r:Math.sqrt(r)},normalize:function(t){t===e&&(t=1);var i=this.getLength(),n=0!==i?t/i:0,s=new d(this.x*n,this.y*n);return n>=0&&(s._angle=this._angle),s},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,n=Math.sin(t),s=Math.cos(t);return i=new d(i.x*s-i.y*n,i.x*n+i.y*s),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=d.read(arguments);return new d(this.x+t.x,this.y+t.y)},subtract:function(){var t=d.read(arguments);return new d(this.x-t.x,this.y-t.y)},multiply:function(){var t=d.read(arguments);return new d(this.x*t.x,this.y*t.y)},divide:function(){var t=d.read(arguments);return new d(this.x/t.x,this.y/t.y)},modulo:function(){var t=d.read(arguments);return new d(this.x%t.x,this.y%t.y)},negate:function(){return new d(-this.x,-this.y)},isInside:function(){return v.read(arguments).contains(this)},isClose:function(){var t=arguments,e=d.read(t),i=s.read(t);return this.getDistance(e)<=i},isCollinear:function(){var t=d.read(arguments);return d.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=d.read(arguments);return d.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=u.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=d.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=d.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=d.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new d(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=d.read(t),i=d.read(t);return new d(Math.min(e.x,i.x),Math.min(e.y,i.y))},max:function(){var t=arguments,e=d.read(t),i=d.read(t);return new d(Math.max(e.x,i.x),Math.max(e.y,i.y))},random:function(){return new d(Math.random(),Math.random())},isCollinear:function(t,e,i,n){return Math.abs(t*n-e*i)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))},isOrthogonal:function(t,e,i,n){return Math.abs(t*i+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))}}},s.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new d(e(this.x),e(this.y))}}),{})),p=d.extend({initialize:function(t,e,i,n){this._x=t,this._y=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),f=s.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,s=0;if("number"===i){var r="number"==typeof e;this._set(t,r?e:t),n&&(s=r?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(s=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),s=0)}return n&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new f(this.width,this.height)},toString:function(){var t=h.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=f.read(arguments);return new f(this.width+t.width,this.height+t.height)},subtract:function(){var t=f.read(arguments);return new f(this.width-t.width,this.height-t.height)},multiply:function(){var t=f.read(arguments);return new f(this.width*t.width,this.height*t.height)},divide:function(){var t=f.read(arguments);return new f(this.width/t.width,this.height/t.height)},modulo:function(){var t=f.read(arguments);return new f(this.width%t.width,this.height%t.height)},negate:function(){return new f(-this.width,-this.height)},isZero:function(){var t=u.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new f(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new f(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new f(Math.random(),Math.random())}}},s.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new f(e(this.width),e(this.height))}}),{})),g=f.extend({initialize:function(t,e,i,n){this._width=t,this._height=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),v=s.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,i,n,r){var a,o=arguments,l=typeof t;if("number"===l?(this._set(t,i,n,r),a=4):"undefined"===l||null===t?(this._set(0,0,0,0),a=null===t?1:0):1===o.length&&(Array.isArray(t)?(this._set.apply(this,t),a=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),a=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),s.readSupported(o,this)&&(a=1))),a===e){var h,u,c=d.readNamed(o,"from"),p=s.peek(o),g=c.x,v=c.y;if(p&&p.x!==e||s.hasNamed(o,"to")){var m=d.readNamed(o,"to");h=m.x-g,u=m.y-v,h<0&&(g=m.x,h=-h),u<0&&(v=m.y,u=-u)}else{var _=f.read(o);h=_.width,u=_.height}this._set(g,v,h,u),a=o.__index}var y=o.__filtered;return y&&(this.__filtered=y),this.__read&&(this.__read=a),this},set:"#initialize",_set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},clone:function(){return new v(this.x,this.y,this.width,this.height)},equals:function(t){var e=s.isPlainValue(t)?v.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=h.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?d:p)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=d.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?f:g)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=f.read(arguments),e=this._sx,i=this._sy,n=t.width,s=t.height;e&&(this.x+=(this.width-n)*e),i&&(this.y+=(this.height-s)*i),this.width=n,this.height=s,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?d:p)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=d.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(v.read(arguments)):this._containsPoint(d.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=v.read(arguments),e=s.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=v.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return new v(e,i,n-e,s-i)},unite:function(){var t=v.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),s=Math.max(this.y+this.height,t.y+t.height);return new v(e,i,n-e,s-i)},include:function(){var t=d.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),s=Math.max(this.y+this.height,t.y);return new v(e,i,n-e,s-i)},expand:function(){var t=f.read(arguments),e=t.width,i=t.height;return new v(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,i){return this.expand(this.width*t-this.width,this.height*(i===e?t:i)-this.height)}},s.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var i=t.join(""),n=/^[RL]/.test(i);e>=4&&(t[1]+=n?"Y":"X");var s=t[n?0:1],r=t[n?1:0],a="get"+s,o="get"+r,l="set"+s,h="set"+r,u="set"+i;this["get"+i]=function(t){return new(t?d:p)(this[a](),this[o](),this,u)},this[u]=function(){var t=d.read(arguments);this[l](t.x),this[h](t.y)}}),{beans:!0})),m=v.extend({initialize:function(t,e,i,n,s,r){this._set(t,e,i,n,!0),this._owner=s,this._setter=r},_set:function(t,e,i,n,s){return this._x=t,this._y=e,this._width=i,this._height=n,s||this._owner[this._setter](this),this}},new function(){var t=v.prototype;return s.each(["x","y","width","height"],(function(t){var e=s.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}}),s.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),_=s.extend({_class:"Matrix",initialize:function t(e,i){var n=arguments,s=n.length,r=!0;if(s>=6?this._set.apply(this,n):1===s||2===s?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,i):Array.isArray(e)?this._set.apply(this,i?e.concat([i]):e):r=!1:s?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,n,s,r,a){return this._a=t,this._b=e,this._c=i,this._d=n,this._tx=s,this._ty=r,a||this._changed(),this},_serialize:function(t,e){return s.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new _(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=h.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return!!i&&(i.transform(null,s.pick(t,!0),e),this.isIdentity())},translate:function(){var t=d.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=arguments,e=d.read(t),i=d.read(t,0,{readNull:!0});return i&&this.translate(i),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,i&&this.translate(i.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=d.read(arguments,1),i=e.x,n=e.y,s=Math.cos(t),r=Math.sin(t),a=i-i*s+n*r,o=n-i*r-n*s,l=this._a,h=this._b,u=this._c,c=this._d;return this._a=s*l+r*u,this._b=s*h+r*c,this._c=-r*l+s*u,this._d=-r*h+s*c,this._tx+=a*l+o*u,this._ty+=a*h+o*c,this._changed(),this},shear:function(){var t=arguments,e=d.read(t),i=d.read(t,0,{readNull:!0});i&&this.translate(i);var n=this._a,s=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*n,this._d+=e.x*s,i&&this.translate(i.negate()),this._changed(),this},skew:function(){var t=arguments,e=d.read(t),i=d.read(t,0,{readNull:!0}),n=Math.PI/180,s=new d(Math.tan(e.x*n),Math.tan(e.y*n));return this.shear(s,i)},append:function(t,e){if(t){var i=this._a,n=this._b,s=this._c,r=this._d,a=t._a,o=t._c,l=t._b,h=t._d,u=t._tx,c=t._ty;this._a=a*i+l*s,this._c=o*i+h*s,this._b=a*n+l*r,this._d=o*n+h*r,this._tx+=u*i+c*s,this._ty+=u*n+c*r,e||this._changed()}return this},prepend:function(t,e){if(t){var i=this._a,n=this._b,s=this._c,r=this._d,a=this._tx,o=this._ty,l=t._a,h=t._c,u=t._b,c=t._d,d=t._tx,p=t._ty;this._a=l*i+h*n,this._c=l*s+h*r,this._b=u*i+c*n,this._d=u*s+c*r,this._tx=l*a+h*o+d,this._ty=u*a+c*o+p,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,n=this._d,s=this._tx,r=this._ty,a=t*n-e*i,o=null;return a&&!isNaN(a)&&isFinite(s)&&isFinite(r)&&(this._a=n/a,this._b=-e/a,this._c=-i/a,this._d=t/a,this._tx=(i*r-n*s)/a,this._ty=(e*s-t*r)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new _(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){return arguments.length<3?this._transformPoint(d.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var n=t.x,s=t.y;return e||(e=new d),e._set(n*this._a+s*this._c+this._tx,n*this._b+s*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var n=0,s=2*i;n<s;n+=2){var r=t[n],a=t[n+1];e[n]=r*this._a+a*this._c+this._tx,e[n+1]=r*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,n=e+t.width,s=i+t.height,r=[e,i,n,i,n,s,e,s];return this._transformCoordinates(r,r,4)},_transformBounds:function(t,e,i){for(var n=this._transformCorners(t),s=n.slice(0,2),r=s.slice(),a=2;a<8;a++){var o=n[a],l=1&a;o<s[l]?s[l]=o:o>r[l]&&(r[l]=o)}return e||(e=new v),e._set(s[0],s[1],r[0]-s[0],r[1]-s[1],i)},inverseTransform:function(){return this._inverseTransform(d.read(arguments))},_inverseTransform:function(t,e,i){var n=this._a,s=this._b,r=this._c,a=this._d,o=this._tx,l=this._ty,h=n*a-s*r,u=null;if(h&&!isNaN(h)&&isFinite(o)&&isFinite(l)){var c=t.x-this._tx,p=t.y-this._ty;e||(e=new d),u=e._set((c*a-p*r)/h,(p*n-c*s)/h,i)}return u},decompose:function(){var t,e,i,n=this._a,s=this._b,r=this._c,a=this._d,o=n*a-s*r,l=Math.sqrt,h=Math.atan2,u=180/Math.PI;if(0!==n||0!==s){var c=l(n*n+s*s);t=Math.acos(n/c)*(s>0?1:-1),e=[c,o/c],i=[h(n*r+s*a,c*c),0]}else if(0!==r||0!==a){var p=l(r*r+a*a);t=Math.asin(r/p)*(a>0?1:-1),e=[o/p,p],i=[0,h(n*r+s*a,p*p)]}else t=0,i=e=[0,0];return{translation:this.getTranslation(),rotation:t*u,scaling:new d(e),skewing:new d(i[0]*u,i[1]*u)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new d(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},s.each(["a","b","c","d","tx","ty"],(function(t){var e=s.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._changed()}}),{})),y=s.extend({_class:"Line",initialize:function(t,e,i,n,s){var r=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=i,this._vy=n,r=s):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,r=i),r||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new d(this._px,this._py)},getVector:function(){return new d(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return y.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return y.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return y.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return d.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return d.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,n,s,r,a,o,l,h){l||(i-=t,n-=e,a-=s,o-=r);var c=i*o-n*a;if(!u.isMachineZero(c)){var p=t-s,f=e-r,g=(a*f-o*p)/c,v=(i*f-n*p)/c,m=-1e-12,_=1+1e-12;if(h||m<g&&g<_&&m<v&&v<_)return h||(g=g<=0?0:g>=1?1:g),new d(t+g*i,e+g*n)}},getSide:function(t,e,i,n,s,r,a,o){a||(i-=t,n-=e);var l=s-t,h=l*n-(r-e)*i;return!o&&u.isMachineZero(h)&&(h=(l*i+l*i)/(i*i+n*n))>=0&&h<=1&&(h=0),h<0?-1:h>0?1:0},getSignedDistance:function(t,e,i,n,s,r,a){return a||(i-=t,n-=e),0===i?n>0?s-t:t-s:0===n?i<0?r-e:e-r:((s-t)*n-(r-e)*i)/(n>i?n*Math.sqrt(1+i*i/(n*n)):i*Math.sqrt(1+n*n/(i*i)))},getDistance:function(t,e,i,n,s,r,a){return Math.abs(y.getSignedDistance(t,e,i,n,s,r,a))}}}),x=o.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){o.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Q(null,null,this),this._view=G.create(this,t||it.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return s.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var n=this._changes;if(n&&e){var s=this._changesById,r=e._id,a=s[r];a?a.flags|=t:n.push(s[r]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new b({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:S,match:function(i){var n=i._definition,s=n._id;return e[s]||(e[s]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var n=t[i],s=n._selection;1&s&&n.isInserted()?e.push(n):s||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof b){e._remove(!1,!0),s.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,i,n){return i=this.insertLayer(t,i)||(this._activeLayer||this._insertItem(e,new b(w.NO_INSERT),!0)).insertChild(t,i),n&&i.activate&&i.activate(),i},getItems:function(t){return w._getItems(this,t)},getItem:function(t){return w._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return s.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var i=e[t];if(i){for(var n in i){var s=i[n];for(var r in e){var a=e[r];a&&a!=i&&delete a[s._id]}s.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,r=new s({offset:new d(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new _],updateMatrix:!0}),a=0,o=n.length;a<o;a++)n[a].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var l=this._selectionItems,h=this._scope.settings.handleSize,u=this._updateVersion;for(var c in l)l[c]._drawSelection(t,e,h,l,u);t.restore()}}}),w=s.extend(r,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=s.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new _,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return s.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,i){var n=t&&s.isPlainObject(t),r=n&&!0===t.internal,a=this._matrix=new _,o=n&&t.project||at.project,l=at.settings;return this._id=r?null:c.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,i&&a.translate(i),a._owner=this,this._style=new Q(o._currentStyle,this,o),r||n&&0==t.insert||!l.insertItems&&(!n||1!=t.insert)?this._setProject(o):(n&&t.parent||o)._insertItem(e,this,!0),n&&t!==w.NO_INSERT&&t!==w.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){var i={},n=this;function r(r){for(var a in r){var o=n[a];s.equals(o,"leading"===a?1.2*r.fontSize:r[a])||(i[a]=s.serialize(o,t,"data"!==a,e))}}return r(this._serializeFields),this instanceof A||r(this._style._defaults),[this._class,i]},_changed:function(t){var i=this._symbol,n=this._parent||i,s=this._project;8&t&&(this._bounds=this._position=this._decomposed=e),16&t&&(this._globalMatrix=e),n&&72&t&&w._clearBoundsCache(n),2&t&&w._clearBoundsCache(this),s&&s._changed(t,this),i&&i._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(t&&i){var n=i._children,s=i._namedChildren;(s[t]=s[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||e,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},s.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=s.capitalize(t),i="_"+t,n={locked:256,visible:265};this["get"+e]=function(){return this[i]},this["set"+e]=function(e){e!=this[i]&&(this[i]=e,this._changed(n[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var i=0,n=t.length;i<n;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,n=e.length;i<n;i++)e[i].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?d:p,i=this._position||(this._position=this._getPositionFromBounds());return new e(i.x,i.y,this,"setPosition")},setPosition:function(){this.translate(d.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new p(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=d.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},s.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var i=e||t instanceof _,n=s.set({},i?e:t,this._boundsOptions);n.stroke&&!this.getStrokeScaling()||(n.cacheItem=this);var r=this._getCachedBounds(i&&t,n).rect;return arguments.length?r:new m(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=v.read(arguments),e=this.getBounds(),i=this._matrix,n=new _,s=t.getCenter();n.translate(s),t.width==e.width&&t.height==e.height||(i.isInvertible()||(i.set(i._backup||(new _).translate(i.getTranslation())),e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),s=e.getCenter(),n.translate(-s.x,-s.y),this.transform(n)},_getBounds:function(t,e){var i=this._children;return i&&i.length?(w._updateBoundsCache(this,e.cacheItem),w._getBounds(i,t,e)):new v},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,i){t=t&&t._orNullIfIdentity();var n=e.internal&&!i,s=e.cacheItem,r=n?null:this._matrix._orNullIfIdentity(),a=s&&(!t||t.equals(r))&&this._getBoundsCacheKey(e,n),o=this._bounds;if(w._updateBoundsCache(this._parent||this._symbol,s),a&&o&&a in o)return{rect:(d=o[a]).rect.clone(),nonscaling:d.nonscaling};var l=this._getBounds(t||r,e),h=l.rect||l,u=this._style,c=l.nonscaling||u.hasStroke()&&!u.getStrokeScaling();if(a){o||(this._bounds=o={});var d=o[a]={rect:h.clone(),nonscaling:c,internal:n}}return{rect:h,nonscaling:c}},_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=i?i.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[i]||(n.list.push(e),n.ids[i]=e)}},_clearBoundsCache:function(t){var i=t._boundsCache;if(i){t._bounds=t._position=t._boundsCache=e;for(var n=0,s=i.list,r=s.length;n<r;n++){var a=s[n];a!==t&&(a._bounds=a._position=e,a._boundsCache&&w._clearBoundsCache(a))}}},_getBounds:function(t,e,i){var n=1/0,s=-n,r=n,a=s,o=!1;i=i||{};for(var l=0,h=t.length;l<h;l++){var u=t[l];if(u._visible&&!u.isEmpty(!0)){var c=u._getCachedBounds(e&&e.appended(u._matrix),i,!0),d=c.rect;n=Math.min(d.x,n),r=Math.min(d.y,r),s=Math.max(d.x+d.width,s),a=Math.max(d.y+d.height,a),c.nonscaling&&(o=!0)}}return{rect:isFinite(n)?new v(n,r,s-n,a-r):new v,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new p(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=d.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var i=this.getRotation(),n=this._decomposed,s=new _,r=u.isZero;if(r(t.x)||r(t.y))s.translate(n.translation),i&&s.rotate(i),s.scale(e.x,e.y),this._matrix.set(s);else{var a=this.getPosition(!0);s.translate(a),i&&s.rotate(i),s.scale(e.x/t.x,e.y/t.y),i&&s.rotate(-i),s.translate(a.negate()),this.transform(s)}n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var i=this._parent,n=[];i;){if(!i._globalMatrix){e=null;for(var s=0,r=n.length;s<r;s++)n[s]._globalMatrix=null;break}n.push(i),i=i._parent}return e||(e=this._globalMatrix=this._matrix.clone(),(i=this._parent)&&e.prepend(i.getGlobalMatrix(!0))),t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,n=0,s=i&&i.length;n<s;n++)i[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var i=this._children,n=0,s=i&&i.length;n<s;n++)i[n]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof b)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return s.equals(this._children,t._children)},clone:function(t){var i=new this.constructor(w.NO_INSERT),n=this._children,r=s.pick(t?t.insert:e,t===e||!0===t),a=s.pick(t?t.deep:e,!0);n&&i.copyAttributes(this),n&&!a||i.copyContent(this),n||i.copyAttributes(this),r&&i.insertAbove(this);var o=this._name,l=this._parent;if(o&&l){n=l._children;for(var h=o,u=1;n[o];)o=h+" "+u++;o!==h&&i.setName(o)}return i},copyContent:function(t){for(var e=t._children,i=0,n=e&&e.length;i<n;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,r=i.length;n<r;n++){var a=i[n];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,l=t._name;this._data=o?s.clone(o):null,l&&this.setName(l)},rasterize:function(t,i){var n,r,a;s.isPlainObject(t)?(n=t.resolution,r=t.insert,a=t.raster):(n=t,r=i),a||(a=new k(w.NO_INSERT));var o=this.getStrokeBounds(),l=(n||this.getView().getResolution())/72,h=o.getTopLeft().floor(),u=o.getBottomRight().ceil(),c=new f(u.subtract(h)),d=c.multiply(l);if(a.setSize(d,!0),!d.isZero()){var p=a.getContext(!0),g=(new _).scale(l).translate(h.negate());p.save(),g.applyToContext(p),this.draw(p,new s({matrices:[g]})),p.restore()}return a._matrix.set((new _).translate(h.add(c.divide(2))).scale(1/l)),(r===e||r)&&a.insertAbove(this),a},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(d.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return v.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new R.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof w&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){var t=arguments;return this._hitTest(d.read(t),E.getOptions(t))}function e(){var t=arguments,e=d.read(t),i=E.getOptions(t),n=[];return this._hitTest(e,new s({all:n},i)),n}function i(t,e,i,n){var s=this._children;if(s)for(var r=s.length-1;r>=0;r--){var a=s[r],o=a!==n&&a._hitTest(t,e,i);if(o&&!e.all)return o}return null}return x.inject({hitTest:t,hitTestAll:e,_hitTest:i}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var n=this._matrix,r=i?i.appended(n):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new f(R._getStrokePadding(a,n._shiftless().invert()));if(!(t=n._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var l,h,u=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==s.hyphenate(this._class)||e.class&&!(this instanceof e.class)),c=e.match,d=this;function p(t){return t&&c&&!c(t)&&(t=null),t&&e.all&&e.all.push(t),t}function g(e,i){var n=i?l["get"+i]():d.getPosition();if(t.subtract(n).divide(o).length<=1)return new E(e,d,{name:i?s.hyphenate(i):e,point:n})}var v=e.position,m=e.center,_=e.bounds;if(u&&this._parent&&(v||m||_)){if((m||_)&&(l=this.getInternalBounds()),!(h=v&&g("position")||m&&g("center","Center"))&&_)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!h;x++)h=g("bounds",y[x]);h=p(h)}return h||(h=this._hitTestChildren(t,e,r)||u&&p(this._hitTestSelf(t,e,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),h&&h.point&&(h.point=n.transform(h.point)),h},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new E("fill",this)},matches:function(t,e){var i=typeof t;if("object"===i){for(var n in t)if(t.hasOwnProperty(n)&&!this.matches(n,t[n]))return!1;return!0}if("function"===i)return t(this);if("match"===t)return e(this);var r=/^(empty|editable)$/.test(t)?this["is"+s.capitalize(t)]():"type"===t?s.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;r=this._class}if("function"==typeof e)return!!e(r);if(e){if(e.test)return e.test(r);if(s.isPlainObject(e))return function t(e,i){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],a=i[n];if(s.isPlainObject(r)&&s.isPlainObject(a)){if(!t(r,a))return!1}else if(!s.equals(r,a))return!1}return!0}(e,r)}return s.equals(r,e)},getItems:function(t){return w._getItems(this,t,this._matrix)},getItem:function(t){return w._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,i,n,r,a){if(!r){var o="object"==typeof i&&i,l=o&&o.overlapping,h=o&&o.inside,u=(x=l||h)&&v.read([x]);r={items:[],recursive:o&&!1!==o.recursive,inside:!!h,overlapping:!!l,rect:u,path:l&&new R.Rectangle({rectangle:u,insert:!1})},o&&(i=s.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var c=e._children,d=r.items;n=(u=r.rect)&&(n||new _);for(var p=0,f=c&&c.length;p<f;p++){var g=c[p],m=n&&n.appended(g._matrix),y=!0;if(u){var x=g.getBounds(m);if(!u.intersects(x))continue;u.contains(x)||r.overlapping&&(x.contains(u)||r.path.intersects(g,m))||(y=!1)}if(y&&g.matches(i)&&(d.push(g),a))break;if(!1!==r.recursive&&t(g,i,m,r,a),a&&d.length>0)break}return d}}},{importJSON:function(t){var e=s.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){for(var n={},r=(e=s.slice(e)).length-1;r>=0;r--){var a=(u=e[r])&&u._id;!u||n[a]?e.splice(r,1):(u._remove(!1,!0),n[a]=!0)}s.splice(i,e,t,0);for(var o=this._project,l=o._changes,h=(r=0,e.length);r<h;r++){var u,c=(u=e[r])._name;u._parent=this,u._setProject(o,!0),c&&u.setName(c),l&&u._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),n=t!==this&&i?this:null;return n&&(n._remove(!1,!0),i._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(e,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,n=this._name,s=i[n],r=s?s.indexOf(this):-1;-1!==r&&(e[n]==this&&delete e[n],s.splice(r,1),s.length?e[n]=s[0]:delete i[n])}},_remove:function(t,e){var i=this._getOwner(),n=this._project,r=this._index;return this._style&&this._style._dispose(),!!i&&(this._name&&this._removeNamed(),null!=r&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),s.splice(i._children,null,r,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=s.pick(e,this._children.length);for(var i=s.splice(this._children,null,t,e-t),n=i.length-1;n>=0;n--)i[n]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,i=e?e.length:0;if(t){for(var n=0;n<i;n++)if(!e[n].isEmpty(t))return!1;return!0}return!i},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var i=e(this),n=e(t),s=0,r=Math.min(i.length,n.length);s<r;s++)if(i[s]!=n[s])return i[s]._index<n[s]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},s.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var i=arguments,n=(e?s:d).read(i),r=d.read(i,0,{readNull:!0});return this.transform((new _)[t](n,r||this.getPosition(!0)))}}),{translate:function(){var t=new _;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i){var n=this._matrix,s=t&&!t.isIdentity(),r=i&&this._canApplyMatrix||this._applyMatrix&&(s||!n.isIdentity()||e&&this._children);if(!s&&!r)return this;if(s){!t.isInvertible()&&n.isInvertible()&&(n._backup=n.getValues()),n.prepend(t,!0);var a=this._style,o=a.getFillColor(!0),l=a.getStrokeColor(!0);o&&o.transform(t),l&&l.transform(t)}if(r&&(r=this._transformContent(n,e,i))){var h=this._pivot;h&&n._transformPoint(h,h,!0),n.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var u=this._bounds,c=this._position;(s||r)&&this._changed(25);var d=s&&u&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var p in u){var f=u[p];if(f.nonscaling)delete u[p];else if(r||!f.internal){var g=f.rect;t._transformBounds(g,g)}}this._bounds=u;var v=u[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else s&&c&&this._pivot&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,e,i){var n=this._children;if(n){for(var s=0,r=n.length;s<r;s++)n[s].transform(t,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(d.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(d.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(d.read(arguments))},localToParent:function(){return this._matrix._transformPoint(d.read(arguments))},fitBounds:function(t,e){t=v.read(arguments);var i=this.getBounds(),n=i.height/i.width,s=t.height/t.width,r=(e?n>s:n<s)?t.width/i.width:t.height/i.height,a=new v(new d,new f(i.width*r,i.height*r));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,i){var n=this._style,s=this._matrix;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t,s)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t,s),t.lineWidth=n.getStrokeWidth();var r=n.getStrokeJoin(),a=n.getStrokeCap(),o=n.getMiterLimit();if(r&&(t.lineJoin=r),a&&(t.lineCap=a),o&&(t.miterLimit=o),at.support.nativeDash){var l=n.getDashArray(),h=n.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=h):(t.mozDash=l,t.mozDashOffset=h))}}if(n.hasShadow()){var u=e.pixelRatio||1,c=i._shiftless().prepend((new _).scale(u,u)),p=c.transform(new d(n.getShadowBlur(),0)),f=c.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=p.getLength(),t.shadowOffsetX=f.x,t.shadowOffsetY=f.y}},draw:function(t,e,i){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var n=e.matrices,s=e.viewMatrix,r=this._matrix,a=n[n.length-1].appended(r);if(a.isInvertible()){s=s?s.appended(a):a,n.push(a),e.updateMatrix&&(this._globalMatrix=a);var o,l,h,c=this._blendMode,d=u.clamp(this._opacity,0,1),p="normal"===c,f=nt.nativeModes[c],g=p&&1===d||e.dontStart||e.clip||(f||p&&d<1)&&this._canComposite(),v=e.pixelRatio||1;if(!g){var m=this.getStrokeBounds(s);if(!m.width||!m.height)return void n.pop();h=e.offset,l=e.offset=m.getTopLeft().floor(),o=t,t=it.getContext(m.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var _=i?i.appended(r):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!g&&e.clipItem,x=!_||y;if(g?(t.globalAlpha=d,f&&(t.globalCompositeOperation=c)):x&&t.translate(-l.x,-l.y),x&&(g?r:s).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),_){t.setTransform(v,0,0,v,0,0);var w=e.offset;w&&t.translate(-w.x,-w.y)}this._draw(t,e,s,_),t.restore(),n.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),g||(nt.process(c,t,o,d,l.subtract(h).multiply(v)),it.release(t),e.offset=h)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof N)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,n,s){var r=this._selection,a=1&r,o=2&r||a&&this._selectBounds,l=4&r;if(this._drawSelected||(a=!1),(a||o||l)&&this._isUpdated(s)){var h,u=this.getSelectedColor(!0)||(h=this.getLayer())&&h.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),d=i/2;if(t.strokeStyle=t.fillStyle=u?u.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,c,n),l){var p=this.getPosition(!0),f=this._parent,g=f?f.localToGlobal(p):p,v=g.x,m=g.y;t.beginPath(),t.arc(v,m,d,0,2*Math.PI,!0),t.stroke();for(var _=[[0,-1],[1,0],[0,1],[-1,0]],y=d,x=i+1,w=0;w<4;w++){var A=_[w],b=A[0],C=A[1];t.moveTo(v+b*y,m+C*y),t.lineTo(v+b*x,m+C*x),t.stroke()}}if(o){var k=c._transformCorners(this.getInternalBounds());for(t.beginPath(),w=0;w<8;w++)t[w?"lineTo":"moveTo"](k[w],k[++w]);for(t.closePath(),t.stroke(),w=0;w<8;w++)t.fillRect(k[w]-d,k[++w]-d,i,i)}}},_canComposite:function(){return!1}},s.each(["down","drag","up","move"],(function(t){this["removeOn"+s.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,n=this._project,s=n._removeSets=n._removeSets||{};s[i]=s[i]||{},s[i][this._id]=this}return this}}),{tween:function(t,e,i){i||(i=e,e=t,t=null,i||(i=e,e=null));var n=i&&i.easing,s=i&&i.start,r=null!=i&&("number"==typeof i?i:i.duration),a=new tt(this,t,e,r,n,s);return r&&this.on("frame",(function t(e){a._handleFrame(1e3*e.time),a.running||this.off("frame",t)})),a},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),A=w.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(i){t.base.call(this,i),2050&i&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var i=this._children,n=0,s=i.length;n<s;n++)if(i[n]._clipMask){t=i[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,i){var n=this._getClipItem();return n?n._getCachedBounds(n._matrix.prepended(e),s.set({},i,{stroke:!1})):t.base.call(this,e,i)},_hitTestChildren:function t(e,i,n){var s=this._getClipItem();return(!s||s.contains(e))&&t.base.call(this,e,i,n,s)},_draw:function(t,e){var i=e.clip,n=!i&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var s=this._children,r=0,a=s.length;r<a;r++){var o=s[r];o!==n&&o.draw(t,e)}}}),b=A.extend({_class:"Layer",initialize:function(){A.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),C=w.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&s.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new g(t.width,t.height,this,"setSize")},setSize:function(){var t=f.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,i=t.width,n=t.height;"rectangle"===e?this._radius.set(f.min(this._radius,t.divide(2).abs())):"circle"===e?(i=n=(i+n)/2,this._radius=i/2):"ellipse"===e&&this._radius._set(i/2,n/2),this._size._set(i,n),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new g(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var i=2*t;this._radius=t,this._size._set(i,i)}else if(t=f.read(arguments),this._radius){if(this._radius.equals(t))return;this._radius.set(t),"rectangle"===e?(i=f.max(this._size,t.multiply(2)),this._size.set(i)):"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var i=new(R[s.capitalize(this._type)])({center:new d,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),at.settings.applyMatrix&&i.setApplyMatrix(!0),(t===e||t)&&i.insertAbove(this),i},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,i,n){var s=this._style,r=s.hasFill(),a=s.hasStroke(),o=e.dontFinish||e.clip,l=!n;if(r||a||o){var h=this._type,u=this._radius,c="circle"===h;if(e.dontStart||t.beginPath(),l&&c)t.arc(0,0,u,0,2*Math.PI,!0);else{var d=c?u:u.width,p=c?u:u.height,f=this._size,g=f.width,v=f.height;if(l&&"rectangle"===h&&0===d&&0===p)t.rect(-g/2,-v/2,g,v);else{var m=g/2,_=v/2,y=.44771525016920644,x=d*y,w=p*y,A=[-m,-_+p,-m,-_+w,-m+x,-_,-m+d,-_,m-d,-_,m-x,-_,m,-_+w,m,-_+p,m,_-p,m,_-w,m-x,_,m-d,_,-m+d,_,-m+x,_,-m,_-w,-m,_-p];n&&n.transform(A,A,32),t.moveTo(A[0],A[1]),t.bezierCurveTo(A[2],A[3],A[4],A[5],A[6],A[7]),m!==d&&t.lineTo(A[8],A[9]),t.bezierCurveTo(A[10],A[11],A[12],A[13],A[14],A[15]),_!==p&&t.lineTo(A[16],A[17]),t.bezierCurveTo(A[18],A[19],A[20],A[21],A[22],A[23]),m!==d&&t.lineTo(A[24],A[25]),t.bezierCurveTo(A[26],A[27],A[28],A[29],A[30],A[31])}}t.closePath()}o||!r&&!a||(this._setStyles(t,e,i),r&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new v(this._size).setCenter(0,0),n=this._style,s=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(i=t._transformBounds(i)),s?i.expand(R._getStrokePadding(s,this._getStrokeMatrix(t,e))):i}},new function(){function t(t,e,i){var n=t._radius;if(!n.isZero())for(var s=t._size.divide(2),r=1;r<=4;r++){var a=new d(r>1&&r<4?-1:1,r>2?-1:1),o=a.multiply(s),l=o.subtract(a.multiply(n));if(new v(i?o.add(a.multiply(i)):o,l).contains(e))return{point:l,quadrant:r}}}function e(t,e,i,n){var s=t.divide(e);return(!n||s.isInQuadrant(n))&&s.subtract(s.normalize()).multiply(e).divide(i).length<=1}return{_contains:function e(i){if("rectangle"===this._type){var n=t(this,i);return n?i.subtract(n.point).divide(this._radius).getLength()<=1:e.base.call(this,i)}return i.divide(this.size).getLength()<=.5},_hitTestSelf:function i(n,s,r,a){var o=!1,l=this._style,h=s.stroke&&l.hasStroke(),u=s.fill&&l.hasFill();if(h||u){var c=this._type,d=this._radius,p=h?l.getStrokeWidth()/2:0,f=s._tolerancePadding.add(R._getStrokePadding(p,!l.getStrokeScaling()&&a));if("rectangle"===c){var g=f.multiply(2),m=t(this,n,g);if(m)o=e(n.subtract(m.point),d,f,m.quadrant);else{var _=new v(this._size).setCenter(0,0),y=_.expand(g),x=_.expand(g.negate());o=y._containsPoint(n)&&!x._containsPoint(n)}}else o=e(n,d,f)}return o?new E(h?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,i,n,r){var a=s.create(C.prototype);return a._type=t,a._size=i,a._radius=n,a._initialize(s.getNamed(r),e),a}return{Circle:function(){var e=arguments,i=d.readNamed(e,"center"),n=s.readNamed(e,"radius");return t("circle",i,new f(2*n),n,e)},Rectangle:function(){var e=arguments,i=v.readNamed(e,"rectangle"),n=f.min(f.readNamed(e,"radius"),i.getSize(!0).divide(2));return t("rectangle",i.getCenter(!0),i.getSize(!0),n,e)},Ellipse:function(){var e=arguments,i=C._readEllipse(e),n=i.radius;return t("ellipse",i.center,n.multiply(2),n,e)},_readEllipse:function(t){var e,i;if(s.hasNamed(t,"radius"))e=d.readNamed(t,"center"),i=f.readNamed(t,"radius");else{var n=v.readNamed(t,"rectangle");e=n.getCenter(!0),i=n.getSize(!0).divide(2)}return{center:e,radius:i}}}}}),k=w.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,i){if(!this._initialize(t,i!==e&&d.read(arguments))){var s,r=typeof t,a="string"===r?n.getElementById(t):"object"===r?t:null;if(a&&a!==w.NO_INSERT)if(a.getContext||null!=a.naturalHeight)s=a;else if(a){var o=f.read(arguments);o.isZero()||(s=it.getCanvas(o))}s?this.setImage(s):this.setSource(t)}this._size||(this._size=new f,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var n=it.getCanvas(t._size);n.getContext("2d").drawImage(i,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new g(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var i=f.read(arguments);if(i.equals(this._size))e&&this.clear();else if(i.width>0&&i.height>0){var n=!e&&this.getElement();this._setImage(it.getCanvas(i)),n&&this.getContext(!0).drawImage(n,0,0,i.width,i.height)}else this._canvas&&it.release(this._canvas),this._size=i.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new d(0,0).transform(t),i=new d(1,0).transform(t).subtract(e),n=new d(0,1).transform(t).subtract(e);return new f(72/i.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function i(t){var i=e.getView(),n=t&&t.type||"load";i&&e.responds(n)&&(at=i._scope,e.emit(n,new W(t)))}this._setImage(t),this._loaded?setTimeout(i,0):t&&H.add(t,{load:function(n){e._setImage(t),i(n)},error:i})},_setImage:function(t){this._canvas&&it.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new f(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=it.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){it.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var i=new t.Image,n=this._crossOrigin;n&&(i.crossOrigin=n),e&&(i.src=e),this.setImage(i)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing="string"==typeof t?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=v.read(arguments),e=it.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=v.read(arguments),e=new k(w.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=d.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof B?(i=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new v(t):"x"in t&&(e=new v(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=Math.min(e.width,32),r=Math.min(e.height,32),a=k._sampleContext;a?a.clearRect(0,0,33,33):a=k._sampleContext=it.getContext(new f(32)),a.save();var o=(new _).scale(n/e.width,r/e.height).translate(-e.x,-e.y);o.applyToContext(a),i&&i.draw(a,new s({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var l=this.getElement(),h=this._size;l&&a.drawImage(l,-h.width/2,-h.height/2),a.restore();for(var u=a.getImageData(.5,.5,Math.ceil(n),Math.ceil(r)).data,c=[0,0,0],d=0,p=0,g=u.length;p<g;p+=4){var m=u[p+3];d+=m,m/=255,c[0]+=u[p]*m,c[1]+=u[p+1]*m,c[2]+=u[p+2]*m}for(p=0;p<3;p++)c[p]/=d;return d?U.read(c):null},getPixel:function(){var t=d.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new U("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=d.read(t),i=U.read(t),n=i._convert("rgb"),s=i._alpha,r=this.getContext(!0),a=r.createImageData(1,1),o=a.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=s?255*s:255,r.putImageData(a,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=f.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=v.read(arguments);return t.isEmpty()&&(t=new v(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var e=d.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,e){var i=new v(this._size).setCenter(0,0);return t?t._transformBounds(i):i},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new E("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,i){var n=this.getElement();if(n&&n.width>0&&n.height>0){t.globalAlpha=u.clamp(this._opacity,0,1),this._setStyles(t,e,i);var s=this._smoothing,r="off"===s;q.setPrefixed(t,r?"imageSmoothingEnabled":"imageSmoothingQuality",!r&&s),t.drawImage(n,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),S=w.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,i){this._initialize(t,i!==e&&d.read(arguments,1))||this.setDefinition(t instanceof I?t:new I(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i){var n=e.extend({all:!1}),s=this._definition._item._hitTest(t,n,i);return s&&(s.item=this),s},_draw:function(t,e){this._definition._item.draw(t,e)}}),I=s.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=c.get(),this.project=at.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return s.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&w._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new d),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new S(this,t)},clone:function(){return new I(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),E=s.extend({_class:"HitResult",initialize:function(t,e,i){this.type=t,this.item=e,i&&this.inject(i)},statics:{getOptions:function(t){var e=t&&s.read(t);return new s({type:null,tolerance:at.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),T=s.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,i,n,s,r,a){var o,l,h,u,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(o=t.point,l=t.handleIn,h=t.handleOut,u=t.selection):(o=t,l=i,h=n,u=s):(o=[t,i],l=n!==e?[n,s]:null,h=r!==e?[r,a]:null)),new P(o,this,"_point"),new P(l,this,"_handleIn"),new P(h,this,"_handleOut"),u&&this.setSelection(u)},_serialize:function(t,e){var i=this._point,n=this._selection,r=n||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return n&&r.push(n),s.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i,n=e._curves,s=this._index;n&&(t&&t!==this._point&&t!==this._handleIn||!(i=s>0?n[s-1]:e._closed?n[n.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=n[s])||i._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(d.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(d.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(d.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(257))},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new M(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,i,n){var s=t||{},r=s.type,a=s.factor,o=this.getPrevious(),l=this.getNext(),h=(o||this)._point,u=this._point,c=(l||this)._point,p=h.getDistance(u),f=u.getDistance(c);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(o&&l){var g=h.subtract(c),v=a===e?.4:a,m=v*p/(p+f);i||this.setHandleIn(g.multiply(m)),n||this.setHandleOut(g.multiply(m-v))}}else{var _=a===e?.5:a,y=Math.pow(p,_),x=y*y,w=Math.pow(f,_),A=w*w;if(!i&&o){var b=2*A+3*w*y+x,C=3*w*(w+y);this.setHandleIn(0!==C?new d((A*h._x+b*u._x-x*c._x)/C-u._x,(A*h._y+b*u._y-x*c._y)/C-u._y):new d)}!n&&l&&(b=2*x+3*y*w+A,C=3*y*(y+w),this.setHandleOut(0!==C?new d((x*c._x+b*u._x-A*h._x)/C-u._x,(x*c._y+b*u._y-A*h._y)/C-u._y):new d))}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new T(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new T(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var n=1-i,s=i,r=t._point,a=e._point,o=t._handleIn,l=e._handleIn,h=e._handleOut,u=t._handleOut;this._point._set(n*r._x+s*a._x,n*r._y+s*a._y,!0),this._handleIn._set(n*o._x+s*l._x,n*o._y+s*l._y,!0),this._handleOut._set(n*u._x+s*h._x,n*u._y+s*h._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var n=this._point,s=i&&this._handleIn.isZero()?null:this._handleIn,r=i&&this._handleOut.isZero()?null:this._handleOut,a=n._x,o=n._y,l=2;return e[0]=a,e[1]=o,s&&(e[l++]=s._x+a,e[l++]=s._y+o),r&&(e[l++]=r._x+a,e[l++]=r._y+o),t&&(t._transformCoordinates(e,e,l/2),a=e[0],o=e[1],i?(n._x=a,n._y=o,l=2,s&&(s._x=e[l++]-a,s._y=e[l++]-o),r&&(r._x=e[l++]-a,r._y=e[l++]-o)):(s||(e[l++]=a,e[l++]=o),r||(e[l++]=a,e[l++]=o))),e}}),P=d.extend({initialize:function(t,i,n){var s,r,a;if(t)if((s=t[0])!==e)r=t[1];else{var o=t;(s=o.x)===e&&(s=(o=d.read(arguments)).x),r=o.y,a=o.selected}else s=r=0;this._x=s,this._y=r,this._owner=i,i[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=u.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),O=s.extend({_class:"Curve",beans:!0,initialize:function(t,e,i,n,s,r,a,o){var l,h,u,c,d,p,f=arguments.length;3===f?(this._path=t,l=e,h=i):f?1===f?"segment1"in t?(l=new T(t.segment1),h=new T(t.segment2)):"point1"in t?(u=t.point1,d=t.handle1,p=t.handle2,c=t.point2):Array.isArray(t)&&(u=[t[0],t[1]],c=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],p=[t[4]-t[6],t[5]-t[7]]):2===f?(l=new T(t),h=new T(e)):4===f?(u=t,d=e,p=i,c=n):8===f&&(u=[t,e],c=[a,o],d=[i-t,n-e],p=[s-a,r-o]):(l=new T,h=new T),this._segment1=l||new T(u,null,d),this._segment2=h||new T(c,p,null)},_serialize:function(t,e){return s.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=e},clone:function(){return new O(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return O.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(d.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(d.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(d.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(d.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return O.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;i<8;i+=2)e.push(new d(t[i],t[i+1]));return e}},{getLength:function(){return null==this._length&&(this._length=O.getLength(this.getValues(),0,1)),this._length},getArea:function(){return O.getArea(this.getValues())},getLine:function(){return new y(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new O(O.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return O.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=null;if(t>=1e-8&&t<=.99999999){var n=O.subdivide(this.getValues(),t),s=n[0],r=n[1],a=e||this.hasHandles(),o=this._segment1,l=this._segment2,h=this._path;a&&(o._handleOut._set(s[2]-s[0],s[3]-s[1]),l._handleIn._set(r[4]-r[6],r[5]-r[7]));var u=s[6],c=s[7],p=new T(new d(u,c),a&&new d(s[4]-u,s[5]-c),a&&new d(r[2]-u,r[3]-c));h?(h.insert(o._index+1,p),i=this.getNext()):(this._segment2=p,this._changed(),i=new O(p,l))}return i},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,i){return this.divideAtTime(t===e?.5:i?t:this.getTimeAt(t))},split:function(t,i){return this.splitAtTime(t===e?.5:i?t:this.getTimeAt(t))},reversed:function(){return new O(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,n){var s=t._point,r=t._handleOut,a=e._handleIn,o=e._point,l=s.x,h=s.y,u=o.x,c=o.y,d=n?[l,h,l,h,u,c,u,c]:[l,h,l+r._x,h+r._y,u+a._x,c+a._y,u,c];return i&&i._transformCoordinates(d,d,4),d},subdivide:function(t,i){var n=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5],h=t[6],u=t[7];i===e&&(i=.5);var c=1-i,d=c*n+i*r,p=c*s+i*a,f=c*r+i*o,g=c*a+i*l,v=c*o+i*h,m=c*l+i*u,_=c*d+i*f,y=c*p+i*g,x=c*f+i*v,w=c*g+i*m,A=c*_+i*x,b=c*y+i*w;return[[n,s,d,p,_,y,A,b],[A,b,x,w,v,m,h,u]]},getMonoCurves:function(t,e){var i=[],n=e?0:1,s=t[n+0],r=t[n+2],a=t[n+4],o=t[n+6];if(s>=r==r>=a&&r>=a==a>=o||O.isStraight(t))i.push(t);else{var l=3*(r-a)-s+o,h=2*(s+a)-4*r,c=r-s,d=[],p=u.solveQuadratic(l,h,c,d,1e-8,.99999999);if(p){d.sort();var f=d[0],g=O.subdivide(t,f);i.push(g[0]),p>1&&(f=(d[1]-f)/(1-f),g=O.subdivide(g[1],f),i.push(g[0])),i.push(g[1])}else i.push(t)}return i},solveCubic:function(t,e,i,n,s,r){var a=t[e],o=t[e+2],l=t[e+4],h=t[e+6],c=0;if(!(a<i&&h<i&&o<i&&l<i||a>i&&h>i&&o>i&&l>i)){var d=3*(o-a),p=3*(l-o)-d,f=h-a-d-p;c=u.solveCubic(f,p,d,a-i,n,s,r)}return c},getTimeOf:function(t,e){var i=new d(t[0],t[1]),n=new d(t[6],t[7]),s=1e-7;if(null===(e.isClose(i,1e-12)?0:e.isClose(n,1e-12)?1:null))for(var r=[e.x,e.y],a=[],o=0;o<2;o++)for(var l=O.solveCubic(t,o,r[o],a,0,1),h=0;h<l;h++){var u=a[h];if(e.isClose(O.getPoint(t,u),s))return u}return e.isClose(i,s)?0:e.isClose(n,s)?1:null},getNearestTime:function(t,e){if(O.isStraight(t)){var i=t[0],n=t[1],s=t[6]-i,r=t[7]-n,a=s*s+r*r;if(0===a)return 0;var o=((e.x-i)*s+(e.y-n)*r)/a;return o<1e-12?0:o>.999999999999?1:O.getTimeOf(t,new d(i+o*s,n+o*r))}var l=1/0,h=0;function u(i){if(i>=0&&i<=1){var n=e.getDistance(O.getPoint(t,i),!0);if(n<l)return l=n,h=i,!0}}for(var c=0;c<=100;c++)u(c/100);for(var p=.005;p>1e-8;)u(h-p)||u(h+p)||(p/=2);return h},getPart:function(t,e,i){var n=e>i;if(n){var s=e;e=i,i=s}return e>0&&(t=O.subdivide(t,e)[1]),i<1&&(t=O.subdivide(t,(i-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],l=t[6],h=t[7],u=3*s-2*i-l,c=3*r-2*n-h,d=3*a-2*l-i,p=3*o-2*h-n;return Math.max(u*u,d*d)+Math.max(c*c,p*p)<=16*e*e},getArea:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],l=t[7];return 3*((l-i)*(n+r)-(o-e)*(s+a)+s*(e-r)-n*(i-a)+l*(r+e/3)-o*(a+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),n=[0,0],s=0;s<2;s++)O._addBounds(t[s],t[s+2],t[s+4],t[s+6],s,0,e,i,n);return new v(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,n,s,r,a,o,l){function h(t,e){var i=t-e,n=t+e;i<a[s]&&(a[s]=i),n>o[s]&&(o[s]=n)}r/=2;var c=a[s]+r,d=o[s]-r;if(t<c||e<c||i<c||n<c||t>d||e>d||i>d||n>d)if(e<t!=e<n&&i<t!=i<n)h(t,0),h(n,0);else{var p=3*(e-i)-t+n,f=2*(t+i)-4*e,g=e-t,v=u.solveQuadratic(p,f,g,l);h(n,0);for(var m=0;m<v;m++){var _=l[m],y=1-_;1e-8<=_&&_<=.99999999&&h(y*y*y*t+3*y*y*_*e+3*y*_*_*i+_*_*_*n,r)}}}}},s.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=R[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),s.each({isStraight:function(t,e,i,n){if(e.isZero()&&i.isZero())return!0;var s=n.subtract(t);if(s.isZero())return!1;if(s.isCollinear(e)&&s.isCollinear(i)){var r=new y(t,n);if(r.getDistance(t.add(e))<1e-7&&r.getDistance(n.add(i))<1e-7){var a=s.dot(s),o=s.dot(e)/a,l=s.dot(i)/a;return o>=0&&o<=1&&l<=0&&l>=-1}}return!1},isLinear:function(t,e,i,n){var s=n.subtract(t).divide(3);return e.equals(s)&&i.negate().equals(s)}},(function(t,e){this[e]=function(e){var i=this._segment1,n=this._segment2;return t(i._point,i._handleOut,n._handleIn,n._point,e)},this.statics[e]=function(e,i){var n=e[0],s=e[1],r=e[6],a=e[7];return t(new d(n,s),new d(e[2]-n,e[3]-s),new d(e[4]-r,e[5]-a),new d(r,a),i)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new M(this,t):null},getTimeAt:function(t,e){return O.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=d.read(arguments);return t.isZero()?[]:O.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(d.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return O.getTimeOf(this.getValues(),d.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=d.read(arguments),e=this.getValues(),i=O.getNearestTime(e,t),n=O.getPoint(e,i);return new M(this,i,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return s.each(t,(function(t){this[t+"At"]=function(e,i){var n=this.getValues();return O[t](n,i?e:O.getTimeAt(n,e))},this[t+"AtTime"]=function(e){return O[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=t[6],l=t[7],h=9*(n-r)+3*(o-e),u=6*(e+r)-12*n,c=3*(n-e),d=9*(s-a)+3*(l-i),p=6*(i+a)-12*s,f=3*(s-i);return function(t){var e=(h*t+u)*t+c,i=(d*t+p)*t+f;return Math.sqrt(e*e+i*i)}}function i(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,i,n){if(null==e||e<0||e>1)return null;var s=t[0],r=t[1],a=t[2],o=t[3],l=t[4],h=t[5],c=t[6],p=t[7],f=u.isZero;f(a-s)&&f(o-r)&&(a=s,o=r),f(l-c)&&f(h-p)&&(l=c,h=p);var g,v,m=3*(a-s),_=3*(l-a)-m,y=c-s-m-_,x=3*(o-r),w=3*(h-o)-x,A=p-r-x-w;if(0===i)g=0===e?s:1===e?c:((y*e+_)*e+m)*e+s,v=0===e?r:1===e?p:((A*e+w)*e+x)*e+r;else{var b=1e-8,C=1-b;if(e<b?(g=m,v=x):e>C?(g=3*(c-l),v=3*(p-h)):(g=(3*y*e+2*_)*e+m,v=(3*A*e+2*w)*e+x),n){0===g&&0===v&&(e<b||e>C)&&(g=l-a,v=h-o);var k=Math.sqrt(g*g+v*v);k&&(g/=k,v/=k)}if(3===i){l=6*y*e+2*_,h=6*A*e+2*w;var S=Math.pow(g*g+v*v,1.5);g=0!==S?(g*h-v*l)/S:0,v=0}}return 2===i?new d(v,-g):new d(g,v)}return{statics:{classify:function(t){var i=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],l=t[6],h=t[7],c=s*(n-h)+r*(l-i)+i*h-n*l,d=3*(a*(r-n)+o*(i-s)+s*n-r*i),p=d-c,f=p-c+(i*(h-o)+n*(a-l)+l*o-h*a),g=Math.sqrt(f*f+p*p+d*d),v=0!==g?1/g:0,m=u.isZero,_="serpentine";function y(t,i,n){var s=i!==e,r=s&&i>0&&i<1,a=s&&n>0&&n<1;return!s||(r||a)&&("loop"!==t||r&&a)||(t="arch",r=a=!1),{type:t,roots:r||a?r&&a?i<n?[i,n]:[n,i]:[r?i:n]:null}}if(p*=v,d*=v,m(f*=v))return m(p)?y(m(d)?"line":"quadratic"):y(_,d/(3*p));var x=3*p*p-4*f*d;if(m(x))return y("cusp",p/(2*f));var w=x>0?Math.sqrt(x/3):Math.sqrt(-x),A=2*f;return y(x>0?_:"loop",(p+w)/A,(p-w)/A)},getLength:function(n,s,r,a){if(s===e&&(s=0),r===e&&(r=1),O.isStraight(n)){var o=n;r<1&&(o=O.subdivide(o,r)[0],s/=r),s>0&&(o=O.subdivide(o,s)[1]);var l=o[6]-o[0],h=o[7]-o[1];return Math.sqrt(l*l+h*h)}return u.integrate(a||t(n),s,r,i(s,r))},getTimeAt:function(n,s,r){if(r===e&&(r=s<0?1:0),0===s)return r;var a=Math.abs,o=s>0,l=o?r:0,h=o?1:r,c=t(n),d=O.getLength(n,l,h,c),p=a(s)-d;if(a(p)<1e-12)return o?h:l;if(p>1e-12)return null;var f=s/d,g=0;return u.findRoot((function(t){return g+=u.integrate(c,r,t,i(r,t)),r=t,g-s}),c,r+f,l,h,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],a=t[5],o=3*n-e-3*r+t[6],l=3*e-6*n+3*r,h=-3*e+3*n,c=3*s-i-3*a+t[7],d=3*i-6*s+3*a,p=-3*i+3*s,f=[];return u.solveCubic(9*(o*o+c*c),9*(o*l+d*c),2*(l*l+d*d)+3*(h*o+p*c),h*l+d*p,f,1e-8,.99999999),f.sort()}}}},new function(){function t(t,e,i,n,s,r,a){var o=!a&&i.getPrevious()===s,l=!a&&i!==s&&i.getNext()===s,h=1e-8,u=1-h;if(null!==n&&n>=(o?h:0)&&n<=(l?u:1)&&null!==r&&r>=(l?h:0)&&r<=(o?u:1)){var c=new M(i,n,null,a),d=new M(s,r,null,a);c._intersection=d,d._intersection=c,e&&!e(c)||M.insert(t,c,!0)}}function e(n,s,r,a,o,l,h,u,c,d,p,f,g){if(++c>=4096||++u>=40)return c;var v,m,_=s[0],x=s[1],w=s[6],A=s[7],b=y.getSignedDistance,C=b(_,x,w,A,s[2],s[3]),k=b(_,x,w,A,s[4],s[5]),S=C*k>0?3/4:4/9,I=S*Math.min(0,C,k),E=S*Math.max(0,C,k),T=b(_,x,w,A,n[0],n[1]),P=b(_,x,w,A,n[2],n[3]),M=b(_,x,w,A,n[4],n[5]),B=b(_,x,w,A,n[6],n[7]),R=function(t,e,i,n){var s,r=[0,t],a=[1/3,e],o=[2/3,i],l=[1,n],h=e-(2*t+n)/3,u=i-(t+2*n)/3;if(h*u<0)s=[[r,a,l],[r,o,l]];else{var c=h/u;s=[c>=2?[r,a,l]:c<=.5?[r,o,l]:[r,a,o,l],[r,l]]}return(h||u)<0?s.reverse():s}(T,P,M,B),N=R[0],L=R[1];if(0===C&&0===k&&0===T&&0===P&&0===M&&0===B||null==(v=i(N,L,I,E))||null==(m=i(N.reverse(),L.reverse(),I,E)))return c;var D=d+(p-d)*v,V=d+(p-d)*m;if(Math.max(g-f,V-D)<1e-9){var z=(D+V)/2,U=(f+g)/2;t(o,l,h?a:r,h?U:z,h?r:a,h?z:U)}else{n=O.getPart(n,v,m);var j=g-f;if(m-v>.8)if(V-D>j)z=(D+V)/2,c=e(s,(F=O.subdivide(n,.5))[0],a,r,o,l,!h,u,c,f,g,D,z),c=e(s,F[1],a,r,o,l,!h,u,c,f,g,z,V);else{var F;U=(f+g)/2,c=e((F=O.subdivide(s,.5))[0],n,a,r,o,l,!h,u,c,f,U,D,V),c=e(F[1],n,a,r,o,l,!h,u,c,U,g,D,V)}else c=0===j||j>=1e-9?e(s,n,a,r,o,l,!h,u,c,f,g,D,V):e(n,s,r,a,o,l,h,u,c,D,V,f,g)}return c}function i(t,e,i,s){return t[0][1]<i?n(t,!0,i):e[0][1]>s?n(e,!1,s):t[0][0]}function n(t,e,i){for(var n=t[0][0],s=t[0][1],r=1,a=t.length;r<a;r++){var o=t[r][0],l=t[r][1];if(e?l>=i:l<=i)return l===i?o:n+(i-s)*(o-n)/(l-s);n=o,s=l}return null}function s(t,e,i,n,s){var r=u.isZero;if(r(n)&&r(s)){var a=O.getTimeOf(t,new d(e,i));return null===a?[]:[a]}for(var o=Math.atan2(-s,n),l=Math.sin(o),h=Math.cos(o),c=[],p=[],f=0;f<8;f+=2){var g=t[f]-e,v=t[f+1]-i;c.push(g*h-v*l,g*l+v*h)}return O.solveCubic(c,1,0,p,0,1),p}function r(e,i,n,r,a,o,l){for(var h=i[0],u=i[1],c=s(e,h,u,i[6]-h,i[7]-u),d=0,p=c.length;d<p;d++){var f=c[d],g=O.getPoint(e,f),v=O.getTimeOf(i,g);null!==v&&t(a,o,l?r:n,l?v:f,l?n:r,l?f:v)}}function a(e,i,n,s,r,a){var o=y.intersect(e[0],e[1],e[6],e[7],i[0],i[1],i[6],i[7]);o&&t(r,a,n,O.getTimeOf(e,o),s,O.getTimeOf(i,o))}function o(i,n,s,o,l,h){var u=1e-12,p=Math.min,f=Math.max;if(f(i[0],i[2],i[4],i[6])+u>p(n[0],n[2],n[4],n[6])&&p(i[0],i[2],i[4],i[6])-u<f(n[0],n[2],n[4],n[6])&&f(i[1],i[3],i[5],i[7])+u>p(n[1],n[3],n[5],n[7])&&p(i[1],i[3],i[5],i[7])-u<f(n[1],n[3],n[5],n[7])){var g=c(i,n);if(g)for(var v=0;v<2;v++){var m=g[v];t(l,h,s,m[0],o,m[1],!0)}else{var _=O.isStraight(i),y=O.isStraight(n),x=_&&y,w=_&&!y,A=l.length;if((x?a:_||y?r:e)(w?n:i,w?i:n,w?o:s,w?s:o,l,h,w,0,0,0,1,0,1),!x||l.length===A)for(v=0;v<4;v++){var b=v>>1,C=1&v,k=6*b,S=6*C,I=new d(i[k],i[k+1]),E=new d(n[S],n[S+1]);I.isClose(E,u)&&t(l,h,s,b,o,C)}}}return l}function h(e,i,n,s){var r=O.classify(e);if("loop"===r.type){var a=r.roots;t(n,s,i,a[0],i,a[1])}return n}function c(t,e){function i(t){var e=t[6]-t[0],i=t[7]-t[1];return e*e+i*i}var n=Math.abs,s=y.getDistance,r=1e-7,a=O.isStraight(t),o=O.isStraight(e),l=a&&o,h=i(t)<i(e),u=h?e:t,c=h?t:e,p=u[0],f=u[1],g=u[6]-p,v=u[7]-f;if(s(p,f,g,v,c[0],c[1],!0)<r&&s(p,f,g,v,c[6],c[7],!0)<r)!l&&s(p,f,g,v,u[2],u[3],!0)<r&&s(p,f,g,v,u[4],u[5],!0)<r&&s(p,f,g,v,c[2],c[3],!0)<r&&s(p,f,g,v,c[4],c[5],!0)<r&&(a=o=l=!0);else if(l)return null;if(a^o)return null;for(var m=[t,e],_=[],x=0;x<4&&_.length<2;x++){var w=1&x,A=1^w,b=x>>1,C=O.getTimeOf(m[w],new d(m[A][b?6:0],m[A][b?7:1]));if(null!=C){var k=w?[b,C]:[C,b];(!_.length||n(k[0]-_[0][0])>1e-8&&n(k[1]-_[0][1])>1e-8)&&_.push(k)}if(x>2&&!_.length)break}if(2!==_.length)_=null;else if(!l){var S=O.getPart(t,_[0][0],_[1][0]),I=O.getPart(e,_[0][1],_[1][1]);(n(I[2]-S[2])>r||n(I[3]-S[3])>r||n(I[4]-S[4])>r||n(I[5]-S[5])>r)&&(_=null)}return _}return{getIntersections:function(t){var e=this.getValues(),i=t&&t!==this&&t.getValues();return i?o(e,i,this,t,[]):h(e,this,[])},statics:{getOverlaps:c,getIntersections:function(t,e,i,n,s,r){var a=!e;a&&(e=t);for(var u=t.length,c=e.length,d=new Array(u),p=a?d:new Array(c),f=[],g=0;g<u;g++)d[g]=t[g].getValues(n);if(!a)for(g=0;g<c;g++)p[g]=e[g].getValues(s);for(var v=l.findCurveBoundsCollisions(d,p,1e-7),m=0;m<u;m++){var _=t[m],y=d[m];a&&h(y,_,f,i);var x=v[m];if(x)for(var w=0;w<x.length;w++){if(r&&f.length)return f;var A=x[w];if(!a||A>m){var b=e[A];o(y,p[A],_,b,f,i)}}}return f},getCurveLineIntersections:s,getTimesWithTangent:function(t,e){var i=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],l=t[6],h=t[7],c=e.normalize(),d=c.x,p=c.y,f=3*l-9*a+9*s-3*i,g=3*h-9*o+9*r-3*n,v=6*a-12*s+6*i,m=6*o-12*r+6*n,_=3*s-3*i,y=3*r-3*n,x=2*f*p-2*g*d,w=[];if(Math.abs(x)<u.CURVETIME_EPSILON){if(0!=(x=f*m-g*v)){var A=-(f*y-g*_)/x;A>=0&&A<=1&&w.push(A)}}else{var b=(v*v-4*f*_)*p*p+(-2*v*m+4*g*_+4*f*y)*d*p+(m*m-4*g*y)*d*d,C=v*p-m*d;if(b>=0&&0!=x){var k=Math.sqrt(b),S=-(C+k)/x,I=(-C+k)/x;S>=0&&S<=1&&w.push(S),I>=0&&I<=1&&w.push(I)}}return w}}}}),M=s.extend({_class:"CurveLocation",initialize:function(t,e,i,n,s){if(e>=.99999999){var r=t.getNext();r&&(e=0,t=r)}this._setCurve(t),this._time=e,this._point=i||t.getPointAtTime(e),this._overlap=n,this._distance=s,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),i=this.getTime();0===i?t=e._segment1:1===i?t=e._segment2:null!=i&&(t=e.getPartLength(0,i)<e.getPartLength(i,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function i(t){var i=t&&t.getCurve();if(i&&null!=(e._time=i.getTimeOf(e._point)))return e._setCurve(i),i}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||i(this._segment)||i(this._segment1)||i(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),i=this.getIndex();if(e&&null!=i)for(var n=e.getCurves(),s=0;s<i;s++)t+=n[s].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),i=this.getTime();this._curveOffset=t=null!=i&&e&&e.getPartLength(0,i)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,i=t&&t.splitAtTime(this.getTime());return i&&this._setSegment(e.getLastSegment()),i},equals:function(t,e){var i=this===t;if(!i&&t instanceof M){var n=this.getCurve(),s=t.getCurve(),r=n._path;if(r===s._path){var a=Math.abs,o=a(this.getOffset()-t.getOffset()),l=!e&&this._intersection,h=!e&&t._intersection;i=(o<1e-7||r&&a(r.getLength()-o)<1e-7)&&(!l&&!h||l&&h&&l.equals(h,!0))}}return i},toString:function(){var t=[],e=this.getPoint(),i=h.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var s=this.getTime();return null!=s&&t.push("time: "+i.number(s)),null!=this._distance&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),i=t.getTime(),n=1e-8,s=1-n,r=e>=n&&e<=s,a=i>=n&&i<=s;if(r&&a)return!this.isTouching();var o=this.getCurve(),l=o&&e<n?o.getPrevious():o,h=t.getCurve(),u=h&&i<n?h.getPrevious():h;if(e>s&&(o=o.getNext()),i>s&&(h=h.getNext()),!(l&&o&&u&&h))return!1;var c=[];function d(t,e){var i=t.getValues(),n=O.classify(i).roots||O.getPeaks(i),s=n.length,r=O.getLength(i,e&&s?n[s-1]:0,!e&&s?n[0]:1);c.push(s?r:r/32)}function p(t,e,i){return e<i?t>e&&t<i:t>e||t<i}r||(d(l,!0),d(o,!1)),a||(d(u,!0),d(h,!1));var f=this.getPoint(),g=Math.min.apply(Math,c),v=r?o.getTangentAtTime(e):o.getPointAt(g).subtract(f),m=r?v.negate():l.getPointAt(-g).subtract(f),_=a?h.getTangentAtTime(i):h.getPointAt(g).subtract(f),y=a?_.negate():u.getPointAt(-g).subtract(f),x=m.getAngle(),w=v.getAngle(),A=y.getAngle(),b=_.getAngle();return!!(r?p(x,A,b)^p(w,A,b)&&p(x,b,A)^p(w,b,A):p(A,x,w)^p(b,x,w)&&p(A,w,x)^p(b,w,x))},hasOverlap:function(){return!!this._overlap}},s.each(O._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),i=this.getTime();return null!=i&&t&&t[e](i,!0)}}),{preserve:!0}),new function(){function t(t,e,i){var n=t.length,s=0,r=n-1;function a(i,s){for(var r=i+s;r>=-1&&r<=n;r+=s){var a=t[(r%n+n)%n];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}for(;s<=r;){var o,l=s+r>>>1,h=t[l];if(i&&(o=e.equals(h)?h:a(l,-1)||a(l,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var u=e.getPath(),c=h.getPath();(u!==c?u._id-c._id:e.getIndex()+e.getTime()-(h.getIndex()+h.getTime()))<0?r=l-1:s=l+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),n=e.length-1;n>=0;n--)t(i,e[n]._intersection,!1);return i}}}}),B=w.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,i,n;if(s.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:"string"==typeof t&&(e=t),i){var r=i[0];n=r&&Array.isArray(r[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(n?N:R)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,i,n,s=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),r=!1,a=new d,o=new d;function l(t,i){var n=+e[t];return r&&(n+=a[i]),n}function h(t){return new d(l(t,"x"),l(t+1,"y"))}this.clear();for(var u=0,c=s&&s.length;u<c;u++){var p=s[u],g=p[0],v=g.toLowerCase(),m=(e=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(r=g===v,"z"!==i||/[mz]/.test(v)||this.moveTo(a),v){case"m":case"l":for(var _="m"===v,y=0;y<m;y+=2)this[_?"moveTo":"lineTo"](a=h(y)),_&&(o=a,_=!1);n=a;break;case"h":case"v":var x="h"===v?"x":"y";for(a=a.clone(),y=0;y<m;y++)a[x]=l(y,x),this.lineTo(a);n=a;break;case"c":for(y=0;y<m;y+=6)this.cubicCurveTo(h(y),n=h(y+2),a=h(y+4));break;case"s":for(y=0;y<m;y+=4)this.cubicCurveTo(/[cs]/.test(i)?a.multiply(2).subtract(n):a,n=h(y),a=h(y+2)),i=v;break;case"q":for(y=0;y<m;y+=4)this.quadraticCurveTo(n=h(y),a=h(y+2));break;case"t":for(y=0;y<m;y+=2)this.quadraticCurveTo(n=/[qt]/.test(i)?a.multiply(2).subtract(n):a,a=h(y)),i=v;break;case"a":for(y=0;y<m;y+=7)this.arcTo(a=h(y+5),new f(+e[y],+e[y+1]),+e[y+2],+e[y+4],+e[y+3]);break;case"z":this.closePath(1e-12),a=o}i=v}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,i,n){var s=this===t||!t,r=this._matrix._orNullIfIdentity(),a=s?r:(i||t._matrix)._orNullIfIdentity();return s||this.getBounds(r).intersects(t.getBounds(a),1e-12)?O.getIntersections(this.getCurves(),!s&&t.getCurves(),e,r,a,n):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.isCrossing()}))},getNearestLocation:function(){for(var t=d.read(arguments),e=this.getCurves(),i=1/0,n=null,s=0,r=e.length;s<r;s++){var a=e[s].getNearestLocation(t);a._distance<i&&(i=a._distance,n=a)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,i){var n=!this._children,s=n?"_segments":"_children",r=t[s],a=e[s],o=this[s];if(!r||!a||r.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=o.length,h=a.length;if(l<h)for(var u=n?T:R,c=l;c<h;c++)this.add(new u);else l>h&&this[n?"removeSegments":"removeChildren"](h,l);for(c=0;c<h;c++)o[c].interpolate(r[c],a[c],i);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var i=this._children||[this],n=t._children?t._children.slice():[t],s=i.length,r=n.length,a=[],o=0;e=!0;for(var h=l.findItemBoundsCollisions(i,n,u.GEOMETRIC_EPSILON),c=s-1;c>=0&&e;c--){var d=i[c];e=!1;var p=h[c];if(p)for(var f=p.length-1;f>=0&&!e;f--)d.compare(n[p[f]])&&(a[p[f]]||(a[p[f]]=!0,o++),e=!0)}e=e&&o===r}return e}}),R=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var i=arguments,n=Array.isArray(t)?"object"==typeof t[0]?t:i:!t||t.size!==e||t.x===e&&t.point===e?null:i;n&&n.length>0?this.setSegments(n):(this._curves=e,this._segmentSelection=0,n||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!n&&t)},_equals:function(t){return this._closed===t._closed&&s.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(i){if(t.base.call(this,i),8&i){if(this._length=this._area=e,32&i)this._version++;else if(this._curves)for(var n=0,s=this._curves.length;n<s;n++)this._curves[n]._changed()}else 64&i&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof N?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var i=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,n){var s=t[n-1];"boolean"==typeof s&&(this.setClosed(s),n--),this._add(T.readList(t,0,{},n))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var n=0;n<i;n++)t[n]=new O(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new O(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var i,n,s,r,a,o,l,u,c=this._segments,d=c.length,p=new h(e),f=new Array(6),g=!0,v=[];function m(e,h){if(e._transformCoordinates(t,f),i=f[0],n=f[1],g)v.push("M"+p.pair(i,n)),g=!1;else if(a=f[2],o=f[3],a===i&&o===n&&l===s&&u===r){if(!h){var c=i-s,d=n-r;v.push(0===c?"v"+p.number(d):0===d?"h"+p.number(c):"l"+p.pair(c,d))}}else v.push("c"+p.pair(l-s,u-r)+" "+p.pair(a-s,o-r)+" "+p.pair(i-s,n-r));s=i,r=n,l=f[4],u=f[5]}if(!d)return"";for(var _=0;_<d;_++)m(c[_]);return this._closed&&d>0&&(m(c[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),n=0,s=e.length;n<s;n++)e[n]._transformCoordinates(t,i,!0);return!0},_add:function(t,e){for(var i=this._segments,n=this._curves,r=t.length,a=null==e,o=(e=a?i.length:e,0);o<r;o++){var l=t[o];l._path&&(l=t[o]=l.clone()),l._path=this,l._index=e+o,l._selection&&this._updateSelection(l,0,l._selection)}if(a)s.push(i,t);else{i.splice.apply(i,[e,0].concat(t)),o=e+r;for(var h=i.length;o<h;o++)i[o]._index=o}if(n){var u=this._countCurves(),c=e>0&&e+r-1===u?e-1:e,d=c,p=Math.min(c+r,u);for(t._curves&&(n.splice.apply(n,[c,0].concat(t._curves)),d+=t._curves.length),o=d;o<p;o++)n.splice(o,0,new O(this,null,null));this._adjustCurves(c,p)}return this._changed(41),t},_adjustCurves:function(t,e){for(var i,n=this._segments,s=this._curves,r=t;r<e;r++)(i=s[r])._path=this,i._segment1=n[r],i._segment2=n[r+1]||n[0],i._changed();(i=s[this._closed&&!t?n.length-1:t-1])&&(i._segment2=n[t]||n[0],i._changed()),(i=s[e])&&(i._segment1=n[e],i._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&"number"!=typeof t?this._add(T.readList(e)):this._add([T.read(e)])[0]},insert:function(t,e){var i=arguments;return i.length>2&&"number"!=typeof e?this._add(T.readList(i,1),t):this._add([T.read(i,1)],t)[0]},addSegment:function(){return this._add([T.read(arguments)])[0]},insertSegment:function(t){return this._add([T.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(T.readList(t))},insertSegments:function(t,e){return this._add(T.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,e=s.pick(e,this._segments.length);var n=this._segments,r=this._curves,a=n.length,o=n.splice(t,e-t),l=o.length;if(!l)return o;for(var h=0;h<l;h++){var u=o[h];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}h=t;for(var c=n.length;h<c;h++)n[h]._index=h;if(r){var d=t>0&&e===a+(this._closed?1:0)?t-1:t;for(h=(r=r.splice(d,l)).length-1;h>=0;h--)r[h]._path=null;i&&(o._curves=r.slice(1)),this._adjustCurves(d,d)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,i=this._closed;t=0;for(var n=0,s=e.length;n<s;n++){var r=n+1===s;t+=O.getArea(O.getValues(e[n],e[r?0:n+1],null,r&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,i=e.length,n=t?7:0;this._segmentSelection=n*i;for(var s=0;s<i;s++)e[s]._selection=n},_updateSelection:function(t,e,i){t._selection=i,(this._segmentSelection+=i-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,i=this.getLocationAt(t);return i&&(e=i.getCurve().divideAt(i.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,n=e&&e.time;n>.99999999&&(i++,n=0);var s=this.getCurves();if(i>=0&&i<s.length){n>=1e-8&&s[i++].divideAtTime(n);var r,a=this.removeSegments(i,this._segments.length,!0);return this._closed?(this.setClosed(!1),r=this):((r=new R(w.NO_INSERT)).insertAbove(this),r.copyAttributes(this)),r._add(a,0),this.addSegment(a[0]),r}return null},split:function(t,i){var n,s=i===e?t:(n=this.getCurves()[t])&&n.getLocationAtTime(i);return null!=s?this.splitAt(s):null},join:function(t,e){var i=e||0;if(t&&t!==this){var n=t._segments,s=this.getLastSegment(),r=t.getLastSegment();if(!r)return this;s&&s._point.isClose(r._point,i)&&t.reverse();var a=t.getFirstSegment();if(s&&s._point.isClose(a._point,i))s.setHandleOut(a._handleOut),this._add(n.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,i)&&t.reverse(),r=t.getLastSegment(),o&&o._point.isClose(r._point,i)?(o.setHandleIn(r._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var l=this.getFirstSegment(),h=this.getLastSegment();return l!==h&&l._point.isClose(h._point,i)&&(l.setHandleIn(h._handleIn),h.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,n=i?1e-7:0,s=e.length-1;s>=0;s--){var r=e[s];!r.hasHandles()&&(!r.hasLength(n)||i&&r.isCollinear(r.getNext()))&&r.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var i=this._segments[t],n=i._handleIn;i._handleIn=i._handleOut,i._handleOut=n,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new L(this,t||.25,256,!0).parts,i=e.length,n=[],s=0;s<i;s++)n.push(new T(e[s].curve.slice(0,2)));!this._closed&&i>0&&n.push(new T(e[i-1].curve.slice(6))),this.setSegments(n)},simplify:function(t){var e=new D(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var i=this,n=t||{},s=n.type||"asymmetric",r=this._segments,a=r.length,o=this._closed;function l(t,e){var n=t&&t.index;if(null!=n){var s=t.path;if(s&&s!==i)throw new Error(t._class+" "+n+" of "+s+" is not part of "+i);e&&t instanceof O&&n++}else n="number"==typeof t?t:e;return Math.min(n<0&&o?n%a:n<0?n+a:n,a-1)}var h=o&&n.from===e&&n.to===e,u=l(n.from,0),c=l(n.to,a-1);if(u>c)if(o)u-=a;else{var d=u;u=c,c=d}if(/^(?:asymmetric|continuous)$/.test(s)){var p="asymmetric"===s,f=Math.min,g=c-u+1,v=g-1,m=h?f(g,4):1,_=m,y=m,x=[];if(o||(_=f(1,u),y=f(1,a-c-1)),(v+=_+y)<=1)return;for(var w=0,A=u-_;w<=v;w++,A++)x[w]=r[(A<0?A+a:A)%a]._point;var b=x[0]._x+2*x[1]._x,C=x[0]._y+2*x[1]._y,k=2,S=v-1,I=[b],E=[C],T=[k],P=[],M=[];for(w=1;w<v;w++){var B=w<S,R=B?4:p?2:7,N=B?4:p?3:8,L=B?2:p?0:1,D=(B||p?1:2)/k;k=T[w]=R-D,b=I[w]=N*x[w]._x+L*x[w+1]._x-D*b,C=E[w]=N*x[w]._y+L*x[w+1]._y-D*C}for(P[S]=I[S]/T[S],M[S]=E[S]/T[S],w=v-2;w>=0;w--)P[w]=(I[w]-P[w+1])/T[w],M[w]=(E[w]-M[w+1])/T[w];P[v]=(3*x[v]._x-P[S])/2,M[v]=(3*x[v]._y-M[S])/2,w=_;var V=v-y;for(A=u;w<=V;w++,A++){var z=r[A<0?A+a:A],U=z._point,j=P[w]-U._x,F=M[w]-U._y;(h||w<V)&&z.setHandleOut(j,F),(h||w>_)&&z.setHandleIn(-j,-F)}}else for(w=u;w<=c;w++)r[w<0?w+a:w].smooth(n,!h&&w===u,!h&&w===c)},toShape:function(t){if(!this._closed)return null;var i,n,s,r,a,o,l,h=this._segments;function c(t,e){var i=h[t],n=i.getNext(),s=h[e],r=s.getNext();return i._handleOut.isZero()&&n._handleIn.isZero()&&s._handleOut.isZero()&&r._handleIn.isZero()&&n._point.subtract(i._point).isCollinear(r._point.subtract(s._point))}function d(t){var e=h[t],i=e.getNext(),n=e._handleOut,s=i._handleIn,r=.5522847498307936;if(n.isOrthogonal(s)){var a=e._point,o=i._point,l=new y(a,n,!0).intersect(new y(o,s,!0),!0);return l&&u.isZero(n.getLength()/l.subtract(a).getLength()-r)&&u.isZero(s.getLength()/l.subtract(o).getLength()-r)}return!1}function p(t,e){return h[t]._point.getDistance(h[e]._point)}if(!this.hasHandles()&&4===h.length&&c(0,2)&&c(1,3)&&(a=h[1],o=a.getPrevious(),l=a.getNext(),o._handleOut.isZero()&&a._handleIn.isZero()&&a._handleOut.isZero()&&l._handleIn.isZero()&&a._point.subtract(o._point).isOrthogonal(l._point.subtract(a._point)))?(i=C.Rectangle,n=new f(p(0,3),p(0,1)),r=h[1]._point.add(h[2]._point).divide(2)):8===h.length&&d(0)&&d(2)&&d(4)&&d(6)&&c(1,5)&&c(3,7)?(i=C.Rectangle,s=(n=new f(p(1,6),p(0,3))).subtract(new f(p(0,7),p(1,2))).divide(2),r=h[3]._point.add(h[4]._point).divide(2)):4===h.length&&d(0)&&d(1)&&d(2)&&d(3)&&(u.isZero(p(0,2)-p(1,3))?(i=C.Circle,s=p(0,2)/2):(i=C.Ellipse,s=new f(p(2,0)/2,p(3,1)/2)),r=h[1]._point),i){var g=this.getPosition(!0),v=new i({center:g,size:n,radius:s,insert:!1});return v.copyAttributes(this,!0),v._matrix.prepend(this._matrix),v.rotate(r.subtract(g).getAngle()+90),(t===e||t)&&v.insertAbove(this),v}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof N)return t.base.call(this,e);var i=this.getCurves(),n=e.getCurves(),s=i.length,r=n.length;if(!s||!r)return s==r;for(var a,o,l=i[0].getValues(),h=[],u=0,c=0,d=0;d<r;d++){var p=n[d].getValues();if(h.push(p),v=O.getOverlaps(l,p)){a=!d&&v[0][0]>0?r-1:d,o=v[0][1];break}}var f,g=Math.abs;for(p=h[a];l&&p;){var v;if((v=O.getOverlaps(l,p))&&g(v[0][0]-c)<1e-8){1===(c=v[1][0])&&(l=++u<s?i[u].getValues():null,c=0);var m=v[0][1];if(g(m-o)<1e-8){if(f||(f=[a,m]),1===(o=v[1][1])&&(++a>=r&&(a=0),p=h[a]||n[a].getValues(),o=0),!l)return f[0]===a&&f[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,i,n){var s,r,a,o,l,h,u=this,c=this.getStyle(),d=this._segments,p=d.length,f=this._closed,g=e._tolerancePadding,v=g,m=e.stroke&&c.hasStroke(),_=e.fill&&c.hasFill(),y=e.curves,x=m?c.getStrokeWidth()/2:_&&e.tolerance>0||y?0:null;function w(e,i){return t.subtract(e).divide(i).length<=1}function A(t,i,n){if(!e.selected||i.isSelected()){var s=t._point;if(i!==s&&(i=i.add(s)),w(i,v))return new E(n,u,{segment:t,point:i})}}function b(t,i){return(i||e.segments)&&A(t,t._point,"segment")||!i&&e.handles&&(A(t,t._handleIn,"handle-in")||A(t,t._handleOut,"handle-out"))}function C(t){o.add(t)}function k(e){var i,l=f||e._index>0&&e._index<p-1;return"round"===(l?s:r)?w(e._point,v):(o=new R({internal:!0,closed:!0}),l?e.isSmooth()||R._addBevelJoin(e,s,x,a,null,n,C,!0):"square"===r&&R._addSquareCap(e,r,x,null,n,C,!0),o.isEmpty()?void 0:o.contains(t)||(i=o.getNearestLocation(t))&&w(i.getPoint(),g))}if(null!==x&&(x>0?(s=c.getStrokeJoin(),r=c.getStrokeCap(),a=c.getMiterLimit(),v=v.add(R._getStrokePadding(x,n))):s=r="round"),!e.ends||e.segments||f){if(e.segments||e.handles)for(var S=0;S<p;S++)if(h=b(d[S]))return h}else if(h=b(d[0],!0)||b(d[p-1],!0))return h;if(null!==x){if(l=this.getNearestLocation(t)){var I=l.getTime();0===I||1===I&&p>1?k(l.getSegment())||(l=null):w(l.getPoint(),v)||(l=null)}if(!l&&"miter"===s&&p>1)for(S=0;S<p;S++){var T=d[S];if(t.getDistance(T._point)<=a*x&&k(T)){l=T.getLocation();break}}}return!l&&_&&this._contains(t)||l&&!m&&!y?new E("fill",this):l?new E(m?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},s.each(O._evaluateMethods,(function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}}),{beans:!1,getLocationOf:function(){for(var t=d.read(arguments),e=this.getCurves(),i=0,n=e.length;i<n;i++){var s=e[i].getLocationOf(t);if(s)return s}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),i=0,n=0,s=e.length;n<s;n++){var r=i,a=e[n];if((i+=a.getLength())>t)return a.getLocationAt(t-r)}if(e.length>0&&t<=this.getLength())return new M(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=d.read(arguments);if(t.isZero())return[];for(var e=[],i=0,n=this.getCurves(),s=0,r=n.length;s<r;s++){for(var a=n[s],o=a.getTimesWithTangent(t),l=0,h=o.length;l<h;l++){var u=i+a.getOffsetAtTime(o[l]);e.indexOf(u)<0&&e.push(u)}i+=a.length}return e}}),new function(){function t(t,e,i){var n,s,r,a,o,l,h,u,c=e._segments,d=c.length,p=new Array(6),f=!0;function g(e){if(i)e._transformCoordinates(i,p),n=p[0],s=p[1];else{var c=e._point;n=c._x,s=c._y}if(f)t.moveTo(n,s),f=!1;else{if(i)o=p[2],l=p[3];else{var d=e._handleIn;o=n+d._x,l=s+d._y}o===n&&l===s&&h===r&&u===a?t.lineTo(n,s):t.bezierCurveTo(h,u,o,l,n,s)}r=n,a=s,i?(h=p[4],u=p[5]):(d=e._handleOut,h=r+d._x,u=a+d._y)}for(var v=0;v<d;v++)g(c[v]);e._closed&&d>0&&g(c[0])}return{_draw:function(e,i,n,s){var r=i.dontStart,a=i.dontFinish||i.clip,o=this.getStyle(),l=o.hasFill(),h=o.hasStroke(),u=o.getDashArray(),c=!at.support.nativeDash&&h&&u&&u.length;function d(t){return u[(t%c+c)%c]}if(r||e.beginPath(),(l||h&&!c||a)&&(t(e,this,s),this._closed&&e.closePath()),!a&&(l||h)&&(this._setStyles(e,i,n),l&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),h)){if(c){r||e.beginPath();for(var p,f=new L(this,.25,32,!1,s),g=f.length,v=-o.getDashOffset(),m=0;v>0;)v-=d(m--)+d(m--);for(;v<g;)p=v+d(m++),(v>0||p>0)&&f.drawPart(e,Math.max(v,0),Math.max(p,0)),v=p+d(m++)}e.stroke()}},_drawSelected:function(e,i){e.beginPath(),t(e,this,i),e.stroke(),function(t,e,i,n){if(!(n<=0))for(var s,r,a=n/2,o=n-2,l=a-1,h=new Array(6),u=0,c=e.length;u<c;u++){var d=e[u],p=d._selection;if(d._transformCoordinates(i,h),s=h[0],r=h[1],2&p&&g(2),4&p&&g(4),t.fillRect(s-a,r-a,n,n),o>0&&!(1&p)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(s-l,r-l,o,o),t.fillStyle=f}}function g(e){var i=h[e],n=h[e+1];s==i&&r==n||(t.beginPath(),t.moveTo(s,r),t.lineTo(i,n),t.stroke(),t.beginPath(),t.arc(i,n,a,0,2*Math.PI,!0),t.fill())}}(e,this._segments,i,at.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new T(d.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new T(d.read(arguments))])},cubicCurveTo:function(){var e=arguments,i=d.read(e),n=d.read(e),s=d.read(e),r=t(this);r.setHandleOut(i.subtract(r._point)),this._add([new T(s,n.subtract(s))])},quadraticCurveTo:function(){var e=arguments,i=d.read(e),n=d.read(e),s=t(this)._point;this.cubicCurveTo(i.add(s.subtract(i).multiply(1/3)),i.add(n.subtract(i).multiply(1/3)),n)},curveTo:function(){var e=arguments,i=d.read(e),n=d.read(e),r=s.pick(s.read(e),.5),a=1-r,o=t(this)._point,l=i.subtract(o.multiply(a*a)).subtract(n.multiply(r*r)).divide(2*r*a);if(l.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(l,n)},arcTo:function(){var e,i,n,r,a=arguments,o=Math.abs,l=Math.sqrt,h=t(this),c=h._point,p=d.read(a),g=s.peek(a);if("boolean"==typeof(A=s.pick(g,!0)))var v=(C=c.add(p).divide(2)).add(C.subtract(c).rotate(A?-90:90));else if(s.remain(a)<=2)v=p,p=d.read(a);else if(!c.equals(p)){var m=f.read(a),x=u.isZero;if(x(m.width)||x(m.height))return this.lineTo(p);var w=s.read(a),A=!!s.read(a),b=!!s.read(a),C=c.add(p).divide(2),k=(J=c.subtract(C).rotate(-w)).x,S=J.y,I=o(m.width),E=o(m.height),P=I*I,O=E*E,M=k*k,B=S*S,R=l(M/P+B/O);if(R>1&&(P=(I*=R)*I,O=(E*=R)*E),o(R=(P*O-P*B-O*M)/(P*B+O*M))<1e-12&&(R=0),R<0)throw new Error("Cannot create an arc with the given arguments");e=new d(I*S/E,-E*k/I).multiply((b===A?-1:1)*l(R)).rotate(w).add(C),i=(n=(r=(new _).translate(e).rotate(w).scale(I,E))._inverseTransform(c)).getDirectedAngle(r._inverseTransform(p)),!A&&i>0?i-=360:A&&i<0&&(i+=360)}if(v){var N=new y(c.add(v).divide(2),v.subtract(c).rotate(90),!0),L=new y(v.add(p).divide(2),p.subtract(v).rotate(90),!0),D=new y(c,p),V=D.getSide(v);if(!(e=N.intersect(L,!0))){if(!V)return this.lineTo(p);throw new Error("Cannot create an arc with the given arguments")}i=(n=c.subtract(e)).getDirectedAngle(p.subtract(e));var z=D.getSide(e,!0);0===z?i=V*o(i):V===z&&(i+=i<0?360:-360)}if(i){for(var U=o(i),j=U>=360?4:Math.ceil((U-1e-5)/90),F=i/j,Q=F*Math.PI/360,q=4/3*Math.sin(Q)/(1+Math.cos(Q)),H=[],G=0;G<=j;G++){var J=p,W=null;if(G<j&&(W=n.rotate(90).multiply(q),r?(J=r._transformPoint(n),W=r._transformPoint(n.add(W)).subtract(J)):J=e.add(n)),G){var Z=n.rotate(-90).multiply(q);r&&(Z=r._transformPoint(n.add(Z)).subtract(J)),H.push(new T(J,Z,W))}else h.setHandleOut(W);n=n.rotate(F)}this._add(H)}},lineBy:function(){var e=d.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=arguments,i=d.read(e),n=d.read(e),r=s.read(e),a=t(this)._point;this.curveTo(a.add(i),a.add(n),r)},cubicCurveBy:function(){var e=arguments,i=d.read(e),n=d.read(e),s=d.read(e),r=t(this)._point;this.cubicCurveTo(r.add(i),r.add(n),r.add(s))},quadraticCurveBy:function(){var e=arguments,i=d.read(e),n=d.read(e),s=t(this)._point;this.quadraticCurveTo(s.add(i),s.add(n))},arcBy:function(){var e=arguments,i=t(this)._point,n=i.add(d.read(e)),r=s.pick(s.peek(e),!0);"boolean"==typeof r?this.arcTo(n,r):this.arcTo(n,i.add(d.read(e)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return R[i](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,i,n,s,r){var a=t[0];if(!a)return new v;var o=new Array(6),l=a._transformCoordinates(n,new Array(6)),h=l.slice(0,2),u=h.slice(),c=new Array(2);function d(t){t._transformCoordinates(n,o);for(var e=0;e<2;e++)O._addBounds(l[e],l[e+4],o[e+2],o[e],e,r?r[e]:0,h,u,c);var i=l;l=o,o=i}for(var p=1,f=t.length;p<f;p++)d(t[p]);return e&&d(a),new v(h[0],h[1],u[0]-h[0],u[1]-h[1])},getStrokeBounds:function(t,e,i,n,s){var r=i.getStyle(),a=r.hasStroke(),o=r.getStrokeWidth(),l=a&&i._getStrokeMatrix(n,s),h=a&&R._getStrokePadding(o,l),u=R.getBounds(t,e,i,n,s,h);if(!a)return u;var c=o/2,d=r.getStrokeJoin(),p=r.getStrokeCap(),g=r.getMiterLimit(),m=new v(new f(h));function _(t){u=u.include(t)}function y(t){u=u.unite(m.setCenter(t._point.transform(n)))}function x(t,e){"round"===e||t.isSmooth()?y(t):R._addBevelJoin(t,e,c,g,n,l,_)}function w(t,e){"round"===e?y(t):R._addSquareCap(t,e,c,n,l,_)}var A=t.length-(e?0:1);if(A>0){for(var b=1;b<A;b++)x(t[b],d);e?x(t[0],d):(w(t[0],p),w(t[t.length-1],p))}return u},_getStrokePadding:function(t,e){if(!e)return[t,t];var i=new d(t,0).transform(e),n=new d(0,t).transform(e),s=i.getAngleInRadians(),r=i.getLength(),a=n.getLength(),o=Math.sin(s),l=Math.cos(s),h=Math.tan(s),u=Math.atan2(a*h,r),c=Math.atan2(a,h*r);return[Math.abs(r*Math.cos(u)*l+a*Math.sin(u)*o),Math.abs(a*Math.sin(c)*l+r*Math.cos(c)*o)]},_addBevelJoin:function(t,e,i,n,s,r,a,o){var l=t.getCurve(),h=l.getPrevious(),u=l.getPoint1().transform(s),c=h.getNormalAtTime(1).multiply(i).transform(r),p=l.getNormalAtTime(0).multiply(i).transform(r),f=c.getDirectedAngle(p);if((f<0||f>=180)&&(c=c.negate(),p=p.negate()),o&&a(u),a(u.add(c)),"miter"===e){var g=new y(u.add(c),new d(-c.y,c.x),!0).intersect(new y(u.add(p),new d(-p.y,p.x),!0),!0);g&&u.getDistance(g)<=n*i&&a(g)}a(u.add(p))},_addSquareCap:function(t,e,i,n,s,r,a){var o=t._point.transform(n),l=t.getLocation(),h=l.getNormal().multiply(0===l.getTime()?i:-i).transform(s);"square"===e&&(a&&(r(o.subtract(h)),r(o.add(h))),o=o.add(h.rotate(-90))),r(o.add(h)),r(o.subtract(h))},getHandleBounds:function(t,e,i,n,s){var r,a,o=i.getStyle();if(s.stroke&&o.hasStroke()){var l=i._getStrokeMatrix(n,s),h=o.getStrokeWidth()/2,u=h;"miter"===o.getStrokeJoin()&&(u=h*o.getMiterLimit()),"square"===o.getStrokeCap()&&(u=Math.max(u,h*Math.SQRT2)),r=R._getStrokePadding(h,l),a=R._getStrokePadding(u,l)}for(var c=new Array(6),d=1/0,p=-d,f=d,g=p,m=0,_=t.length;m<_;m++){t[m]._transformCoordinates(n,c);for(var y=0;y<6;y+=2){var x=y?r:a,w=x?x[0]:0,A=x?x[1]:0,b=c[y],C=c[y+1],k=b-w,S=b+w,I=C-A,E=C+A;k<d&&(d=k),S>p&&(p=S),I<f&&(f=I),E>g&&(g=E)}}return new v(d,f,p-d,g-f)}}});R.inject({statics:new function(){var t=.5522847498307936,e=[new T([-1,0],[0,t],[0,-t]),new T([0,-1],[-t,0],[t,0]),new T([1,0],[0,-t],[0,t]),new T([0,1],[t,0],[-t,0])];function i(t,e,i){var n=s.getNamed(i),r=new R(n&&(1==n.insert?w.INSERT:0==n.insert?w.NO_INSERT:null));return r._add(t),r._closed=e,r.set(n,w.INSERT)}function n(t,n,s){for(var r=new Array(4),a=0;a<4;a++){var o=e[a];r[a]=new T(o._point.multiply(n).add(t),o._handleIn.multiply(n),o._handleOut.multiply(n))}return i(r,!0,s)}return{Line:function(){var t=arguments;return i([new T(d.readNamed(t,"from")),new T(d.readNamed(t,"to"))],!1,t)},Circle:function(){var t=arguments,e=d.readNamed(t,"center"),i=s.readNamed(t,"radius");return n(e,new f(i),t)},Rectangle:function(){var e,n=arguments,s=v.readNamed(n,"rectangle"),r=f.readNamed(n,"radius",0,{readNull:!0}),a=s.getBottomLeft(!0),o=s.getTopLeft(!0),l=s.getTopRight(!0),h=s.getBottomRight(!0);if(!r||r.isZero())e=[new T(a),new T(o),new T(l),new T(h)];else{var u=(r=f.min(r,s.getSize(!0).divide(2))).width,c=r.height,d=u*t,p=c*t;e=[new T(a.add(u,0),null,[-d,0]),new T(a.subtract(0,c),[0,p]),new T(o.add(0,c),null,[0,-p]),new T(o.add(u,0),[-d,0],null),new T(l.subtract(u,0),null,[d,0]),new T(l.add(0,c),[0,-p],null),new T(h.subtract(0,c),null,[0,p]),new T(h.subtract(u,0),[d,0])]}return i(e,!0,n)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=arguments,e=C._readEllipse(t);return n(e.center,e.radius,t)},Oval:"#Ellipse",Arc:function(){var t=arguments,e=d.readNamed(t,"from"),i=d.readNamed(t,"through"),n=d.readNamed(t,"to"),r=s.getNamed(t),a=new R(r&&0==r.insert&&w.NO_INSERT);return a.moveTo(e),a.arcTo(i,n),a.set(r)},RegularPolygon:function(){for(var t=arguments,e=d.readNamed(t,"center"),n=s.readNamed(t,"sides"),r=s.readNamed(t,"radius"),a=360/n,o=n%3==0,l=new d(0,o?-r:r),h=o?-1:.5,u=new Array(n),c=0;c<n;c++)u[c]=new T(e.add(l.rotate((c+h)*a)));return i(u,!0,t)},Star:function(){for(var t=arguments,e=d.readNamed(t,"center"),n=2*s.readNamed(t,"points"),r=s.readNamed(t,"radius1"),a=s.readNamed(t,"radius2"),o=360/n,l=new d(0,-1),h=new Array(n),u=0;u<n;u++)h[u]=new T(e.add(l.rotate(o*u).multiply(u%2?a:r)));return i(h,!0,t)}}}});var N=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,i){var n=i,r=n[0];r&&"number"==typeof r[0]&&(n=[n]);for(var a=i.length-1;a>=0;a--){var o=n[a];n!==i||o instanceof R||(n=s.slice(n)),Array.isArray(o)?n[a]=new R({segments:o,insert:!1}):o instanceof N&&(n.splice.apply(n,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,n)},reduce:function t(e){for(var i=this._children,n=i.length-1;n>=0;n--){var s;(s=i[n].reduce(e)).isEmpty()&&s.remove()}return i.length?t.base.call(this):((s=new R(w.NO_INSERT)).copyAttributes(this),s.insertAbove(this),this.remove(),s)},isClosed:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,n=t.length;i<n;i++)s.push(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getArea();return e},getLength:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,n=[],s=0,r=i.length;s<r;s++){var a=i[s],o=a._matrix;n.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return n.join("")},_hitTestChildren:function t(e,i,n){return t.base.call(this,e,i.class===R||"path"===i.type?i:s.set({},i,{fill:!1}),n)},_draw:function(t,e,i,n){var s=this._children;if(s.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var r=0,a=s.length;r<a;r++)s[r].draw(t,e,n);if(!e.clip){this._setStyles(t,e,i);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var n=this._children,s=0,r=n.length;s<r;s++){var a=n[s],o=a._matrix;i[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var i=t._children;if(e&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return s.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}}),{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new R(w.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),n=d.read(arguments);this.moveTo(i?n.add(i._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},s.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var i,n=this._children,s=0,r=n.length;s<r;s++)i=n[s][t](e)||i;return i}}),{}));B.inject(new function(){var t=Math.min,i=Math.max,n=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function a(t){return t._children||[t]}function o(t,e){var i=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(e){for(var n=a(i),s=0,r=n.length;s<r;s++)(t=n[s])._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0));i=i.resolveCrossings().reorient("nonzero"===i.getFillRule(),!0)}return i}function h(t,e,i,n,s){var r=new N(w.NO_INSERT);return r.addChildren(t,!0),r=r.reduce({simplify:e}),s&&0==s.insert||r.insertAbove(n&&i.isSibling(n)&&i.getIndex()<n.getIndex()?n:i),r.copyAttributes(i,!0),r}function c(t){return t.hasOverlap()||t.isCrossing()}function d(t,e,i,n){if(n&&(0==n.trace||n.stroke)&&/^(subtract|intersect)$/.test(i))return p(t,e,i);var u=o(t,!0),d=e&&t!==e&&o(e,!0),f=r[i];f[i]=!0,d&&(f.subtract||f.exclude)^d.isClockwise()^u.isClockwise()&&d.reverse();var g,_=m(M.expand(u.getIntersections(d,c))),w=a(u),A=d&&a(d),b=[],C=[];function k(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];s.push(b,n._segments),s.push(C,n.getCurves()),n._overlapsOnly=!0}}function S(t){for(var e=[],i=0,n=t&&t.length;i<n;i++)e.push(C[t[i]]);return e}if(_.length){k(w),A&&k(A);for(var I=new Array(C.length),E=0,T=C.length;E<T;E++)I[E]=C[E].getValues();var P=l.findCurveBoundsCollisions(I,I,0,!0),O={};for(E=0;E<C.length;E++){var B=C[E],R=B._path._id;(O[R]=O[R]||{})[B.getIndex()]={hor:S(P[E].hor),ver:S(P[E].ver)}}for(E=0,T=_.length;E<T;E++)y(_[E]._segment,u,d,O,f);for(E=0,T=b.length;E<T;E++){var N=b[E],L=N._intersection;N._winding||y(N,u,d,O,f),L&&L._overlap||(N._path._overlapsOnly=!1)}g=x(b,f)}else g=v(A?w.concat(A):w.slice(),(function(t){return!!f[t]}));return h(g,!0,t,e,n)}function p(t,e,i){var n=o(t),s=o(e),r=n.getIntersections(s,c),a="subtract"===i,l="divide"===i,u={},d=[];function p(t){if(!u[t._id]&&(l||s.contains(t.getPointAt(t.getLength()/2))^a))return d.unshift(t),u[t._id]=!0}for(var f=r.length-1;f>=0;f--){var g=r[f].split();g&&(p(g)&&g.getFirstSegment().setHandleIn(0,0),n.getLastSegment().setHandleOut(0,0))}return p(n),h(d,!1,t,e)}function f(t,e){for(var i=t;i;){if(i===e)return;i=i._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function g(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function v(t,e,i){var r=t&&t.length;if(r){var a=s.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),o=t.slice().sort((function(t,e){return n(e.getArea())-n(t.getArea())})),h=o[0],c=l.findItemBoundsCollisions(o,null,u.GEOMETRIC_EPSILON);null==i&&(i=h.isClockwise());for(var d=0;d<r;d++){var p=o[d],f=a[p._id],g=0,v=c[d];if(v)for(var m=null,_=v.length-1;_>=0;_--)if(v[_]<d){m=m||p.getInteriorPoint();var y=o[v[_]];if(y.contains(m)){var x=a[y._id];g=x.winding,f.winding+=g,f.container=x.exclude?x.container:y;break}}if(e(f.winding)===e(g))f.exclude=!0,t[f.index]=null;else{var w=f.container;p.setClockwise(w?!w.isClockwise():i)}}}return t}function m(t,e,i){var n,s,r,a=e&&[],o=1e-8,l=1-o,h=!1,u=i||[],c=i&&{};function d(t){return t._path._id+"."+t._segment1._index}for(var p=(i&&i.length)-1;p>=0;p--)(v=i[p])._path&&(c[d(v)]=!0);for(p=t.length-1;p>=0;p--){var v,m,_=t[p],y=_._time,x=y,w=e&&!e(_);if((v=_._curve)&&(v!==s?(h=!v.hasHandles()||c&&c[d(v)],n=[],r=null,s=v):r>=o&&(y/=r)),w)n&&n.push(_);else{if(e&&a.unshift(_),r=x,y<o)m=v._segment1;else if(y>l)m=v._segment2;else{var A=v.divideAtTime(y,!0);h&&u.push(v,A),m=A._segment1;for(var b=n.length-1;b>=0;b--){var C=n[b];C._time=(C._time-y)/(1-y)}}_._setSegment(m);var k=m._intersection,S=_._intersection;if(k){f(k,S);for(var I=k;I;)f(I._intersection,k),I=I._next}else m._intersection=S}}return i||g(u),a||t}function _(e,s,r,a,o){var l,h,u=Array.isArray(s)?s:s[r?"hor":"ver"],c=r?1:0,d=1^c,p=[e.x,e.y],f=p[c],g=p[d],v=1e-6,m=f-1e-9,y=f+1e-9,x=0,w=0,A=0,b=0,C=!1,k=!1,S=1,I=[];function E(n){var h=n[d+0],u=n[d+6];if(!(g<t(h,u)||g>i(h,u))){var p=n[c+0],x=n[c+2],w=n[c+4],k=n[c+6];if(h!==u){var E=g===h?0:g===u||m>i(p,x,w,k)||y<t(p,x,w,k)?1:O.solveCubic(n,d,g,I,0,1)>0?I[0]:1,T=0===E?p:1===E?k:O.getPoint(n,E)[r?"y":"x"],P=h>u?1:-1,M=l[d]>l[d+6]?1:-1,B=l[c+6];return g!==h?(T<m?A+=P:T>y?b+=P:C=!0,T>f-v&&T<f+v&&(S/=2)):(P!==M?p<m?A+=P:p>y&&(b+=P):p!=B&&(B<y&&T>y?(b+=P,C=!0):B>m&&T<m&&(A+=P,C=!0)),S/=4),l=n,!o&&T>m&&T<y&&0===O.getTangent(n,E)[r?"x":"y"]&&_(e,s,!r,a,!0)}(p<y&&k>m||k<y&&p>m)&&(C=!0)}}function T(e){var n=e[d+0],s=e[d+2],a=e[d+4],o=e[d+6];if(g<=i(n,s,a,o)&&g>=t(n,s,a,o))for(var l,h=e[c+0],u=e[c+2],p=e[c+4],f=e[c+6],v=m>i(h,u,p,f)||y<t(h,u,p,f)?[e]:O.getMonoCurves(e,r),_=0,x=v.length;_<x;_++)if(l=E(v[_]))return l}for(var P=0,M=u.length;P<M;P++){var B,R=u[P],N=R._path,L=R.getValues();if(!(P&&u[P-1]._path===N||(l=null,N._closed||(h=O.getValues(N.getLastCurve().getSegment2(),R.getSegment1(),null,!a))[d]!==h[d+6]&&(l=h),l))){l=L;for(var D=N.getLastCurve();D&&D!==R;){var V=D.getValues();if(V[d]!==V[d+6]){l=V;break}D=D.getPrevious()}}if(B=T(L))return B;if(P+1===M||u[P+1]._path!==N){if(h&&(B=T(h)))return B;!C||A||b||(A=b=N.isClockwise(a)^r?1:-1),x+=A,w+=b,A=b=0,C&&(k=!0,C=!1),h=null}}return x=n(x),w=n(w),{winding:i(x,w),windingL:x,windingR:w,quality:S,onPath:k}}function y(t,e,i,s,r){var a=[],o=t,l=0;do{if(y=t.getCurve()){var h=y.getLength();a.push({segment:t,curve:y,length:h}),l+=h}t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var c=[.5,.25,.75],d={winding:0,quality:-1},p=0;p<c.length&&d.quality<.5;p++){h=l*c[p];for(var f=0,g=a.length;f<g;f++){var v=a[f],m=v.length;if(h<=m){var y,x=(y=v.curve)._path,w=x._parent,A=w instanceof N?w:x,b=u.clamp(y.getTimeAt(h),.001,.999),C=y.getPointAtTime(b),k=n(y.getTangentAtTime(b).y)<Math.SQRT1_2,S=null;if(r.subtract&&i){var I=(A===e?i:e)._getWinding(C,k,!0);if(A===e&&I.winding||A===i&&!I.winding){if(I.quality<1)continue;S={winding:0,quality:1}}}(S=S||_(C,s[x._id][y.getIndex()],k,!0)).quality>d.quality&&(d=S);break}h-=m}}for(f=a.length-1;f>=0;f--)a[f].segment._winding=d}function x(t,e){var i,n=[];function s(t){var i;return!(!t||t._visited||e&&(!e[(i=t._winding||{}).winding]||e.unite&&2===i.winding&&i.windingL&&i.windingR))}function r(t){if(t)for(var e=0,n=i.length;e<n;e++)if(t===i[e])return!0;return!1}function a(t){for(var e=t._segments,i=0,n=e.length;i<n;i++)e[i]._visited=!0}function o(t,e){var n=t._intersection,a=n,o=[];function l(n,a){for(;n&&n!==a;){var l=n._segment,h=l&&l._path;if(h){var u=l.getNext()||h.getFirstSegment(),c=u._intersection;l!==t&&(r(l)||r(u)||u&&s(l)&&(s(u)||c&&s(c._segment)))&&o.push(l),e&&i.push(l)}n=n._next}}if(e&&(i=[t]),n){for(l(n);n&&n._previous;)n=n._previous;l(n,a)}return o}t.sort((function(t,e){var i=t._intersection,n=e._intersection,s=!(!i||!i._overlap),r=!(!n||!n._overlap),a=t._path,o=e._path;return s^r?s?1:-1:!i^!n?i?1:-1:a!==o?a._id-o._id:t._index-e._index}));for(var l=0,h=t.length;l<h;l++){var u,c,d,p=t[l],f=s(p),g=null,v=!1,m=!0,_=[];if(f&&p._path._overlapsOnly){var y=p._path,x=p._intersection._segment._path;y.compare(x)&&(y.getArea()&&n.push(y.clone(!1)),a(y),a(x),f=!1)}for(;f;){var A=!g,b=o(p,A),C=b.shift(),k=!(v=!A&&(r(p)||r(C)))&&C;if(A&&(g=new R(w.NO_INSERT),u=null),v){(p.isFirst()||p.isLast())&&(m=p._path._closed),p._visited=!0;break}if(k&&u&&(_.push(u),u=null),u||(k&&b.push(p),u={start:g._segments.length,crossings:b,visited:c=[],handleIn:d}),k&&(p=C),!s(p)){g.removeSegments(u.start);for(var S=0,I=c.length;S<I;S++)c[S]._visited=!1;c.length=0;do{(p=u&&u.crossings.shift())&&p._path||(p=null,(u=_.pop())&&(c=u.visited,d=u.handleIn))}while(u&&!s(p));if(!p)break}var E=p.getNext();g.add(new T(p._point,d,E&&p._handleOut)),p._visited=!0,c.push(p),p=E||p._path.getFirstSegment(),d=E&&E._handleIn}v&&(m&&(g.getFirstSegment().setHandleIn(d),g.setClosed(m)),0!==g.getArea()&&n.push(g))}return n}return{_getWinding:function(t,e,i){return _(t,this.getCurves(),e,i)},unite:function(t,e){return d(this,t,"unite",e)},intersect:function(t,e){return d(this,t,"intersect",e)},subtract:function(t,e){return d(this,t,"subtract",e)},exclude:function(t,e){return d(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?p(this,t,"divide"):h([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function i(t,e){var i=t&&t._intersection;return i&&i._overlap&&i._path===e}var n=!1,r=!1,a=this.getIntersections(null,(function(t){return t.hasOverlap()&&(n=!0)||t.isCrossing()&&(r=!0)})),o=n&&r&&[];if(a=M.expand(a),n)for(var l=m(a,(function(t){return t.hasOverlap()}),o),h=l.length-1;h>=0;h--){var u=l[h],c=u._path,d=u._segment,p=d.getPrevious(),f=d.getNext();i(p,c)&&i(f,c)&&(d.remove(),p._handleOut._set(0,0),f._handleIn._set(0,0),p===d||p.getCurve().hasLength()||(f._handleIn.set(p._handleIn),p.remove()))}r&&(m(a,n&&function(t){var e=t.getCurve(),i=t.getSegment(),n=t._intersection,s=n._curve,r=n._segment;if(e&&s&&e._path&&s._path)return!0;i&&(i._intersection=null),r&&(r._intersection=null)},o),o&&g(o),e=x(s.each(e,(function(t){s.push(this,t._segments)}),[])));var v,_=e.length;return _>1&&t?(e!==t&&this.setChildren(e),v=this):1!==_||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),v=this),v||((v=new N(w.NO_INSERT)).addChildren(e),(v=v.reduce()).copyAttributes(this),this.replaceWith(v)),v},reorient:function(t,i){var n=this._children;return n&&n.length?this.setChildren(v(this.removeChildren(),(function(e){return!!(t?e:1&e)}),i)):i!==e&&this.setClockwise(i),this},getInteriorPoint:function(){var e=this.getBounds().getCenter(!0);if(!this.contains(e)){for(var n=this.getCurves(),s=e.y,r=[],a=[],o=0,l=n.length;o<l;o++){var h=n[o].getValues(),u=h[1],c=h[3],d=h[5],p=h[7];if(s>=t(u,c,d,p)&&s<=i(u,c,d,p))for(var f=O.getMonoCurves(h),g=0,v=f.length;g<v;g++){var m=f[g],_=m[1],y=m[7];if(_!==y&&(s>=_&&s<=y||s>=y&&s<=_)){var x=s===_?m[0]:s===y?m[6]:1===O.solveCubic(m,1,s,a,0,1)?O.getPoint(m,a[0]).x:(m[0]+m[6])/2;r.push(x)}}}r.length>1&&(r.sort((function(t,e){return t-e})),e.x=(r[0]+r[1])/2)}return e}}});var L=s.extend({_class:"PathFlattener",initialize:function(t,e,i,n,s){var r,a=[],o=[],l=0,h=1/(i||32),u=t._segments,c=u[0];function d(t,e){var i=O.getValues(t,e,s);a.push(i),p(i,t._index,0,1)}function p(t,i,s,r){if(!(r-s>h)||n&&O.isStraight(t)||O.isFlatEnough(t,e||.25)){var a=t[6]-t[0],u=t[7]-t[1],c=Math.sqrt(a*a+u*u);c>0&&(l+=c,o.push({offset:l,curve:t,index:i,time:r}))}else{var d=O.subdivide(t,.5),f=(s+r)/2;p(d[0],i,s,f),p(d[1],i,f,r)}}for(var f=1,g=u.length;f<g;f++)d(c,r=u[f]),c=r;t._closed&&d(r||c,u[0]),this.curves=a,this.parts=o,this.length=l,this.index=0},_get:function(t){for(var e,i=this.parts,n=i.length,s=this.index;e=s,s&&!(i[--s].offset<t););for(;e<n;e++){var r=i[e];if(r.offset>=t){this.index=e;var a=i[e-1],o=a&&a.index===r.index?a.time:0,l=a?a.offset:0;return{index:r.index,time:o+(r.time-o)*(t-l)/(r.offset-l)}}}return{index:i[n-1].index,time:1}},drawPart:function(t,e,i){for(var n=this._get(e),s=this._get(i),r=n.index,a=s.index;r<=a;r++){var o=O.getPart(this.curves[r],r===n.index?n.time:0,r===s.index?s.time:1);r===n.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},s.each(O._evaluateMethods,(function(t){this[t+"At"]=function(e){var i=this._get(e);return O[t](this.curves[i.index],i.time)}}),{})),D=s.extend({initialize:function(t){for(var e,i=this.points=[],n=t._segments,s=t._closed,r=0,a=n.length;r<a;r++){var o=n[r].point;e&&e.equals(o)||i.push(e=o.clone())}s&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=s},fit:function(t){var e=this.points,i=e.length,n=null;return i>0&&(n=[new T(e[0])],i>1&&(this.fitCubic(n,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,i,n,s,r){var a=this.points;if(n-i!=1){for(var o,l=this.chordLengthParameterize(i,n),h=Math.max(e,e*e),u=!0,c=0;c<=4;c++){var d=this.generateBezier(i,n,l,s,r),p=this.findMaxError(i,n,d,l);if(p.error<e&&u)return void this.addCurve(t,d);if(o=p.index,p.error>=h)break;u=this.reparameterize(i,n,l,d),h=p.error}var f=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,i,o,s,f),this.fitCubic(t,e,o,n,f.negate(),r)}else{var g=a[i],v=a[n],m=g.getDistance(v)/3;this.addCurve(t,[g,g.add(s.normalize(m)),v.add(r.normalize(m)),v])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new T(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,n,s){for(var r=1e-12,a=Math.abs,o=this.points,l=o[t],h=o[e],u=[[0,0],[0,0]],c=[0,0],d=0,p=e-t+1;d<p;d++){var f=i[d],g=1-f,v=3*f*g,m=g*g*g,_=v*g,y=v*f,x=f*f*f,w=n.normalize(_),A=s.normalize(y),b=o[t+d].subtract(l.multiply(m+_)).subtract(h.multiply(y+x));u[0][0]+=w.dot(w),u[0][1]+=w.dot(A),u[1][0]=u[0][1],u[1][1]+=A.dot(A),c[0]+=w.dot(b),c[1]+=A.dot(b)}var C,k,S=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(a(S)>r){var I=u[0][0]*c[1]-u[1][0]*c[0];C=(c[0]*u[1][1]-c[1]*u[0][1])/S,k=I/S}else{var E=u[0][0]+u[0][1],T=u[1][0]+u[1][1];C=k=a(E)>r?c[0]/E:a(T)>r?c[1]/T:0}var P,O,M=h.getDistance(l),B=r*M;if(C<B||k<B)C=k=M/3;else{var R=h.subtract(l);P=n.normalize(C),O=s.normalize(k),P.dot(R)-O.dot(R)>M*M&&(C=k=M/3,P=O=null)}return[l,l.add(P||n.normalize(C)),h.add(O||s.normalize(k)),h]},reparameterize:function(t,e,i,n){for(var s=t;s<=e;s++)i[s-t]=this.findRoot(n,this.points[s],i[s-t]);s=1;for(var r=i.length;s<r;s++)if(i[s]<=i[s-1])return!1;return!0},findRoot:function(t,e,i){for(var n=[],s=[],r=0;r<=2;r++)n[r]=t[r+1].subtract(t[r]).multiply(3);for(r=0;r<=1;r++)s[r]=n[r+1].subtract(n[r]).multiply(2);var a=this.evaluate(3,t,i),o=this.evaluate(2,n,i),l=this.evaluate(1,s,i),h=a.subtract(e),c=o.dot(o)+h.dot(l);return u.isMachineZero(c)?i:i-h.dot(o)/c},evaluate:function(t,e,i){for(var n=e.slice(),s=1;s<=t;s++)for(var r=0;r<=t-s;r++)n[r]=n[r].multiply(1-i).add(n[r+1].multiply(i));return n[0]},chordLengthParameterize:function(t,e){for(var i=[0],n=t+1;n<=e;n++)i[n-t]=i[n-t-1]+this.points[n].getDistance(this.points[n-1]);n=1;for(var s=e-t;n<=s;n++)i[n]/=i[s];return i},findMaxError:function(t,e,i,n){for(var s=Math.floor((e-t+1)/2),r=0,a=t+1;a<e;a++){var o=this.evaluate(3,i,n[a-t]).subtract(this.points[a]),l=o.x*o.x+o.y*o.y;l>=r&&(r=l,s=a)}return{error:r,index:s}}}),V=w.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var i=t&&s.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(i&&t,!i&&d.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),z=V.extend({_class:"PointText",initialize:function(){V.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new p(t.x,t.y,this,"setPoint")},setPoint:function(){var t=d.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var n=this._lines,s=this._style,r=s.hasFill(),a=s.hasStroke(),o=s.getLeading(),l=t.shadowColor;t.font=s.getFontStyle(),t.textAlign=s.getJustification();for(var h=0,u=n.length;h<u;h++){t.shadowColor=l;var c=n[h];r&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(c,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var i=this._style,n=this._lines,s=n.length,r=i.getJustification(),a=i.getLeading(),o=this.getView().getTextWidth(i.getFontStyle(),n),l=0;"left"!==r&&(l-=o/("center"===r?2:1));var h=new v(l,s?-.75*a:0,o,s*a);return t?t._transformBounds(h,h):h}}),U=s.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={transparent:[0,0,0,0]},a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,i){var n=Math.max(t,e,i),s=n-Math.min(t,e,i);return[0===s?0:60*(n==t?(e-i)/s+(e<i?6:0):n==e?(i-t)/s+2:(t-e)/s+4),0===n?0:s/n,n]},"hsb-rgb":function(t,e,i){var n,s=(t=(t/60%6+6)%6)-(n=Math.floor(t)),r=[i,i*(1-e),i*(1-e*s),i*(1-e*(1-s))];return[r[(n=a[n])[0]],r[n[1]],r[n[2]]]},"rgb-hsl":function(t,e,i){var n=Math.max(t,e,i),s=Math.min(t,e,i),r=n-s,a=0===r,o=(n+s)/2;return[a?0:60*(n==t?(e-i)/r+(e<i?6:0):n==e?(i-t)/r+2:(t-e)/r+4),a?0:o<.5?r/(n+s):r/(2-n-s),o]},"hsl-rgb":function(t,e,i){if(0===e)return[i,i,i];for(var n=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],s=i<.5?i*(1+e):i+e-i*e,r=2*i-s,a=[],o=0;o<3;o++){var l=n[o];l<0&&(l+=1),l>1&&(l-=1),a[o]=6*l<1?r+6*(s-r)*l:2*l<1?s:3*l<2?r+(s-r)*(2/3-l)*6:r}return a},"rgb-gray":function(t,e,i){return[.2989*t+.587*e+.114*i]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return s.each(e,(function(t,i){n[i]=[],s.each(t,(function(t,r){var a=s.capitalize(t),o=/^(hue|saturation)$/.test(t),l=n[i][r]="gradient"===i?"gradient"===t?function(t){var e=this._components[0];return e!==(t=j.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return d.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+a]=function(){return this._type===i||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+a]=function(t){this._type===i||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=l.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function a(o){var l,h,u,c,d=arguments,p=this.__read,f=0;Array.isArray(o)&&(o=(d=o)[0]);var g=null!=o&&typeof o;if("string"===g&&o in e&&(l=o,o=d[1],Array.isArray(o)?(h=o,u=d[2]):(p&&(f=1),d=s.slice(d,1),g=typeof o)),!h){if(c="number"===g?d:"object"===g&&null!=o.length?o:null){l||(l=c.length>=3?"rgb":"gray");var v=e[l].length;u=c[v],p&&(f+=c===arguments?v+(null!=u?1:0):1),c.length>v&&(c=s.slice(c,0,v))}else if("string"===g){var m=function(e){var n,s=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(s){var o=s[4]?4:3;n=new Array(o);for(var l=0;l<o;l++){var h=s[l+1];n[l]=parseInt(1==h.length?h+h:h,16)/255}}else if(s=e.match(/^(rgb|hsl)a?\((.*)\)$/)){a=s[1],n=s[2].trim().split(/[,\s]+/g);for(var u="hsl"===a,c=(l=0,Math.min(n.length,4));l<c;l++){var d=n[l];if(h=parseFloat(d),u)if(0===l){var p=d.match(/([a-z]*)$/)[1];h*={turn:360,rad:180/Math.PI,grad:.9}[p]||1}else l<3&&(h/=100);else l<3&&(h/=/%$/.test(d)?100:255);n[l]=h}}else{var f=r[e];if(!f)if(i){t||((t=it.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var g=t.getImageData(0,0,1,1).data;f=r[e]=[g[0]/255,g[1]/255,g[2]/255]}else f=[0,0,0];n=f.slice()}return[a,n]}(o);l=m[0],4===(h=m[1]).length&&(u=h[3],h.length--)}else if("object"===g)if(o.constructor===a){if(l=o._type,h=o._components.slice(),u=o._alpha,"gradient"===l)for(var _=1,y=h.length;_<y;_++){var x=h[_];x&&(h[_]=x.clone())}}else if(o.constructor===j)l="gradient",c=d;else{var w=e[l="hue"in o?"lightness"in o?"hsl":"hsb":"gradient"in o||"stops"in o||"radial"in o?"gradient":"gray"in o?"gray":"rgb"],A=n[l];for(this._components=h=[],_=0,y=w.length;_<y;_++)null==(b=o[w[_]])&&!_&&"gradient"===l&&"stops"in o&&(b={stops:o.stops,radial:o.radial}),null!=(b=A[_].call(this,b))&&(h[_]=b);u=o.alpha}p&&l&&(f=1)}if(this._type=l||"rgb",!h)for(this._components=h=[],_=0,y=(A=n[this._type]).length;_<y;_++){var b;null!=(b=A[_].call(this,c&&c[_]))&&(h[_]=b)}return this._components=h,this._properties=e[this._type],this._alpha=u,p&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var i=this.getComponents();return s.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new U(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=s.isPlainValue(t,!0)?U.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&s.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],i="gradient"===this._type,n=h.instance,s=0,r=t.length;s<r;s++){var a=this._components[s];null!=a&&e.push(t[s]+": "+(i?a:n.number(a)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),i=t||null==this._alpha?1:this._alpha;function n(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[n(e[0]),n(e[1]),n(e[2])],i<1&&e.push(i<0?0:i),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var i,n=this._components,s=n[0],r=s._stops,a=n[1],o=n[2],l=n[3],h=e&&e.inverted();if(h&&(a=h._transformPoint(a),o=h._transformPoint(o),l&&(l=h._transformPoint(l))),s._radial){var u=o.getDistance(a);if(l){var c=l.subtract(a);c.getLength()>u&&(l=a.add(c.normalize(u-.1)))}var d=l||a;i=t.createRadialGradient(d.x,d.y,0,a.x,a.y,u)}else i=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var p=0,f=r.length;p<f;p++){var g=r[p],v=g._offset;i.addColorStop(null==v?p/(f-1):v,g._color.toCanvasStyle())}return this._canvasStyle=i},transform:function(t){if("gradient"===this._type){for(var e=this._components,i=1,n=e.length;i<n;i++){var s=e[i];t._transformPoint(s,s,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new U(t(),t(),t())},_setOwner:function(t,e,i){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=i||null)),t}}})},new function(){return s.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=U.read(arguments);for(var i=this._type,n=this._components,s=e._convert(i),r=0,a=n.length;r<a;r++)s[r]=t(n[r],s[r]);return new U(i,s,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),j=s.extend({_class:"Gradient",initialize:function(t,e){this._id=c.get(),t&&s.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return s.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var i=this._owners?this._owners.indexOf(t):-1;-1!=i&&(this._owners.splice(i,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,i=this._stops.length;e<i;e++)t[e]=this._stops[e].clone();return new j(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var n=0,s=i.length;n<s;n++)i[n]._owner=e;for(n=0,s=(i=this._stops=F.readList(t,0,{clone:!0})).length;n<s;n++)i[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,i=t._stops,n=e.length;if(n===i.length){for(var s=0;s<n;s++)if(!e[s].equals(i[s]))return!1;return!0}}return!1}}),F=s.extend({_class:"GradientStop",initialize:function(t,i){var n=t,s=i;"object"==typeof t&&i===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],s=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,s=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(s)},clone:function(){return new F(this._color.clone(),this._offset)},_serialize:function(t,e){var i=this._color,n=this._offset;return s.serialize(null==n?[i]:[i,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){U._setOwner(this._color,null),this._color=U._setOwner(U.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Q=s.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new d,selectedColor:null},i=s.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=s.set({},i,{fillColor:new U}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:function(e,s,r){this._values={},this._owner=s,this._project=s&&s._project||r||at.project,this._defaults=!s||s instanceof A?i:s instanceof V?n:t,e&&this.set(e)}};return s.each(i,(function(t,i){var n=/Color$/.test(i),l="shadowOffset"===i,h=s.capitalize(i),u=r[i],c="set"+h,p="get"+h;o[c]=function(t){var e=this._owner,s=e&&e._children,r=s&&s.length>0&&!(e instanceof N);if(r)for(var a=0,o=s.length;a<o;a++)s[a]._style[c](t);if(("selectedColor"===i||!r)&&i in this._defaults){var l=this._values[i];l!==t&&(n&&(l&&(U._setOwner(l,null),l._canvasStyle=null),t&&t.constructor===U&&(t=U._setOwner(t,e,r&&c))),this._values[i]=t,e&&e._changed(u||129))}},o[p]=function(t){var r=this._owner,a=r&&r._children,o=a&&a.length>0&&!(r instanceof N);if(o&&!t)for(var h=0,u=a.length;h<u;h++){var f=a[h]._style[p]();if(h){if(!s.equals(g,f))return e}else g=f}else if(i in this._defaults){var g;if((g=this._values[i])===e)(g=this._defaults[i])&&g.clone&&(g=g.clone());else{var v=n?U:l?d:null;!v||g&&g.constructor===v||(this._values[i]=g=v.read([g],0,{readNull:!0,clone:!0}))}}return g&&n&&(g=U._setOwner(g,r,o&&c)),g},a[p]=function(t){return this._style[p](t)},a[c]=function(t){this._style[c](t)}})),s.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var i="get"+e,n="set"+e;o[i]=a[i]="#get"+t,o[n]=a[n]="#set"+t})),w.inject(a),o},{set:function(t){var e=t instanceof Q,i=e?t._values:t;if(i)for(var n in i)if(n in this._defaults){var s=i[n];this[n]=s&&e&&s.clone?s.clone():s}},equals:function(t){function i(t,i,n){var r=t._values,a=i._values,o=i._defaults;for(var l in r){var h=r[l],u=a[l];if(!(n&&l in a||s.equals(h,u===e?o[l]:u)))return!1}return!0}return t===this||t&&this._class===t._class&&i(this,t)&&i(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),null!=e?e:1.2*i}}),q=new function(){function t(t,e,i,n){for(var s=["","webkit","moz","Moz","ms","o"],r=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=s[a],l=o?o+r:e;if(l in t){if(!i)return t[l];t[l]=n;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,i=e&&e.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,e){var i,n=t.ownerDocument,s=n.body,r=n.documentElement;try{i=t.getBoundingClientRect()}catch(h){i={left:0,top:0,width:0,height:0}}var a=i.left-(r.clientLeft||s.clientLeft||0),o=i.top-(r.clientTop||s.clientTop||0);if(!e){var l=n.defaultView;a+=l.pageXOffset||r.scrollLeft||s.scrollLeft,o+=l.pageYOffset||r.scrollTop||s.scrollTop}return new v(a,o,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,n=e.documentElement;return new v(0,0,i.innerWidth||n.clientWidth,i.innerHeight||n.clientHeight)},getOffset:function(t,e){return q.getBounds(t,e).getPoint()},getSize:function(t){return q.getBounds(t,!0).getSize()},isInvisible:function(t){return q.getSize(t).equals(new f(0,0))},isInView:function(t){return!q.isInvisible(t)&&q.getViewportBounds(t).intersects(q.getBounds(t,!0))},isInserted:function(t){return n.body.contains(t)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,n){if("object"==typeof i)for(var s in i)t(e,s,!0,i[s]);else t(e,i,!0,n)}}},H={add:function(t,e){if(t)for(var i in e)for(var s=e[i],r=i.split(/[\s,]+/g),a=0,o=r.length;a<o;a++){var l=r[a],h=t===n&&("touchstart"===l||"touchmove"===l)&&{passive:!1};t.addEventListener(l,s,h)}},remove:function(t,e){if(t)for(var i in e)for(var n=e[i],s=i.split(/[\s,]+/g),r=0,a=s.length;r<a;r++)t.removeEventListener(s[r],n,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new d(e.pageX||e.clientX+n.documentElement.scrollLeft,e.pageY||e.clientY+n.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return H.getPoint(t).subtract(q.getOffset(e||H.getTarget(t)))}};H.requestAnimationFrame=new function(){var t,e=q.getPrefixed(i,"requestAnimationFrame"),n=!1,s=[];function r(){var t=s;s=[];for(var i=0,a=t.length;i<a;i++)t[i]();(n=e&&s.length)&&e(r)}return function(i){s.push(i),e?n||(e(r),n=!0):t||(t=setInterval(r,1e3/60))}};var G=s.extend(r,{_class:"View",initialize:function t(e,s){function r(t){return s[t]||parseInt(s.getAttribute(t),10)}function o(){var t=q.getSize(s);return t.isNaN()||t.isZero()?new f(r("width"),r("height")):t}var l;if(i&&s){this._id=s.getAttribute("id"),null==this._id&&s.setAttribute("id",this._id="paper-view-"+t._id++),H.add(s,this._viewEvents);var h="none";if(q.setPrefixed(s.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),a.hasAttribute(s,"resize")){var u=this;H.add(i,this._windowEvents={resize:function(){u.setViewSize(o())}})}if(l=o(),a.hasAttribute(s,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var c=this._stats.domElement,d=c.style,p=q.getOffset(s);d.position="absolute",d.left=p.x+"px",d.top=p.y+"px",n.body.appendChild(c)}}else l=new f(s),s=null;this._project=e,this._scope=e._scope,this._element=s,this._pixelRatio||(this._pixelRatio=i&&i.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new _)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!at.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;G._focused===this&&(G._focused=null),G._views.splice(G._views.indexOf(this),1),delete G._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),H.remove(this._element,this._viewEvents),H.remove(i,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:s.each(w._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;H.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;q.getPrefixed(n,"hidden")&&"true"!==a.getAttribute(e,"keepalive")||!q.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){at=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new s({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete i[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new s(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new g(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=f.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new v(new d,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return q.isInView(this._element)},isInserted:function(){return q.isInserted(this._element)},getPixelSize:function(t){var e,i=this._element;if(i){var s=i.parentNode,r=n.createElement("div");r.style.fontSize=t,s.appendChild(r),e=parseFloat(q.getStyles(r).fontSize),s.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},s.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var i=arguments,n=(e?s:d).read(i),r=d.read(i,0,{readNull:!0});return this.transform((new _)[t](n,r||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new _;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=d.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new _).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new p(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=d.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(d.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(d.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(d.read(arguments))},getEventPoint:function(t){return this.viewToProject(H.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return n&&"string"==typeof e&&(e=n.getElementById(e)),new(i?J:G)(t,e)}}},new function(){if(i){var t,e,s,r,a,o=!1,l=!1,h=i.navigator;h.pointerEnabled||h.msPointerEnabled?(s="pointerdown MSPointerDown",r="pointermove MSPointerMove",a="pointerup pointercancel MSPointerUp MSPointerCancel"):(s="touchstart",r="touchmove",a="touchend touchcancel","ontouchstart"in i&&h.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(s+=" mousedown",r+=" mousemove",a+=" mouseup"));var u={},c={mouseout:function(t){var e=G._focused,i=H.getRelatedTarget(t);if(e&&(!i||"HTML"===i.nodeName)){var n=H.getOffset(t,e._element),s=n.x,r=Math.abs,a=r(s),o=a-(1<<25);n.x=r(o)<a?o*(s<0?-1:1):s,I(e,t,e.viewToProject(n))}},scroll:S};u[s]=function(t){var e=G._focused=k(t);o||(o=!0,e._handleMouseEvent("mousedown",t))},c[r]=function(i){var n=G._focused;if(!l){var s=k(i);s?n!==s&&(n&&I(n,i),t||(t=n),n=G._focused=e=s):e&&e===n&&(t&&!t.isInserted()&&(t=null),n=G._focused=t,t=null,S())}n&&I(n,i)},c[s]=function(){l=!0},c[a]=function(t){var e=G._focused;e&&o&&e._handleMouseEvent("mouseup",t),l=o=!1},H.add(n,c),H.add(i,{load:S});var d,p,f,g,v,m,_,y,x=!1,w=!1,A={doubleclick:"click",mousedrag:"mousemove"},b=!1,C={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:u,_handleMouseEvent:function(t,e,i){var n=this._itemEvents,s=n.native[t],r="mousemove"===t,a=this._scope.tool,l=this;function h(t){return n.virtual[t]||l.responds(t)||a&&a.responds(t)}r&&o&&h("mousedrag")&&(t="mousedrag"),i||(i=this.getEventPoint(e));var u=this.getBounds().contains(i),c=s&&u&&l._project.hitTest(i,{tolerance:0,fill:!0,stroke:!0}),A=c&&c.item||null,C=!1,k={};if(k[t.substr(5)]=!0,s&&A!==g&&(g&&E(g,null,"mouseleave",e,i),A&&E(A,null,"mouseenter",e,i),g=A),b^u&&(E(this,null,u?"mouseenter":"mouseleave",e,i),C=!0),!u&&!k.drag||i.equals(p)||(T(this,A,r?t:"mousemove",e,i,p),C=!0),b=u,k.down&&u||k.up&&d){if(T(this,A,t,e,i,d),k.down){if(y=A===m&&Date.now()-_<300,f=m=A,!w&&A){for(var S=A;S&&!S.responds("mousedrag");)S=S._parent;S&&(v=A)}d=i}else k.up&&(w||A!==f||(_=Date.now(),T(this,A,y?"doubleclick":"click",e,i,d),y=!1),f=v=null);b=!1,C=!0}p=i,C&&a&&(x=a._handleMouseEvent(t,e,i,k)||x),!1!==e.cancelable&&(x&&!k.move||k.down&&h("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,i,n){var s,r=this._scope,a=r.tool;function o(a){a.responds(t)&&(at=r,a.emit(t,s=s||new Z(t,e,i,n)))}this.isVisible()&&(o(this),a&&a.responds(t)&&o(a))},_countItemEvent:function(t,e){var i=this._itemEvents,n=i.native,s=i.virtual;for(var r in C)n[r]=(n[r]||0)+(C[r][t]||0)*e;s[t]=(s[t]||0)+e},statics:{updateFocus:S,_resetState:function(){o=l=x=b=!1,t=e=d=p=f=g=v=m=_=y=null}}}}function k(t){var e=H.getTarget(t);return e.getAttribute&&G._viewsById[e.getAttribute("id")]}function S(){var t=G._focused;if(!t||!t.isVisible())for(var i=0,n=G._views.length;i<n;i++)if((t=G._views[i]).isVisible()){G._focused=e=t;break}}function I(t,e,i){t._handleMouseEvent("mousemove",e,i)}function E(t,e,i,n,s,r,a){var o,l=!1;function h(t,i){if(t.responds(i)){if(o||(o=new K(i,n,s,e||t,r?s.subtract(r):null)),t.emit(i,o)&&(x=!0,o.prevented&&(w=!0),o.stopped))return l=!0}else{var a=A[i];if(a)return h(t,a)}}for(;t&&t!==a&&!h(t,i);)t=t._parent;return l}function T(t,e,i,n,s,r){return t._project.removeOn(i),w=x=!1,v&&E(v,null,i,n,s,r)||e&&e!==v&&!e.isDescendant(v)&&E(e,null,"mousedrag"===i?"mousemove":i,n,s,r,v)||E(t,v||e||t,i,n,s,r)}}),J=G.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof i.HTMLCanvasElement)){var n=f.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+s.slice(arguments,1));e=it.getCanvas(n)}var r=this._context=e.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(a.getAttribute(e,"hidpi"))){var o=i.devicePixelRatio||1,l=q.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=o/l}G.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,i){var n=this._pixelRatio;if(t.base.call(this,e*n,i*n),1!==n){var s=this._element,r=this._context;if(!a.hasAttribute(s,"resize")){var o=s.style;o.width=e+"px",o.height=i+"px"}r.restore(),r.save(),r.scale(n,n)}},getContext:function(){return this._context},getPixelSize:function t(e){var i,n=at.agent;if(n&&n.firefox)i=t.base.call(this,e);else{var s=this._context,r=s.font;s.font=e+" serif",i=parseFloat(s.font),s.font=r}return i},getTextWidth:function(t,e){var i=this._context,n=i.font,s=0;i.font=t;for(var r=0,a=e.length;r<a;r++)s=Math.max(s,i.measureText(e[r]).width);return i.font=n,s},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),W=s.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return X.modifiers}}),Z=W.extend({_class:"KeyEvent",initialize:function(t,e,i,n){this.type=t,this.event=e,this.key=i,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),X=new function(){var t,r,a={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},o={tab:"\t",space:" ",enter:"\r"},l={},h={},u=new s({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=at&&at.agent;return t&&t.mac?this.meta:this.control}}});function c(t){var i=t.key||t.keyIdentifier;return i=/^U\+/.test(i)?String.fromCharCode(parseInt(i.substr(2),16)):/^Arrow[A-Z]/.test(i)?i.substr(5):"Unidentified"===i||i===e?String.fromCharCode(t.keyCode):i,a[i]||(i.length>1?s.hyphenate(i):i.toLowerCase())}function d(e,i,n,r){var a,o=G._focused;if(l[i]=e,e?h[i]=n:delete h[i],i.length>1&&(a=s.camelize(i))in u){u[a]=e;var c=at&&at.agent;if("meta"===a&&c&&c.mac)if(e)t={};else{for(var p in t)p in h&&d(!1,p,t[p],r);t=null}}else e&&t&&(t[i]=n);o&&o._handleKeyEvent(e?"keydown":"keyup",r,i,n)}return H.add(n,{keydown:function(t){var e=c(t),i=at&&at.agent;e.length>1||i&&i.chrome&&(t.altKey||i.mac&&t.metaKey||!i.mac&&t.ctrlKey)?d(!0,e,o[e]||(e.length>1?"":e),t):r=e},keypress:function(t){if(r){var e=c(t),i=t.charCode,n=i>=32?String.fromCharCode(i):e.length>1?"":e;e!==r&&(e=n.toLowerCase()),d(!0,e,n,t),r=null}},keyup:function(t){var e=c(t);e in h&&d(!1,e,h[e],t)}}),H.add(i,{blur:function(t){for(var e in h)d(!1,e,h[e],t)}}),{modifiers:u,isDown:function(t){return!!l[t]}}},K=W.extend({_class:"MouseEvent",initialize:function(t,e,i,n,s){this.type=t,this.event=e,this.point=i,this.target=n,this.delta=s},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Y=W.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),$=o.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){o.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,i,n){at=this._scope,n.drag&&!this.responds(t)&&(t="mousemove");var s=n.move||n.drag,r=this.responds(t),a=this.minDistance,o=this.maxDistance,l=!1,h=this;function u(t,e){var r=i,a=s?h._point:h._downPoint||r;if(s){if(h._moveCount>=0&&r.equals(a))return!1;if(a&&(null!=t||null!=e)){var o=r.subtract(a),l=o.getLength();if(l<(t||0))return!1;e&&(r=a.add(o.normalize(Math.min(l,e))))}h._moveCount++}return h._point=r,h._lastPoint=a||r,n.down&&(h._moveCount=-1,h._downPoint=r,h._downCount++),!0}function c(){r&&(l=h.emit(t,new Y(h,t,e))||l)}if(n.down)u(),c();else if(n.up)u(null,o),c();else if(r)for(;u(a,o);)c();return l}}),tt=s.extend(r,{_class:"Tween",statics:{easings:new s({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,i,n,s,r,a){this.object=e;var o=typeof r,l="function"===o;this.type=l?o:"string"===o?r:"linear",this.easing=l?r:t.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var h=i||n;this._keys=h?Object.keys(h):[],this._parsedKeys=this._parseKeys(this._keys),this._from=h&&this._getState(i),this._to=h&&this._getState(n),!1!==a&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),i=this._keys,n=function(i){return"function"==typeof i?i(e,t):i},r=0,a=i&&i.length;r<a;r++){var o=i[r],l=n(this._from[o]),h=n(this._to[o]),u=l&&h&&l.__add&&h.__add?h.__subtract(l).__multiply(e).__add(l):(h-l)*e+l;this._setProperty(this._parsedKeys[o],u)}this.responds("update")&&this.emit("update",new s({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,i=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(i)},_getState:function(t){for(var e=this._keys,i={},n=0,s=e.length;n<s;n++){var r,a=e[n],o=this._parsedKeys[a],l=this._getProperty(o);if(t){var h=this._resolveValue(l,t[a]);this._setProperty(o,h),r=(r=this._getProperty(o))&&r.clone?r.clone():r,this._setProperty(o,l)}else r=l&&l.clone?l.clone():l;i[a]=r}return i},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var i=e[0];return i&&i.match&&i.match(/^[+\-\*\/]=/)?this._calculate(t,i[0],e[1]):e}if("string"==typeof e){var n=e.match(/^[+\-*/]=(.*)/);if(n){var s=JSON.parse(n[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],s)}}}return e},_calculate:function(t,e,i){return at.PaperScript.calculateBinary(t,e,i)},_parseKeys:function(t){for(var e={},i=0,n=t.length;i<n;i++){var s=t[i],r=s.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[s]=r.split("/")}return e},_getProperty:function(t,e){for(var i=this.object,n=0,s=t.length-(e||0);n<s&&i;n++)i=i[t[n]];return i},_setProperty:function(t,e){var i=this._getProperty(t,1);i&&(i[t[t.length-1]]=e)}}),et=function(e){var i=new t.XMLHttpRequest;return i.open((e.method||"get").toUpperCase(),e.url,s.pick(e.async,!0)),e.mimeType&&i.overrideMimeType(e.mimeType),i.onload=function(){var t=i.status;0===t||200===t?e.onLoad&&e.onLoad.call(i,i.responseText):i.onerror()},i.onerror=function(){var t=i.status,n='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(n);e.onError(n,t)},i.send(null)},it=s.exports.CanvasProvider={canvases:[],getCanvas:function(t,e,s){if(!i)return null;var r,a=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?r=this.canvases.pop():(r=n.createElement("canvas"),a=!1);var o=r.getContext("2d",s||{});if(!o)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===t&&r.height===e?a&&o.clearRect(0,0,t+1,e+1):(r.width=t,r.height=e),o.save(),r},getContext:function(t,e,i){var n=this.getCanvas(t,e,i);return n?n.getContext("2d",i||{}):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},nt=new function(){var t,e,i,n,r,a,o,l,h,u,c,d=Math.min,p=Math.max,f=Math.abs;function g(t,e,i){return.2989*t+.587*e+.114*i}function v(t,e,i,n){var s=n-g(t,e,i),r=(n=g(h=t+s,u=e+s,c=i+s),d(h,u,c)),a=p(h,u,c);if(r<0){var o=n-r;h=n+(h-n)*n/o,u=n+(u-n)*n/o,c=n+(c-n)*n/o}if(a>255){var l=255-n,f=a-n;h=n+(h-n)*l/f,u=n+(u-n)*l/f,c=n+(c-n)*l/f}}function m(t,e,i){return p(t,e,i)-d(t,e,i)}function _(t,e,i,n){var s,r=[t,e,i],a=p(t,e,i),o=d(t,e,i);s=0===d(o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2)?1===p(o,a)?2:1:0,r[a]>r[o]?(r[s]=(r[s]-r[o])*n/(r[a]-r[o]),r[a]=n):r[s]=r[a]=0,r[o]=0,h=r[0],u=r[1],c=r[2]}var y={multiply:function(){h=r*t/255,u=a*e/255,c=o*i/255},screen:function(){h=r+t-r*t/255,u=a+e-a*e/255,c=o+i-o*i/255},overlay:function(){h=r<128?2*r*t/255:255-2*(255-r)*(255-t)/255,u=a<128?2*a*e/255:255-2*(255-a)*(255-e)/255,c=o<128?2*o*i/255:255-2*(255-o)*(255-i)/255},"soft-light":function(){var n=t*r/255;h=n+r*(255-(255-r)*(255-t)/255-n)/255,u=(n=e*a/255)+a*(255-(255-a)*(255-e)/255-n)/255,c=(n=i*o/255)+o*(255-(255-o)*(255-i)/255-n)/255},"hard-light":function(){h=t<128?2*t*r/255:255-2*(255-t)*(255-r)/255,u=e<128?2*e*a/255:255-2*(255-e)*(255-a)/255,c=i<128?2*i*o/255:255-2*(255-i)*(255-o)/255},"color-dodge":function(){h=0===r?0:255===t?255:d(255,255*r/(255-t)),u=0===a?0:255===e?255:d(255,255*a/(255-e)),c=0===o?0:255===i?255:d(255,255*o/(255-i))},"color-burn":function(){h=255===r?255:0===t?0:p(0,255-255*(255-r)/t),u=255===a?255:0===e?0:p(0,255-255*(255-a)/e),c=255===o?255:0===i?0:p(0,255-255*(255-o)/i)},darken:function(){h=r<t?r:t,u=a<e?a:e,c=o<i?o:i},lighten:function(){h=r>t?r:t,u=a>e?a:e,c=o>i?o:i},difference:function(){(h=r-t)<0&&(h=-h),(u=a-e)<0&&(u=-u),(c=o-i)<0&&(c=-c)},exclusion:function(){h=r+t*(255-r-r)/255,u=a+e*(255-a-a)/255,c=o+i*(255-o-o)/255},hue:function(){_(t,e,i,m(r,a,o)),v(h,u,c,g(r,a,o))},saturation:function(){_(r,a,o,m(t,e,i)),v(h,u,c,g(r,a,o))},luminosity:function(){v(r,a,o,g(t,e,i))},color:function(){v(t,e,i,g(r,a,o))},add:function(){h=d(r+t,255),u=d(a+e,255),c=d(o+i,255)},subtract:function(){h=p(r-t,0),u=p(a-e,0),c=p(o-i,0)},average:function(){h=(r+t)/2,u=(a+e)/2,c=(o+i)/2},negation:function(){h=255-f(255-t-r),u=255-f(255-e-a),c=255-f(255-i-o)}},x=this.nativeModes=s.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),w=it.getContext(1,1,{willReadFrequently:!0});w&&(s.each(y,(function(t,e){var i="darken"===e,n=!1;w.save();try{w.fillStyle=i?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=i?"#a00":"#300",w.fillRect(0,0,1,1),n=w.getImageData(0,0,1,1).data[0]!==i?170:51)}catch(s){}w.restore(),x[e]=n})),it.release(w)),this.process=function(s,d,p,f,g){var v=d.canvas,m="normal"===s;if(m||x[s])p.save(),p.setTransform(1,0,0,1,0,0),p.globalAlpha=f,m||(p.globalCompositeOperation=s),p.drawImage(v,g.x,g.y),p.restore();else{var _=y[s];if(!_)return;for(var w=p.getImageData(g.x,g.y,v.width,v.height),A=w.data,b=d.getImageData(0,0,v.width,v.height).data,C=0,k=A.length;C<k;C+=4){t=b[C],r=A[C],e=b[C+1],a=A[C+1],i=b[C+2],o=A[C+2],n=b[C+3],l=A[C+3],_();var S=n*f/255,I=1-S;A[C]=S*h+I*r,A[C+1]=S*u+I*a,A[C+2]=S*c+I*o,A[C+3]=n*f+I*l}p.putImageData(w,g.x,g.y)}}},st=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",i="http://www.w3.org/1999/xlink",s={href:i,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function r(t,e,i){for(var n in e){var r=e[n],a=s[n];"number"==typeof r&&i&&(r=i.number(r)),a?t.setAttributeNS(a,n,r):t.setAttribute(n,r)}return t}return{svg:t,xmlns:e,xlink:i,create:function(e,i,s){return r(n.createElementNS(t,e),i,s)},get:function(t,e){var i=s[e],n=i?t.getAttributeNS(i,e):t.getAttribute(e);return"null"===n?null:n},set:r}},rt=s.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof B||t instanceof C||t instanceof V)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var i=s.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&s.each(n,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+i,set:"set"+i}}),{});new function(){var e;function i(t,i,n){var r,a=new s,o=t.getTranslation();if(i&&(t.isInvertible()?(r=(t=t._shiftless())._inverseTransform(o),o=null):r=new d,a[n?"cx":"x"]=r.x,a[n?"cy":"y"]=r.y),!t.isIdentity()){var l=t.decompose();if(l){var h=[],c=l.rotation,p=l.scaling,f=l.skewing;o&&!o.isZero()&&h.push("translate("+e.point(o)+")"),c&&h.push("rotate("+e.number(c)+")"),u.isZero(p.x-1)&&u.isZero(p.y-1)||h.push("scale("+e.point(p)+")"),f.x&&h.push("skewX("+e.number(f.x)+")"),f.y&&h.push("skewY("+e.number(f.y)+")"),a.transform=h.join(" ")}else a.transform="matrix("+t.getValues().join(",")+")"}return a}function n(t,n){for(var s=i(t._matrix),r=t._children,a=st.create("g",s,e),o=0,l=r.length;o<l;o++){var h=r[o],u=m(h,n);if(u)if(h.isClipMask()){var c=st.create("clipPath");c.appendChild(u),f(h,c,"clip"),st.set(a,{"clip-path":"url(#"+c.id+")"})}else a.appendChild(u)}return a}function r(t){var n=t._type,s=t._radius,r=i(t._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var a=t._size,o=a.width,l=a.height;r.x-=o/2,r.y-=l/2,r.width=o,r.height=l,s.isZero()&&(s=null)}return s&&("circle"===n?r.r=s:(r.rx=s.width,r.ry=s.height)),st.create(n,r,e)}var a,o={Group:n,Layer:n,Raster:function(t,n){var s=i(t._matrix,!0),r=t.getSize(),a=t.getImage();return s.x-=r.width/2,s.y-=r.height/2,s.width=r.width,s.height=r.height,s.href=0==n.embedImages&&a&&a.src||t.toDataURL(),st.create("image",s,e)},Path:function(t,n){var s=n.matchShapes;if(s){var a=t.toShape(!1);if(a)return r(a)}var o,l=t._segments,h=l.length,u=i(t._matrix);if(s&&h>=2&&!t.hasHandles())if(h>2){o=t._closed?"polygon":"polyline";for(var c=[],d=0;d<h;d++)c.push(e.point(l[d]._point));u.points=c.join(" ")}else{o="line";var p=l[0]._point,f=l[1]._point;u.set({x1:p.x,y1:p.y,x2:f.x,y2:f.y})}else o="path",u.d=t.getPathData(null,n.precision);return st.create(o,u,e)},Shape:r,CompoundPath:function(t,n){var s=i(t._matrix),r=t.getPathData(null,n.precision);return r&&(s.d=r),st.create("path",s,e)},SymbolItem:function(t,n){var s=i(t._matrix,!0),r=t._definition,a=p(r,"symbol"),o=r._item,l=o.getStrokeBounds();return a||((a=st.create("symbol",{viewBox:e.rectangle(l)})).appendChild(m(o,n)),f(r,a,"symbol")),s.href="#"+a.id,s.x+=l.x,s.y+=l.y,s.width=l.width,s.height=l.height,s.overflow="visible",st.create("use",s,e)},PointText:function(t){var n=st.create("text",i(t._matrix,!0),e);return n.textContent=t._content,n}};function l(t,i,n){var r={},a=!n&&t.getParent(),o=[];return null!=t._name&&(r.id=t._name),s.each(rt,(function(i){var n=i.get,l=i.type,h=t[n]();if(i.exportFilter?i.exportFilter(t,h):!a||!s.equals(a[n](),h)){if("color"===l&&null!=h){var u=h.getAlpha();u<1&&(r[i.attribute+"-opacity"]=u)}"style"===l?o.push(i.attribute+": "+h):r[i.attribute]=null==h?"none":"color"===l?h.gradient?function(t){var i=p(t,"color");if(!i){var n,s=t.getGradient(),r=s._radial,a=t.getOrigin(),o=t.getDestination();if(r){n={cx:a.x,cy:a.y,r:a.getDistance(o)};var l=t.getHighlight();l&&(n.fx=l.x,n.fy=l.y)}else n={x1:a.x,y1:a.y,x2:o.x,y2:o.y};n.gradientUnits="userSpaceOnUse",i=st.create((r?"radial":"linear")+"Gradient",n,e);for(var h=s._stops,u=0,c=h.length;u<c;u++){var d=h[u],g=d._color,v=g.getAlpha(),m=d._offset;n={offset:null==m?u/(c-1):m},g&&(n["stop-color"]=g.toCSS(!0)),v<1&&(n["stop-opacity"]=v),i.appendChild(st.create("stop",n,e))}f(t,i,"color")}return"url(#"+i.id+")"}(h):h.toCSS(!0):"array"===l?h.join(","):"lookup"===l?i.toSVG[h]:h}})),o.length&&(r.style=o.join(";")),1===r.opacity&&delete r.opacity,t._visible||(r.visibility="hidden"),st.set(i,r,e)}function p(t,e){return a||(a={ids:{},svgs:{}}),t&&a.svgs[e+"-"+(t._id||t.__id||(t.__id=c.get("svg")))]}function f(t,e,i){a||p();var n=a.ids[i]=(a.ids[i]||0)+1;e.id=i+"-"+n,a.svgs[i+"-"+(t._id||t.__id)]=e}function g(e,i){var n=e,s=null;if(a){for(var r in n="svg"===e.nodeName.toLowerCase()&&e,a.svgs)s||(n||(n=st.create("svg")).appendChild(e),s=n.insertBefore(st.create("defs"),n.firstChild)),s.appendChild(a.svgs[r]);a=null}return i.asString?(new t.XMLSerializer).serializeToString(n):n}function m(t,e,i){var n=o[t._class],s=n&&n(t,e);if(s){var r=e.onExport;r&&(s=r(t,s,e)||s);var a=JSON.stringify(t._data);a&&"{}"!==a&&"null"!==a&&s.setAttribute("data-paper-data",a)}return s&&l(t,s,i)}function y(t){return t||(t={}),e=new h(t.precision),t}w.inject({exportSVG:function(t){return g(m(this,t=y(t),!0),t)}}),x.inject({exportSVG:function(t){t=y(t);var n=this._children,r=this.getView(),a=s.pick(t.bounds,"view"),o=t.matrix||"view"===a&&r._matrix,l=o&&_.read([o]),h="view"===a?new v([0,0],r.getViewSize()):"content"===a?w._getBounds(n,l,{stroke:!0}).rect:v.read([a],0,{readNull:!0}),u={version:"1.1",xmlns:st.svg,"xmlns:xlink":st.xlink};h&&(u.width=h.width,u.height=h.height,(h.x||0===h.x||h.y||0===h.y)&&(u.viewBox=e.rectangle(h)));var c=st.create("svg",u,e),d=c;l&&!l.isIdentity()&&(d=c.appendChild(st.create("g",i(l),e)));for(var p=0,f=n.length;p<f;p++)d.appendChild(m(n[p],t,!0));return g(c,t)}})},new function(){var r,a={};function o(t,e,i,n,s,a){var o=st.get(t,e)||a,l=null==o?n?null:i?"":0:i?o:parseFloat(o);return/%\s*$/.test(o)?l/100*(s?1:r[/x|^width/.test(e)?"width":"height"]):l}function l(t,e,i,n,s,r,a){return e=o(t,e||"x",!1,n,s,r),i=o(t,i||"y",!1,n,s,a),!n||null!=e&&null!=i?new d(e,i):null}function h(t,e,i,n,s){return e=o(t,e||"width",!1,n,s),i=o(t,i||"height",!1,n,s),!n||null!=e&&null!=i?new f(e,i):null}function u(t,e,i){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?P(t)||t:"lookup"===e?i[t]:t}function c(t,e,i,n){var s=t.childNodes,r="clippath"===e,a="defs"===e,o=new A,l=o._project,h=l._currentStyle,u=[];if(r||a||(o=T(o,t,n),l._currentStyle=o._style.clone()),n)for(var c=t.querySelectorAll("defs"),d=0,p=c.length;d<p;d++)O(c[d],i,!1);for(d=0,p=s.length;d<p;d++){var f,g=s[d];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(f=O(g,i,!1))||f instanceof I||u.push(f)}return o.addChildren(u),r&&(o=T(o.reduce(),t,n)),l._currentStyle=h,(r||a)&&(o.remove(),o=null),o}function p(t,e){for(var i=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],s=0,r=i.length;s<r;s+=2)n.push(new d(parseFloat(i[s]),parseFloat(i[s+1])));var a=new R(n);return"polygon"===e&&a.closePath(),a}function g(t,e){var i,n=(o(t,"href",!0)||"").substring(1),s="radialgradient"===e;if(n)(i=a[n].getGradient())._radial^s&&((i=i.clone())._radial=s);else{for(var r=t.childNodes,h=[],u=0,c=r.length;u<c;u++){var d=r[u];1===d.nodeType&&h.push(T(new F,d))}i=new j(h,s)}var p,f,g,v="userSpaceOnUse"!==o(t,"gradientUnits",!0);return s?(f=(p=l(t,"cx","cy",!1,v,"50%","50%")).add(o(t,"r",!1,!1,v,"50%"),0),g=l(t,"fx","fy",!0,v)):(p=l(t,"x1","y1",!1,v,"0%","0%"),f=l(t,"x2","y2",!1,v,"100%","0%")),T(new U(i,p,f,g),t)._scaleToBounds=v,null}var m={"#document":function(t,e,i,n){for(var s=t.childNodes,r=0,a=s.length;r<a;r++){var o=s[r];if(1===o.nodeType)return O(o,i,n)}},g:c,svg:c,clippath:c,polygon:p,polyline:p,path:function(t){return B.create(t.getAttribute("d"))},lineargradient:g,radialgradient:g,image:function(t){var e=new k(o(t,"href",!0));return e.on("load",(function(){var e=h(t);this.setSize(e);var i=l(t).add(e.divide(2));this._matrix.append((new _).translate(i))})),e},symbol:function(t,e,i,n){return new I(c(t,e,i,n),!0)},defs:c,use:function(t){var e=(o(t,"href",!0)||"").substring(1),i=a[e],n=l(t);return i?i instanceof I?i.place(n):i.clone().translate(n):null},circle:function(t){return new C.Circle(l(t,"cx","cy"),o(t,"r"))},ellipse:function(t){return new C.Ellipse({center:l(t,"cx","cy"),radius:h(t,"rx","ry")})},rect:function(t){return new C.Rectangle(new v(l(t),h(t)),h(t,"rx","ry"))},line:function(t){return new R.Line(l(t,"x1","y1"),l(t,"x2","y2"))},text:function(t){var e=new z(l(t).add(l(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:c};function y(t,e,i,n){if(t.transform){for(var s=(n.getAttribute(i)||"").split(/\)\s*/g),r=new _,a=0,o=s.length;a<o;a++){var l=s[a];if(!l)break;for(var h=l.split(/\(\s*/),u=h[0],c=h[1].split(/[\s,]+/g),d=0,p=c.length;d<p;d++)c[d]=parseFloat(c[d]);switch(u){case"matrix":r.append(new _(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":r.rotate(c[0],c[1]||0,c[2]||0);break;case"translate":r.translate(c[0],c[1]||0);break;case"scale":r.scale(c);break;case"skewX":r.skew(c[0],0);break;case"skewY":r.skew(0,c[0])}}t.transform(r)}}function b(t,e,i){var n="fill-opacity"===i?"getFillColor":"getStrokeColor",s=t[n]&&t[n]();s&&s.setAlpha(parseFloat(e))}var S=s.set(s.each(rt,(function(t){this[t.attribute]=function(e,i){if(e[t.set]&&(e[t.set](u(i,t.type,t.fromSVG)),"color"===t.type)){var n=e[t.get]();if(n&&n._scaleToBounds){var s=e.getBounds();n.transform((new _).translate(s.getPoint()).scale(s.getSize()))}}}}),{}),{id:function(t,e){a[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var i=P(e);if(i){if((i=i.clone()).setClipMask(!0),!(t instanceof A))return new A(i,t);t.insertChild(0,i)}},gradientTransform:y,transform:y,"fill-opacity":b,"stroke-opacity":b,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var i=e.match(/(.*)%$/);t.setOffset(i?i[1]/100:parseFloat(e))}},viewBox:function(t,e,i,n,s){var r,a=new v(u(e,"array")),o=h(n,null,null,!0);if(t instanceof A){var l=o?o.divide(a.getSize()):1,c=(new _).scale(l).translate(a.getPoint().negate());r=t}else t instanceof I&&(o&&a.setSize(o),r=t._item);if(r){if("visible"!==E(n,"overflow",s)){var d=new C.Rectangle(a);d.setClipMask(!0),r.addChild(d)}c&&r.transform(c)}}});function E(t,i,n){var r=t.attributes[i],a=r&&r.value;if(!a&&t.style){var o=s.camelize(i);(a=t.style[o])||n.node[o]===n.parent[o]||(a=n.node[o])}return a?"none"===a?null:a:e}function T(t,i,n){var r=i.parentNode,a={node:q.getStyles(i)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&q.getStyles(r)||{}};return s.each(S,(function(n,s){var r=E(i,s,a);t=r!==e&&n(t,r,s,i,a)||t})),t}function P(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],s=n&&a[i?n.replace(i.location.href.split("#")[0]+"#",""):n];return s&&s._scaleToBounds&&((s=s.clone())._scaleToBounds=!0),s}function O(t,e,i){var o,l,u,c=t.nodeName.toLowerCase(),d="#document"!==c,p=n.body;i&&d&&(r=at.getView().getSize(),r=h(t,null,null,!0)||r,o=st.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),l=t.parentNode,u=t.nextSibling,o.appendChild(t),p.appendChild(o));var f=at.settings,g=f.applyMatrix,v=f.insertItems;f.applyMatrix=!1,f.insertItems=!1;var _=m[c],y=_&&_(t,c,e,i)||null;if(f.insertItems=v,f.applyMatrix=g,y){!d||y instanceof A||(y=T(y,t,i));var x=e.onImport,w=d&&t.getAttribute("data-paper-data");x&&(y=x(t,y,e)||y),e.expandShapes&&y instanceof C&&(y.remove(),y=y.toPath()),w&&(y._data=JSON.parse(w))}return o&&(p.removeChild(o),l&&(u?l.insertBefore(t,u):l.appendChild(t))),i&&(a={},y&&s.pick(e.applyMatrix,g)&&y.matrix.apply(!0,!0)),y}function M(i,s,r){if(!i)return null;s="function"==typeof s?{onLoad:s}:s||{};var a=at,o=null;function l(n){try{var l="object"==typeof n?n:(new t.DOMParser).parseFromString(n.trim(),"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+i);at=a,o=O(l,s,!0),s&&!1===s.insert||r._insertItem(e,o);var u=s.onLoad;u&&u(o,n)}catch(c){h(c)}}function h(t,e){var i=s.onError;if(!i)throw new Error(t);i(t,e)}if("string"!=typeof i||/^[\s\S]*</.test(i)){if("undefined"!=typeof File&&i instanceof File){var u=new FileReader;return u.onload=function(){l(u.result)},u.onerror=function(){h(u.error)},u.readAsText(i)}l(i)}else{var c=n.getElementById(i);c?l(c):et({url:i,async:!0,onLoad:l,onError:h})}return o}w.inject({importSVG:function(t,e){return M(t,e,this)}}),x.inject({importSVG:function(t,e){return this.activate(),M(t,e,this)}})},s.exports.PaperScript=function(){var r,o,l,h,u=this,c=u.acorn;if(!c&&void 0!==yt)try{c=pi()}catch(C){}function p(t,e){return(u.acorn||c).parse(t,e)}c||(c=r=o={},l=this,h=function(t){var e,i,n,s;t.version="0.5.0",t.parse=function(t,s){return i=String(t),n=i.length,a(s),Jt(),function(t){m=_=o,e.locations&&(y=new Gt),x=A=null,w=[],$t();var i=t||ce(),n=!0;for(t||(i.body=[]);d!==O;){var s=be();i.body.push(s),n&&fe(s)&&le(!0),n=!1}return pe(i,"Program")}(e.program)};var r=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function a(t){for(var i in e=t||{},r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i]);s=e.sourceFile||null}var o,l,h,u,c,d,p,f,g,v,m,_,y,x,w,A,b=t.getLineInfo=function(t,e){for(var i=1,n=0;;){Qt.lastIndex=n;var s=Qt.exec(t);if(!(s&&s.index<e))break;++i,n=s.index+s[0].length}return{line:i,column:e-n}};function k(t,e){var n=b(i,t);e+=" ("+n.line+":"+n.column+")";var s=new SyntaxError(e);throw s.pos=t,s.loc=n,s.raisedAt=o,s}t.tokenize=function(t,s){i=String(t),n=i.length,a(s),Jt();var r={};function m(t){return _=h,$t(t),r.start=l,r.end=h,r.startLoc=u,r.endLoc=c,r.type=d,r.value=p,r}return m.jumpTo=function(t,n){var s;if(o=t,e.locations)for(g=1,v=Qt.lastIndex=0;(s=Qt.exec(i))&&s.index<t;)++g,v=s.index+s[0].length;f=n,Kt()},m};var S=[],I={type:"num"},E={type:"regexp"},T={type:"string"},P={type:"name"},O={type:"eof"},M={keyword:"break"},B={keyword:"case",beforeExpr:!0},R={keyword:"catch"},N={keyword:"continue"},L={keyword:"debugger"},D={keyword:"default"},V={keyword:"do",isLoop:!0},z={keyword:"else",beforeExpr:!0},U={keyword:"finally"},j={keyword:"for",isLoop:!0},F={keyword:"function"},Q={keyword:"if"},q={keyword:"return",beforeExpr:!0},H={keyword:"switch"},G={keyword:"throw",beforeExpr:!0},J={keyword:"try"},W={keyword:"var"},Z={keyword:"while",isLoop:!0},X={keyword:"with"},K={keyword:"new",beforeExpr:!0},Y={keyword:"this"},$={keyword:"null",atomValue:null},tt={keyword:"true",atomValue:!0},et={keyword:"false",atomValue:!1},it={keyword:"in",binop:7,beforeExpr:!0},nt={break:M,case:B,catch:R,continue:N,debugger:L,default:D,do:V,else:z,finally:U,for:j,function:F,if:Q,return:q,switch:H,throw:G,try:J,var:W,while:Z,with:X,null:$,true:tt,false:et,new:K,in:it,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Y,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},st={type:"[",beforeExpr:!0},rt={type:"]"},at={type:"{",beforeExpr:!0},ot={type:"}"},lt={type:"(",beforeExpr:!0},ht={type:")"},ut={type:",",beforeExpr:!0},ct={type:";",beforeExpr:!0},dt={type:":",beforeExpr:!0},pt={type:"."},ft={type:"?",beforeExpr:!0},gt={binop:10,beforeExpr:!0},vt={isAssign:!0,beforeExpr:!0},mt={isAssign:!0,beforeExpr:!0},_t={postfix:!0,prefix:!0,isUpdate:!0},yt={prefix:!0,beforeExpr:!0},xt={binop:1,beforeExpr:!0},wt={binop:2,beforeExpr:!0},At={binop:3,beforeExpr:!0},bt={binop:4,beforeExpr:!0},Ct={binop:5,beforeExpr:!0},kt={binop:6,beforeExpr:!0},St={binop:7,beforeExpr:!0},It={binop:8,beforeExpr:!0},Et={binop:9,prefix:!0,beforeExpr:!0},Tt={binop:10,beforeExpr:!0};for(var Pt in t.tokTypes={bracketL:st,bracketR:rt,braceL:at,braceR:ot,parenL:lt,parenR:ht,comma:ut,semi:ct,colon:dt,dot:pt,question:ft,slash:gt,eq:vt,name:P,eof:O,num:I,regexp:E,string:T},nt)t.tokTypes["_"+Pt]=nt[Pt];function Ot(t){t=t.split(" ");var e="",i=[];t:for(var n=0;n<t.length;++n){for(var s=0;s<i.length;++s)if(i[s][0].length==t[n].length){i[s].push(t[n]);continue t}i.push([t[n]])}function r(t){if(1==t.length)return e+="return str === "+JSON.stringify(t[0])+";";e+="switch(str){";for(var i=0;i<t.length;++i)e+="case "+JSON.stringify(t[i])+":";e+="return true}return false;"}if(i.length>3){for(i.sort((function(t,e){return e.length-t.length})),e+="switch(str.length){",n=0;n<i.length;++n){var a=i[n];e+="case "+a[0].length+":",r(a)}e+="}"}else r(t);return new Function("str",e)}var Mt,Bt=Ot("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Rt=Ot("class enum extends super const export import"),Nt=Ot("implements interface let package private protected public static yield"),Lt=Ot("eval arguments"),Dt=Ot("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Vt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,zt="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ut=new RegExp("["+zt+"]"),jt=new RegExp("["+zt+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),Ft=/[\n\r\u2028\u2029]/,Qt=/\r\n|[\n\r\u2028\u2029]/g,qt=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Ut.test(String.fromCharCode(t)))},Ht=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&jt.test(String.fromCharCode(t))))};function Gt(){this.line=g,this.column=o-v}function Jt(){g=1,o=v=0,f=!0,Kt()}function Wt(t,i){h=o,e.locations&&(c=new Gt),d=t,Kt(),p=i,f=t.beforeExpr}function Zt(){var t,n=e.onComment&&e.locations&&new Gt,s=o,r=i.indexOf("*/",o+=2);if(-1===r&&k(o-2,"Unterminated comment"),o=r+2,e.locations)for(Qt.lastIndex=s;(t=Qt.exec(i))&&t.index<o;)++g,v=t.index+t[0].length;e.onComment&&e.onComment(!0,i.slice(s+2,r),s,o,n,e.locations&&new Gt)}function Xt(){for(var t=o,s=e.onComment&&e.locations&&new Gt,r=i.charCodeAt(o+=2);o<n&&10!==r&&13!==r&&8232!==r&&8233!==r;)++o,r=i.charCodeAt(o);e.onComment&&e.onComment(!1,i.slice(t+2,o),t,o,s,e.locations&&new Gt)}function Kt(){for(;o<n;){var t=i.charCodeAt(o);if(32===t)++o;else if(13===t)++o,10===(s=i.charCodeAt(o))&&++o,e.locations&&(++g,v=o);else if(10===t||8232===t||8233===t)++o,e.locations&&(++g,v=o);else if(t>8&&t<14)++o;else if(47===t){var s;if(42===(s=i.charCodeAt(o+1)))Zt();else{if(47!==s)break;Xt()}}else if(160===t)++o;else{if(!(t>=5760&&Vt.test(String.fromCharCode(t))))break;++o}}}function Yt(t){switch(t){case 46:return function(){var t=i.charCodeAt(o+1);return t>=48&&t<=57?ne(!0):(++o,Wt(pt))}();case 40:return++o,Wt(lt);case 41:return++o,Wt(ht);case 59:return++o,Wt(ct);case 44:return++o,Wt(ut);case 91:return++o,Wt(st);case 93:return++o,Wt(rt);case 123:return++o,Wt(at);case 125:return++o,Wt(ot);case 58:return++o,Wt(dt);case 63:return++o,Wt(ft);case 48:var s=i.charCodeAt(o+1);if(120===s||88===s)return function(){o+=2;var t=ie(16);return null==t&&k(l+2,"Expected hexadecimal number"),qt(i.charCodeAt(o))&&k(o,"Identifier directly after number"),Wt(I,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ne(!1);case 34:case 39:return function(t){o++;for(var s="";;){o>=n&&k(l,"Unterminated string constant");var r=i.charCodeAt(o);if(r===t)return++o,Wt(T,s);if(92===r){r=i.charCodeAt(++o);var a=/^[0-7]+/.exec(i.slice(o,o+3));for(a&&(a=a[0]);a&&parseInt(a,8)>255;)a=a.slice(0,-1);if("0"===a&&(a=null),++o,a)A&&k(o-2,"Octal literal in strict mode"),s+=String.fromCharCode(parseInt(a,8)),o+=a.length-1;else switch(r){case 110:s+="\n";break;case 114:s+="\r";break;case 120:s+=String.fromCharCode(se(2));break;case 117:s+=String.fromCharCode(se(4));break;case 85:s+=String.fromCharCode(se(8));break;case 116:s+="\t";break;case 98:s+="\b";break;case 118:s+="\v";break;case 102:s+="\f";break;case 48:s+="\0";break;case 13:10===i.charCodeAt(o)&&++o;case 10:e.locations&&(v=o,++g);break;default:s+=String.fromCharCode(r)}}else 13!==r&&10!==r&&8232!==r&&8233!==r||k(l,"Unterminated string constant"),s+=String.fromCharCode(r),++o}}(t);case 47:return function(){var t=i.charCodeAt(o+1);return f?(++o,ee()):61===t?te(mt,2):te(gt,1)}();case 37:case 42:return 61===i.charCodeAt(o+1)?te(mt,2):te(Tt,1);case 124:case 38:return function(t){var e=i.charCodeAt(o+1);return e===t?te(124===t?xt:wt,2):61===e?te(mt,2):te(124===t?At:Ct,1)}(t);case 94:return 61===i.charCodeAt(o+1)?te(mt,2):te(bt,1);case 43:case 45:return function(t){var e=i.charCodeAt(o+1);return e===t?45==e&&62==i.charCodeAt(o+2)&&Ft.test(i.slice(_,o))?(o+=3,Xt(),Kt(),$t()):te(_t,2):61===e?te(mt,2):te(Et,1)}(t);case 60:case 62:return function(t){var e=i.charCodeAt(o+1),n=1;return e===t?(n=62===t&&62===i.charCodeAt(o+2)?3:2,61===i.charCodeAt(o+n)?te(mt,n+1):te(It,n)):33==e&&60==t&&45==i.charCodeAt(o+2)&&45==i.charCodeAt(o+3)?(o+=4,Xt(),Kt(),$t()):(61===e&&(n=61===i.charCodeAt(o+2)?3:2),te(St,n))}(t);case 61:case 33:return function(t){return 61===i.charCodeAt(o+1)?te(kt,61===i.charCodeAt(o+2)?3:2):te(61===t?vt:yt,1)}(t);case 126:return te(yt,1)}return!1}function $t(t){if(t?o=l+1:l=o,e.locations&&(u=new Gt),t)return ee();if(o>=n)return Wt(O);var s=i.charCodeAt(o);if(qt(s)||92===s)return ae();var r=Yt(s);if(!1===r){var a=String.fromCharCode(s);if("\\"===a||Ut.test(a))return ae();k(o,"Unexpected character '"+a+"'")}return r}function te(t,e){var n=i.slice(o,o+e);o+=e,Wt(t,n)}function ee(){for(var t,e,s=o;;){o>=n&&k(s,"Unterminated regular expression");var r=i.charAt(o);if(Ft.test(r)&&k(s,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++o}var a=i.slice(s,o);++o;var l=re();l&&!/^[gmsiy]*$/.test(l)&&k(s,"Invalid regexp flag");try{var h=new RegExp(a,l)}catch(C){C instanceof SyntaxError&&k(s,C.message),k(C)}return Wt(E,h)}function ie(t,e){for(var n=o,s=0,r=0,a=null==e?1/0:e;r<a;++r){var l,h=i.charCodeAt(o);if((l=h>=97?h-97+10:h>=65?h-65+10:h>=48&&h<=57?h-48:1/0)>=t)break;++o,s=s*t+l}return o===n||null!=e&&o-n!==e?null:s}function ne(t){var e=o,n=!1,s=48===i.charCodeAt(o);t||null!==ie(10)||k(e,"Invalid number"),46===i.charCodeAt(o)&&(++o,ie(10),n=!0);var r=i.charCodeAt(o);69!==r&&101!==r||(43!==(r=i.charCodeAt(++o))&&45!==r||++o,null===ie(10)&&k(e,"Invalid number"),n=!0),qt(i.charCodeAt(o))&&k(o,"Identifier directly after number");var a,l=i.slice(e,o);return n?a=parseFloat(l):s&&1!==l.length?/[89]/.test(l)||A?k(e,"Invalid number"):a=parseInt(l,8):a=parseInt(l,10),Wt(I,a)}function se(t){var e=ie(16,t);return null===e&&k(l,"Bad character escape sequence"),e}function re(){Mt=!1;for(var t,e=!0,n=o;;){var s=i.charCodeAt(o);if(Ht(s))Mt&&(t+=i.charAt(o)),++o;else{if(92!==s)break;Mt||(t=i.slice(n,o)),Mt=!0,117!=i.charCodeAt(++o)&&k(o,"Expecting Unicode escape sequence \\uXXXX"),++o;var r=se(4),a=String.fromCharCode(r);a||k(o-1,"Invalid Unicode escape"),(e?qt(r):Ht(r))||k(o-4,"Invalid Unicode escape"),t+=a}e=!1}return Mt?t:i.slice(n,o)}function ae(){var t=re(),e=P;return!Mt&&Dt(t)&&(e=nt[t]),Wt(e,t)}function oe(){m=l,_=h,y=c,$t()}function le(t){if(A=t,o=l,e.locations)for(;o<v;)v=i.lastIndexOf("\n",v-2)+1,--g;Kt(),$t()}function he(){this.type=null,this.start=l,this.end=null}function ue(){this.start=u,this.end=null,null!==s&&(this.source=s)}function ce(){var t=new he;return e.locations&&(t.loc=new ue),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[l,0]),t}function de(t){var i=new he;return i.start=t.start,e.locations&&(i.loc=new ue,i.loc.start=t.loc.start),e.ranges&&(i.range=[t.range[0],0]),i}function pe(t,i){return t.type=i,t.end=_,e.locations&&(t.loc.end=y),e.ranges&&(t.range[1]=_),t}function fe(t){return e.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function ge(t){if(d===t)return oe(),!0}function ve(){return!e.strictSemicolons&&(d===O||d===ot||Ft.test(i.slice(_,l)))}function me(){ge(ct)||ve()||ye()}function _e(t){d===t?oe():ye()}function ye(){k(l,"Unexpected token")}function xe(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&k(t.start,"Assigning to rvalue"),A&&"Identifier"===t.type&&Lt(t.name)&&k(t.start,"Assigning to "+t.name+" in strict mode")}var we={kind:"loop"},Ae={kind:"switch"};function be(){(d===gt||d===mt&&"/="==p)&&$t(!0);var t=d,n=ce();switch(t){case M:case N:oe();var s=t===M;ge(ct)||ve()?n.label=null:d!==P?ye():(n.label=Ve(),me());for(var r=0;r<w.length;++r){var a=w[r];if(null==n.label||a.name===n.label.name){if(null!=a.kind&&(s||"loop"===a.kind))break;if(n.label&&s)break}}return r===w.length&&k(n.start,"Unsyntactic "+t.keyword),pe(n,s?"BreakStatement":"ContinueStatement");case L:return oe(),me(),pe(n,"DebuggerStatement");case V:return oe(),w.push(we),n.body=be(),w.pop(),_e(Z),n.test=Ce(),me(),pe(n,"DoWhileStatement");case j:if(oe(),w.push(we),_e(lt),d===ct)return Se(n,null);if(d===W){var o=ce();return oe(),Ee(o,!0),pe(o,"VariableDeclaration"),1===o.declarations.length&&ge(it)?Ie(n,o):Se(n,o)}return o=Te(!1,!0),ge(it)?(xe(o),Ie(n,o)):Se(n,o);case F:return oe(),Le(n,!0);case Q:return oe(),n.test=Ce(),n.consequent=be(),n.alternate=ge(z)?be():null,pe(n,"IfStatement");case q:return x||e.allowReturnOutsideFunction||k(l,"'return' outside of function"),oe(),ge(ct)||ve()?n.argument=null:(n.argument=Te(),me()),pe(n,"ReturnStatement");case H:oe(),n.discriminant=Ce(),n.cases=[],_e(at),w.push(Ae);for(var h,u;d!=ot;)if(d===B||d===D){var c=d===B;h&&pe(h,"SwitchCase"),n.cases.push(h=ce()),h.consequent=[],oe(),c?h.test=Te():(u&&k(m,"Multiple default clauses"),u=!0,h.test=null),_e(dt)}else h||ye(),h.consequent.push(be());return h&&pe(h,"SwitchCase"),oe(),w.pop(),pe(n,"SwitchStatement");case G:return oe(),Ft.test(i.slice(_,l))&&k(_,"Illegal newline after throw"),n.argument=Te(),me(),pe(n,"ThrowStatement");case J:if(oe(),n.block=ke(),n.handler=null,d===R){var f=ce();oe(),_e(lt),f.param=Ve(),A&&Lt(f.param.name)&&k(f.param.start,"Binding "+f.param.name+" in strict mode"),_e(ht),f.guard=null,f.body=ke(),n.handler=pe(f,"CatchClause")}return n.guardedHandlers=S,n.finalizer=ge(U)?ke():null,n.handler||n.finalizer||k(n.start,"Missing catch or finally clause"),pe(n,"TryStatement");case W:return oe(),Ee(n),me(),pe(n,"VariableDeclaration");case Z:return oe(),n.test=Ce(),w.push(we),n.body=be(),w.pop(),pe(n,"WhileStatement");case X:return A&&k(l,"'with' in strict mode"),oe(),n.object=Ce(),n.body=be(),pe(n,"WithStatement");case at:return ke();case ct:return oe(),pe(n,"EmptyStatement");default:var g=p,v=Te();if(t===P&&"Identifier"===v.type&&ge(dt)){for(r=0;r<w.length;++r)w[r].name===g&&k(v.start,"Label '"+g+"' is already declared");var y=d.isLoop?"loop":d===H?"switch":null;return w.push({name:g,kind:y}),n.body=be(),w.pop(),n.label=v,pe(n,"LabeledStatement")}return n.expression=v,me(),pe(n,"ExpressionStatement")}}function Ce(){_e(lt);var t=Te();return _e(ht),t}function ke(t){var e,i=ce(),n=!0,s=!1;for(i.body=[],_e(at);!ge(ot);){var r=be();i.body.push(r),n&&t&&fe(r)&&(e=s,le(s=!0)),n=!1}return s&&!e&&le(!1),pe(i,"BlockStatement")}function Se(t,e){return t.init=e,_e(ct),t.test=d===ct?null:Te(),_e(ct),t.update=d===ht?null:Te(),_e(ht),t.body=be(),w.pop(),pe(t,"ForStatement")}function Ie(t,e){return t.left=e,t.right=Te(),_e(ht),t.body=be(),w.pop(),pe(t,"ForInStatement")}function Ee(t,e){for(t.declarations=[],t.kind="var";;){var i=ce();if(i.id=Ve(),A&&Lt(i.id.name)&&k(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=ge(vt)?Te(!0,e):null,t.declarations.push(pe(i,"VariableDeclarator")),!ge(ut))break}return t}function Te(t,e){var i=Pe(e);if(!t&&d===ut){var n=de(i);for(n.expressions=[i];ge(ut);)n.expressions.push(Pe(e));return pe(n,"SequenceExpression")}return i}function Pe(t){var e=function(t){var e=function(t){return Oe(Me(),-1,t)}(t);if(ge(ft)){var i=de(e);return i.test=e,i.consequent=Te(!0),_e(dt),i.alternate=Te(!0,t),pe(i,"ConditionalExpression")}return e}(t);if(d.isAssign){var i=de(e);return i.operator=p,i.left=e,oe(),i.right=Pe(t),xe(e),pe(i,"AssignmentExpression")}return e}function Oe(t,e,i){var n=d.binop;if(null!=n&&(!i||d!==it)&&n>e){var s=de(t);s.left=t,s.operator=p;var r=d;return oe(),s.right=Oe(Me(),n,i),Oe(pe(s,r===xt||r===wt?"LogicalExpression":"BinaryExpression"),e,i)}return t}function Me(){if(d.prefix){var t=ce(),e=d.isUpdate;return t.operator=p,t.prefix=!0,f=!0,oe(),t.argument=Me(),e?xe(t.argument):A&&"delete"===t.operator&&"Identifier"===t.argument.type&&k(t.start,"Deleting local variable in strict mode"),pe(t,e?"UpdateExpression":"UnaryExpression")}for(var i=Be(Re());d.postfix&&!ve();)(t=de(i)).operator=p,t.prefix=!1,t.argument=i,xe(i),oe(),i=pe(t,"UpdateExpression");return i}function Be(t,e){var i;return ge(pt)?((i=de(t)).object=t,i.property=Ve(!0),i.computed=!1,Be(pe(i,"MemberExpression"),e)):ge(st)?((i=de(t)).object=t,i.property=Te(),i.computed=!0,_e(rt),Be(pe(i,"MemberExpression"),e)):!e&&ge(lt)?((i=de(t)).callee=t,i.arguments=De(ht,!1),Be(pe(i,"CallExpression"),e)):t}function Re(){switch(d){case Y:var t=ce();return oe(),pe(t,"ThisExpression");case P:return Ve();case I:case T:case E:return(t=ce()).value=p,t.raw=i.slice(l,h),oe(),pe(t,"Literal");case $:case tt:case et:return(t=ce()).value=d.atomValue,t.raw=d.keyword,oe(),pe(t,"Literal");case lt:var n=u,s=l;oe();var r=Te();return r.start=s,r.end=h,e.locations&&(r.loc.start=n,r.loc.end=c),e.ranges&&(r.range=[s,h]),_e(ht),r;case st:return t=ce(),oe(),t.elements=De(rt,!0,!0),pe(t,"ArrayExpression");case at:return function(){var t=ce(),i=!0,n=!1;for(t.properties=[],oe();!ge(ot);){if(i)i=!1;else if(_e(ut),e.allowTrailingCommas&&ge(ot))break;var s,r={key:Ne()},a=!1;if(ge(dt)?(r.value=Te(!0),s=r.kind="init"):e.ecmaVersion>=5&&"Identifier"===r.key.type&&("get"===r.key.name||"set"===r.key.name)?(a=n=!0,s=r.kind=r.key.name,r.key=Ne(),d!==lt&&ye(),r.value=Le(ce(),!1)):ye(),"Identifier"===r.key.type&&(A||n))for(var o=0;o<t.properties.length;++o){var l=t.properties[o];if(l.key.name===r.key.name){var h=s==l.kind||a&&"init"===l.kind||"init"===s&&("get"===l.kind||"set"===l.kind);h&&!A&&"init"===s&&"init"===l.kind&&(h=!1),h&&k(r.key.start,"Redefinition of property")}}t.properties.push(r)}return pe(t,"ObjectExpression")}();case F:return t=ce(),oe(),Le(t,!1);case K:return function(){var t=ce();return oe(),t.callee=Be(Re(),!0),ge(lt)?t.arguments=De(ht,!1):t.arguments=S,pe(t,"NewExpression")}();default:ye()}}function Ne(){return d===I||d===T?Re():Ve(!0)}function Le(t,e){d===P?t.id=Ve():e?ye():t.id=null,t.params=[];var i=!0;for(_e(lt);!ge(ht);)i?i=!1:_e(ut),t.params.push(Ve());var n=x,s=w;if(x=!0,w=[],t.body=ke(!0),x=n,w=s,A||t.body.body.length&&fe(t.body.body[0]))for(var r=t.id?-1:0;r<t.params.length;++r){var a=r<0?t.id:t.params[r];if((Nt(a.name)||Lt(a.name))&&k(a.start,"Defining '"+a.name+"' in strict mode"),r>=0)for(var o=0;o<r;++o)a.name===t.params[o].name&&k(a.start,"Argument name clash in strict mode")}return pe(t,e?"FunctionDeclaration":"FunctionExpression")}function De(t,i,n){for(var s=[],r=!0;!ge(t);){if(r)r=!1;else if(_e(ut),i&&e.allowTrailingCommas&&ge(t))break;n&&d===ut?s.push(null):s.push(Te(!0))}return s}function Ve(t){var n=ce();return t&&"everywhere"==e.forbidReserved&&(t=!1),d===P?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?Bt:Rt)(p)||A&&Nt(p))&&-1==i.slice(l,h).indexOf("\\")&&k(l,"The keyword '"+p+"' is reserved"),n.name=p):t&&d.keyword?n.name=d.keyword:ye(),f=!1,oe(),pe(n,"Identifier")}},"object"==typeof r&&"object"==typeof o?h(r):"function"==typeof e&&e.amd?e(["exports"],h):h(l.acorn||(l.acorn={})),c.version||(c=null));var g={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},v={"-":"__negate","+":"__self"},m=s.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(t){this["__"+t]="#"+t}),{__self:function(){return this}});function _(t,e,i){var n=g[e];if(t&&t[n]){var s=t[n](i);return"!="===e?!s:s}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;case"%":return t%i;case"==":return t==i;case"!=":return t!=i}}function y(t,e){var i=v[t];if(e&&e[i])return e[i]();switch(t){case"+":return+e;case"-":return-e}}function x(e,s){if(!e)return"";var r=[];function a(t){for(var e=0,i=r.length;e<i;e++){var n=r[e];if(n[0]>=t)break;t+=n[1]}return t}function o(t){return e.substring(a(t.range[0]),a(t.range[1]))}function l(t,i){for(var n=a(t.range[0]),s=a(t.range[1]),o=0,l=r.length-1;l>=0;l--)if(n>r[l][0]){o=l+1;break}r.splice(o,0,[n,i.length-s+n]),e=e.substring(0,n)+i+e.substring(s)}function h(t,i){switch(t.type){case"UnaryExpression":if(t.operator in v&&"Literal"!==t.argument.type){var n=o(t.argument);l(t,'$__("'+t.operator+'", '+n+")")}break;case"BinaryExpression":if(t.operator in g&&"Literal"!==t.left.type){var s=o(t.left),r=o(t.right),h=function(t,i){return e.substring(a(t.range[1]),a(i.range[0]))}(t.left,t.right),u=t.operator;l(t,"__$__("+s+","+h.replace(new RegExp("\\"+u),'"'+u+'"')+", "+r+")")}break;case"UpdateExpression":case"AssignmentExpression":var c=i&&i.type;if(!("ForStatement"===c||"BinaryExpression"===c&&/^[=!<>]/.test(i.operator)||"MemberExpression"===c&&i.computed))if("UpdateExpression"===t.type){var d=(n=o(t.argument))+" = "+(p="__$__("+n+', "'+t.operator[0]+'", 1)');t.prefix?d="("+d+")":"AssignmentExpression"!==c&&"VariableDeclarator"!==c&&"BinaryExpression"!==c||(o(i.left||i.id)===n&&(d=p),d=n+"; "+d),l(t,d)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){s=o(t.left),r=o(t.right);var p=s+" = __$__("+s+', "'+t.operator[0]+'", '+r+")";l(t,/^\(.*\)$/.test(o(t))?"("+p+")":p)}}}var u,c=(s=s||{}).url||"",d=s.sourceMaps,f=s.paperFeatures||{},m=s.source||e,_=s.offset||0,y=at.agent,x=y.versionNumber,w=!1,A=/\r\n|\n|\r/gm;if(d&&(y.chrome&&x>=30||y.webkit&&x>=537.76||y.firefox&&x>=23||y.node)){if(y.node)_-=2;else if(i&&c&&!i.location.href.indexOf(c)){var b=n.getElementsByTagName("html")[0].innerHTML;_=b.substr(0,b.indexOf(e)+1).match(A).length+1}var C=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var i=31&t;(t>>=5)&&(i|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[i]}return e}((w=_>0&&!(y.chrome&&x>=36||y.safari&&x>=600||y.firefox&&x>=40||y.node))?0:_)+"A"];C.length=(e.match(A)||[]).length+1+(w?_:0),u={version:3,file:c,names:[],mappings:C.join(";AACA"),sourceRoot:"",sources:[c],sourcesContent:[m]}}return!1===f.operatorOverloading&&!1===f.moduleExports||function t(e,i,n){if(e){for(var s in e)if("range"!==s&&"loc"!==s){var r=e[s];if(Array.isArray(r))for(var a=0,u=r.length;a<u;a++)t(r[a],e,n);else r&&"object"==typeof r&&t(r,e,n)}!1!==n.operatorOverloading&&h(e,i),!1!==n.moduleExports&&function(t){switch(t.type){case"ExportDefaultDeclaration":l({range:[t.start,t.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var e=t.declaration,i=t.specifiers;if(e){var n=e.declarations;n&&(n.forEach((function(t){l(t,"module.exports."+o(t))})),l({range:[t.start,e.start+e.kind.length]},""))}else if(i){var s=i.map((function(t){var e=o(t);return"module.exports."+e+" = "+e+"; "})).join("");s&&l(t,s)}}}(e)}}(p(e,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,f),u&&(w&&(e=new Array(_+1).join("\n")+e),/^(inline|both)$/.test(d)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+t.btoa(unescape(encodeURIComponent(JSON.stringify(u))))),e+="\n//# sourceURL="+(c||"paperscript")),{url:c,source:m,code:e,map:u}}function w(t,e,i){at=e;var r,a=e.getView(),o=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new $:null,l=o?o._events:[],h=["onFrame","onResize"].concat(l),u=[],c=[],p="object"==typeof t?t:x(t,i);function f(e,i){for(var n in e)!i&&/^_/.test(n)||!new RegExp("([\\b\\s\\W]|^)"+n.replace(/\$/g,"\\$")+"\\b").test(t)||(u.push(n),c.push(e[n]))}t=p.code,f({__$__:_,$__:y,paper:e,tool:o},!0),f(e),t="var module = { exports: {} }; "+t,(w=s.each(h,(function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(u.push(e),this.push("module.exports."+e+" = "+e+";"))}),[]).join("\n"))&&(t+="\n"+w),t+="\nreturn module.exports;";var g=at.agent;if(n&&(g.chrome||g.firefox&&g.versionNumber<40)){var v=n.createElement("script"),m=n.head||n.getElementsByTagName("head")[0];g.firefox&&(t="\n"+t),v.appendChild(n.createTextNode("document.__paperscript__ = function("+u+") {"+t+"\n}")),m.appendChild(v),r=n.__paperscript__,delete n.__paperscript__,m.removeChild(v)}else r=Function(u,t);var w,A=(w=r&&r.apply(e,c))||{};return s.each(l,(function(t){var e=A[t];e&&(o[t]=e)})),a&&(A.onResize&&a.setOnResize(A.onResize),a.emit("resize",{size:a.size,delta:new d}),A.onFrame&&a.setOnFrame(A.onFrame),a.requestUpdate()),w}function A(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==a.getAttribute(t,"ignore")){var e=a.getAttribute(t,"canvas"),i=n.getElementById(e),s=t.src||t.getAttribute("data-src"),r=a.hasAttribute(t,"async"),o="data-paper-scope";if(!i)throw new Error('Unable to find canvas with id "'+e+'"');var l=a.get(i.getAttribute(o))||(new a).setup(i);return i.setAttribute(o,l._id),s?et({url:s,async:r,mimeType:"text/plain",onLoad:function(t){w(t,l,s)}}):w(t.innerHTML,l,t.baseURI),t.setAttribute("data-paper-ignore","true"),l}}function b(){s.each(n&&n.getElementsByTagName("script"),A)}return d.inject(m),f.inject(m),U.inject(m),i&&("complete"===n.readyState?setTimeout(b):H.add(i,{load:b})),{compile:x,execute:w,load:function(t){return t?A(t):b()},parse:p,calculateBinary:_,calculateUnary:y}}.call(this);var at=new(a.inject(s.exports,{Base:s,Numerical:u,Key:X,DomEvent:H,DomElement:q,document:n,window:i,Symbol:I,PlacedSymbol:S}));return at.agent.node&&xt(at),"function"==typeof e&&e.amd?e("paper",at):ui&&(ui.exports=at),at}.call(_t,"object"==typeof self?self:null);const fi=new(wt(ci.exports).PaperScope);class gi{constructor(t,i){e(this,"width",1024),e(this,"height",700),e(this,"canvas"),e(this,"backgroundImageElement"),e(this,"toolbar"),e(this,"checkerboardImage"),e(this,"backgroundImage"),e(this,"drawingLayer"),e(this,"undoLayer"),e(this,"redoLayer"),e(this,"tool"),e(this,"selectedTool",0),e(this,"movePath",!0),e(this,"removeCmd","Remove-"),e(this,"currentPath",null),e(this,"updateTool",(t=>{this.selectedTool=t})),this.backgroundImageElement=i,this.tool=new vi(this),this.width=i.width,this.height=i.height,this.canvas=t,fi.setup(this.canvas),fi.project.activeLayer.name="EditorWorkspace",this.checkerboardImage=new fi.Raster("/static/png/checkerboard-a58f430c.png"),this.checkerboardImage.name="CheckerboardImage",this.checkerboardImage.position=new fi.Point(0,0),this.checkerboardImage.strokeWidth=0,this.checkerboardImage.scale(Math.max(this.width,this.height)/1024),this.drawingLayer=new fi.Group({name:"Drawing",blendMode:"destination-atop"}),this.undoLayer=new fi.Group({name:"Undo",visible:!1}),this.redoLayer=new fi.Group({name:"Redo",visible:!1}),fi.project.activeLayer.addChildren([new fi.Group({name:"CheckerboardCompositingGroup",children:[this.checkerboardImage,this.drawingLayer],blendMode:"source-over",opacity:.4}),this.undoLayer]),fi.project.activeLayer.addChild(this.redoLayer),fi.view.onFrame=()=>{this.checkerboardImage.visible=!1;for(let t=0;t<this.drawingLayer.children.length;t++)if(this.drawingLayer.children[t].bounds.area>0){this.checkerboardImage.visible=!0;break}},fi.view.onResize=this.onResize.bind(this),this.toolbar=document.getElementById("appbody"),this.onResize(),this.backgroundImage=new fi.Raster(i),this.backgroundImage.name="BackgroundImage",this.backgroundImage.position=new fi.Point(0,0),this.backgroundImage.strokeWidth=0,this.backgroundImage.insertBelow(this.drawingLayer.parent),this.canvas.setAttribute("oncontextmenu","return false;"),fi.settings.handleSize=0}undo(){this.processDoCommand(this.drawingLayer,this.undoLayer,this.redoLayer)}destroy(){this.drawingLayer.remove(),this.undoLayer.remove(),this.redoLayer.remove(),this.canvas.remove(),fi.clear()}submit(){const t=this.drawingLayer.children.length,e=this.drawingLayer.children;if(!t)return Promise.reject("请至少绘制一个区域");let i=0;for(let f=0;f<t;f++){const t=e[f];!t.name.includes("Image")&&(i+=t.bounds.width*t.bounds.height)}if(i<1e4)return Promise.reject("绘制区域过小");const n=fi.view.viewSize.width,s=fi.view.viewSize.height;this.tool.clearSelection(),fi.project.activeLayer.selected=!1,this.currentPath&&(this.currentPath.bounds.selected=!1);const r=this.drawingLayer.parent.opacity;this.drawingLayer.parent.opacity=1,this.drawingLayer.blendMode="normal",this.checkerboardImage.visible=!1,this.onResize({canonicalSpace:!0});const a=new fi.Path.Rectangle(fi.view.bounds);a.fillColor=new fi.Color("#fff"),a.sendToBack();for(let f=0;f<t;f++){const t=e[f];!t.name.includes("Image")&&(t.visible=!0)}const o=[],l=this.backgroundImage;if(l.name&&l.visible&&l.name.includes("Image")){const t=new fi.Path.Rectangle(l.bounds);t.fillColor=new fi.Color("#000"),t.insertAbove(l),t.name="Occluder",o.push(t)}this.tool.clearSelection(),fi.project.activeLayer.selected=!1,this.currentPath&&(this.currentPath.bounds.selected=!1),this.onResize({canonicalSpace:!0}),fi.view.update(),this.tool.clearSelection(),fi.project.activeLayer.selected=!1,this.currentPath&&(this.currentPath.bounds.selected=!1),this.onResize({canonicalSpace:!0});const h=fi.view.getContext(),u=h.getImageData(0,0,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio),c=u.data;for(let f=0;f<c.length;f+=4)c[f+0]=c[f+0]>128?255:0,c[f+1]=c[f+1]>128?255:0,c[f+2]=c[f+2]>128?255:0,c[f+3]=255;h.putImageData(u,0,0);const d=this.canvas.toDataURL("image/webp",1);for(let f=0;f<o.length;f++)o[f].remove(),a.remove(),fi.view.viewSize.set(n,s),fi.view.update(),this.onResize(),this.drawingLayer.parent.opacity=r,this.drawingLayer.blendMode="destination-atop",this.checkerboardImage.visible=!0;const p=d.split(",")[1];return Promise.resolve(p)}processDoCommand(t,e,i){const n=e.lastChild;if(n)if(n.name&&n.name.startsWith(this.removeCmd)){const e=n.name.substring(this.removeCmd.length),s=t.getItem({match:t=>t.name===e});i.addChild(s),n.remove()}else{const e=t.getItem({match:t=>t.name===n.name});if(e){const t=e.clone();t.name=e.name,i.addChild(t),e.replaceWith(n)}else t.addChild(n),i.addChild(new fi.Group({name:this.removeCmd+n.name}))}}onResize(t){let e=0;if(t&&t.canonicalSpace)fi.view.viewSize.set(this.width/window.devicePixelRatio,this.height/window.devicePixelRatio),fi.view.zoom=1/window.devicePixelRatio;else{const t=1.75*this.toolbar.getBoundingClientRect().height;e=t;const i=this.canvas.width/window.devicePixelRatio,n=this.canvas.height/window.devicePixelRatio;fi.view.zoom=Math.max(.01,.95*Math.min(i/this.width,(n-t)/this.height))}fi.view.translate(new fi.Point(fi.view.center.x,fi.view.center.y-.5*e/fi.view.zoom)),fi.view.update()}}class vi extends EventTarget{constructor(t){super(),e(this,"editor"),e(this,"tool"),e(this,"lastTolerance",5),e(this,"button",null),e(this,"minDistance",0),e(this,"markForSave",!1),e(this,"currentSegment"),e(this,"currentPath",null),e(this,"selectionRectPath",null),e(this,"selectedSegments",[]),this.tool=new fi.Tool,this.editor=t,this.tool.onMouseDown=this.onMouseDown.bind(this),this.tool.onMouseDrag=this.onMouseDrag.bind(this),this.tool.onMouseMove=this.onMouseMove.bind(this),this.tool.onMouseUp=this.onMouseUp.bind(this)}hitTestActiveLayer(t){return fi.project.hitTest(t,{segments:!0,stroke:!0,fill:!0,tolerance:this.lastTolerance,match:t=>t.item.layer===fi.project.activeLayer&&!t.item.name.includes("Background")&&!t.item.name.includes("Checkerboard")})}onMouseDown(t){this.clampToBounds(t),this.button=!t.event.button||t.event.button<=0?this.editor.selectedTool:t.event.button,this.minDistance=2===this.button?2*this.lastTolerance:0,this.currentSegment=this.currentPath=null;const e=this.hitTestActiveLayer(t.point);if(!this.button||this.button<=0)this.currentPath=new fi.Path.Rectangle({from:t.point,to:t.point}),this.currentPath.strokeColor=new fi.Color("#eeeeee"),this.currentPath.strokeColor.alpha=1,this.currentPath.strokeCap="round",this.currentPath.isRectangle=!0,this.currentPath.strokeWidth=4,this.currentPath.strokeColor=new fi.Color("rgba(255,255,255,1)"),this.currentPath.dashArray=[10,10],this.currentPath.add(t.point),this.editor.drawingLayer.addChild(this.currentPath);else if(.5===this.button)this.currentPath=new fi.Path({segments:[t.point]}),this.currentPath.strokeWidth=4,this.currentPath.strokeColor=new fi.Color("rgba(255,255,255,1)"),this.currentPath.dashArray=[10,10],this.currentPath.add(t.point),this.currentPath.strokeCap="round",this.currentPath.isStroke=!0,this.currentPath.closed=!0,this.currentPath.fillColor=new fi.Color(1,1,1),this.editor.drawingLayer.addChild(this.currentPath);else if(1===this.button)if(e){if(this.selectedSegments.length>0)this.markForSave=!0;else if(this.currentPath=e.item,this.currentPath&&(this.saveItemStateForUndo(e.item),"stroke"===e.type||"fill"===e.type))if(this.editor.movePath)this.currentSegment=null;else{const i=e.location;this.currentSegment=this.currentPath.insert(i.index+1,t.point),this.currentPath.smooth()}}else this.selectionRectPath=new fi.Path.Rectangle({from:t.point,to:t.point});else if(e&&2===this.button)if(this.selectedSegments.length>0)for(let i=fi.project.selectedItems.length-1;i>=0;i--){const t=fi.project.selectedItems[i];t.selected=!1,this.saveItemStateForUndo(t),t.remove()}else"stroke"===e.type||"fill"===e.type||e.segment.path.segments.length<=2?(this.saveItemStateForUndo(e.item),e.item.remove()):"segment"===e.type&&(this.saveItemStateForUndo(e.item),e.segment.remove())}onMouseMove(t){if(this.clampToBounds(t),0===this.selectedSegments.length){fi.project.activeLayer.selected=!1;const e=this.hitTestActiveLayer(t.point);e&&(e.item.selected=!0,e.item.strokeWidth&&(this.lastTolerance=Math.max(e.item.strokeWidth/4,5)))}}onMouseDrag(t){if(this.clampToBounds(t),!this.button||this.button<=0){if(fi.project.activeLayer.selected=!1,this.currentPath&&this.currentPath.isRectangle){const e=new fi.Path.Rectangle(t.downPoint,t.point);e.fillColor=new fi.Color("#fff"),this.currentPath.replaceWith(e),this.currentPath.remove(),this.currentPath=e,this.currentPath.bounds.selected=!0,this.currentPath.isRectangle=!0}}else if(.5===this.button)fi.project.activeLayer.selected=!1,this.currentPath.add(t.point);else if(1===this.button)if(this.selectionRectPath){const e=new fi.Path.Rectangle(t.downPoint,t.point);this.selectionRectPath.replaceWith(e),this.selectionRectPath.remove(),this.selectionRectPath=e,this.selectionRectPath.bounds.selected=!0,this.selectedSegments=[];for(let t=0;t<fi.project.selectedItems.length;t++)fi.project.selectedItems[t].selected=!1;const i=this.editor.drawingLayer.getItems({overlapping:e.bounds});for(let t=0;t<i.length;t++)if(i[t].segments)for(let e=0;e<i[t].segments.length;e++)this.selectionRectPath.bounds.contains(i[t].segments[e].point)&&(i[t].segments[e].selected=!0,this.selectedSegments.push(i[t].segments[e]))}else if(this.selectedSegments.length>0){if(this.markForSave){for(let t=fi.project.selectedItems.length-1;t>=0;t--)this.saveItemStateForUndo(fi.project.selectedItems[t]);this.markForSave=!1}for(let e=0;e<this.selectedSegments.length;e++)this.selectedSegments[e].point=this.selectedSegments[e].point.add(t.delta)}else this.currentSegment?this.currentSegment.point=this.currentSegment.point.add(t.delta):this.currentPath&&(this.currentPath.position=this.currentPath.position.add(t.delta));else if(2===this.button){const e=this.hitTestActiveLayer(t.point);if(!e)return;"stroke"===e.type||"fill"===e.type||e.segment.path.segments.length<=2?(this.saveItemStateForUndo(e.item),e.item.remove()):"segment"===e.type&&(this.saveItemStateForUndo(e.item),e.segment.remove())}}onMouseUp(t){this.clampToBounds(t),this.selectionRectPath&&(this.selectionRectPath.remove(),this.selectionRectPath=null),(!this.button||this.button<=.5)&&this.currentPath&&(this.currentPath.isRectangle||(this.currentPath.segments.length>1?this.currentPath.simplify(3):this.currentPath.add(t.point),this.currentPath.strokeColor=new fi.Color("#ffffff")),this.clearSelection(),this.currentPath.bounds.selected=!1,this.currentPath.name=`Stroke-${this.stringHashCode(this.currentPath.toString())}`,this.currentPath.strokeColor=null,this.editor.undoLayer.addChild(new fi.Group({name:this.editor.removeCmd+this.currentPath.name})),this.editor.redoLayer.removeChildren())}clearSelection(){for(let t=0;t<this.selectedSegments.length;t++)this.selectedSegments[t].selected=!1;this.selectedSegments=[];for(let t=0;t<fi.project.selectedItems.length;t++)fi.project.selectedItems[t].selected=!1}saveItemStateForUndo(t){t.name||(t.name=`ForeignObject-${this.stringHashCode(t.toString())}`);const e=t.clone();e.name=t.name,this.editor.undoLayer.addChild(e),this.editor.redoLayer.removeChildren()}stringHashCode(t){let e=0;if(0===t.length)return e;for(let i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e|=0}return e}clampToBounds(t){const e=this.editor.backgroundImageElement.width,i=this.editor.backgroundImageElement.height;t.point=t.point.set(Math.min(.5*e,Math.max(.5*-e,t.point.x)),Math.min(.5*i,Math.max(.5*-i,t.point.y)))}}const mi={class:"relative"},_i=St("div",{style:{padding:"6px","background-color":"#fff","border-radius":"50%",width:"30px",height:"30px"}},[St("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKDSURBVHgBpVS9ctNAEN6VMsSpUEGHjeQZ+pgGJMBGeYPQ0cXp0tl0dFEqSkJJZXgDU1JZGCYWk8LOE0QezEyoUGnZ1i27spTYyWA8sDP6ub3d7779Ox0yeeTUGqVieWs0CkP4D0F5VVzX2IzVOS8MQHoPanoUBEEI/yC6vC7CcFwqmlsM7xKgBagflEzzYvR9eOY41WaxZL4umhbIei1AkTv3y4ONhF5pAO8QmSnBQfGeCfz9SYh1JHhxt2QaP0bDT6sAtfxn4PsRAw0IaLt30n3AQB/48UBDU81mOwQQcUqazuNa3+UU/RVQhBRwSBwySxB06zmormsGEr1MbQgqcZy01gJkCfmx8sW4oDWFNaDWKhT0NrN8m4IC7nJXvFkHcEkkDbPpbF8OGY9VM97UPAld9iR8237qrgREpG12GCzqTk9PBsKMEBqSOC5OxpKBmflKQA6lwg7D60bCTHpUWHIajucMSQ627Ce1vSVS+Y9tuy6g6jCsz9qQ0S1ENIiIq4tnCmCPjaOg1y3bTrWTHi6DwPZB78vOTUCndg5XBQnZMMxaxbhyljAmZYANazFcOeQGoOPU+twSH5Nk1pa8XQ/btqt1Zlwh0tpzTWKlAKlOCqX8IPjqp4ByMXBBKjBPOjMSNpiztWAdIeD573ooF0MhVr/mOoi4ShwqRWkeFZbT6UkZcAoQb4MiJA1CHZDnHhqZ3/G3XjdtfJQxiieqIxOQJcEDpX0GTA5le1mnWn9inB6sJs83xrHqS4gc6lG257GjtFCU6axcB1Ison32PrwEJvKZeZsJeYi3OijJBpj6+f3H7cOGiSuj5vOkzHUyEWgt6h461V2NW0oKcemnq2e/AYQkK9iWS0CeAAAAAElFTkSuQmCC",alt:""})],-1),yi=St("div",{style:{flex:"1",color:"#fff","margin-left":"10px"}},[St("div",{style:{display:"flex","align-items":"center"}},[St("p",{style:{"font-size":"15px"}},"Midjoumey Bot"),St("div",{style:{"font-size":"12px",padding:"0 4px","margin-left":"4px","background-color":"#5865F2","border-radius":"4px","line-height":"20px",height:"20px"}}," APP")]),St("p",{style:{"font-size":"12px"}},"Inpaint")],-1),xi=[St("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHLSURBVHgB3VXdUcJAEN4LFpAA8mqoQO1AKxA60ArECpAK1Aq0BKgAOpAOEp+YQZILL+IPybqbHzhNIgmMD/rNXJLJ7e23e7f7HcBfhyhiJOX8EgE7iGCGiwSM6WUHPg7qdeNhZwLX9YYIcJIzbWOAvTwiLeun48jOZCLNVRQC2+9v2KxVdcHDX+IxOb1g5zRMoYl7yrILRcCGjuvhzJX9IvYcDNlLXuM485sfjWczeR4aRuMRCmI6lUcJCfloqXNftohSVdPUoSAaDWMMiL3YB22X1FMEHD29TBoeHegoQLyDEqjVjFuqmBEH9uFDK0WgaeKM33R4V/WqfrpPC6AkfMRB5CuDAKPoIaiENb4V9jQIC0OAOExNJocLO+K7Hw1+GSqBzQ+5WBzAluByjT/HKQIR/1y+vLZhS9DhhgSkW08pgiCIKqAiomoqAxZDV3pD6oGokwPoZxhJfd3ysgMlQGssRQEsdW6VgWEYXixgrG5dZT+LwEs+WFkzCRgkuX2MOliv7Ilh0UxEXCDU/b1N90OIZ0deqymzjKgZsZRb1lpvaHvNvGByLxx2GoufmbNwVCVJgQ3IbTROlS6XJp8LtSVXhSohdqI7/x+fpCsXdoueF5MAAAAASUVORK5CYII=",alt:""},null,-1)],wi={class:"flex-1 flex items-center justify-center relative h-full"},Ai={key:0,class:"absolute top-0 h-[640px]"},bi={class:"w-full h-full justify-center items-center flex"},Ci=St("div",{class:"absolute left-0 top-0 flex justify-center items-center",id:"appbody"},null,-1),ki={class:"flex inset-x-0 bottom-0 w-full items-end justify-center p-3 gap-4"},Si=["onClick"],Ii=["src"],Ei={class:"flex",style:{"background-color":"#6B6D73",display:"flex","align-items":"center",width:"680px","border-radius":"20px",overflow:"hidden",padding:"4px"}},Ti=["disabled"],Pi=["src"],Oi=N({__name:"index",props:{taskId:{}},emits:["close"],setup(t,{emit:e}){const i=t,n=e,s=[{label:"rect",value:0,icon:"/static/svg/rect-d153c4bd.svg"},{label:"lasso",value:.5,icon:"/static/svg/lasso-f9985fff.svg"}],r=At(),a=U(),o=U(0),l=U(),h=U(0),u=U(!0),c=U(""),d=O((()=>Boolean(i.taskId))),p=async function(){c.value="",h.value=0,u.value=!0;const t=await(e=i.taskId,mt({url:"/file/getModalImgById",data:{taskId:e}}));var e;const n=await(s=t.data,new Promise((async t=>{const e=new Image;e.src=s,e.onload=()=>t(e)})));var s;u.value=!1,a.value=new gi(l.value,n)},f=()=>{var t;null==(t=a.value)||t.undo()},g=function(){var t;1!=o.value&&(o.value=1,null==(t=a.value)||t.submit().then((async t=>{n("close",{mask:t,taskId:i.taskId,prompt:c.value,action:oi.VARY_REGION})})).catch((t=>{r.error(t),o.value=0})))};return Z((()=>i.taskId),(t=>{var e;t?(console.log(t),p()):null==(e=a.value)||e.destroy()})),(t,e)=>(bt(),Ct(Tt(Rt),{show:d.value,"mask-closable":!1,"show-icon":!1,preset:"dialog",style:{width:"1084px",height:"800px","background-color":"#2F3035",padding:"0"},onClose:e[1]||(e[1]=t=>n("close"))},{default:kt((()=>[St("div",mi,[St("div",{style:{padding:"12px",display:"flex",width:"100%",position:"relative"}},[_i,yi,St("div",{onClick:f,style:{position:"absolute",left:"24px",top:"85px",padding:"8px","border-radius":"50%","background-color":"#6B6D73",cursor:"pointer","z-index":"10",width:"40px",height:"40px"}},xi)]),St("div",wi,[u.value?(bt(),It("div",Ai,[St("div",bi,[Et(Tt(ti),{size:"large"})])])):Pt("",!0),St("canvas",{ref_key:"canvasRef",ref:l,resize:"true",style:{padding:"0px",margin:"0px",width:"1024px",height:"640px"}},null,512)]),Ci,St("div",ki,[(bt(),It(rt,null,Ot(s,(t=>St("div",{class:"flex gap-2",onClick:e=>(t=>{var e;h.value=t.value,null==(e=a.value)||e.updateTool(t.value)})(t)},[St("button",{class:Mt(["rounded-full w-8 h-8",[t.value===h.value?"bg-[#6B6D76]":"bg-[#47484E]"]]),style:{display:"flex","align-items":"center","justify-content":"center"}},[St("img",{style:{width:"20px",height:"20px"},src:t.icon,alt:""},null,8,Ii)],2)],8,Si))),64)),St("div",Ei,[it(St("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),placeholder:"输入描述信息",style:{width:"100%","background-color":"transparent",color:"#E5E6E8","text-indent":"4px"}},null,512),[[Bt,c.value]]),St("button",{class:"rounded-full bg-[#38393E]",disabled:!c.value,style:{width:"28px",height:"28px"},onClick:g},[o.value?(bt(),Ct(Tt(ti),{key:0,size:18,stroke:"#fff",style:{"margin-top":"5px"}})):(bt(),It("img",{key:1,src:Tt("/static/svg/send-b1285f02.svg"),alt:""},null,8,Pi))],8,Ti)])])])])),_:1},8,["show"]))}}),Mi="data:image/png;base64,UklGRpgEAABXRUJQVlA4IIwEAACwFwCdASpQAFAAPm0ykkckIyGhKlgKWIANiUAO4L6B+FdSB8nbABuAP1d3ozqAPQA8FX4Cv2t/ar2eawpx6+iH3PmB9O3zPkh3g+7P+N8j3+C3p7H3+Z4wNIFOmfwv/b8on0B/1/8N8A38n/pn+w/uv5CfM760f2q9lD9jDbZe4nV/Xudnezn/EpmLGER9cGAGJB82zkqmNm2xo9tHZTJlNnehB8SqtIAPg/Aw1l6t6JJlhSwTuWslbqgU4ZF3oITVFJdVWAAA/vz0Dh1pPbny3O+s8/fne3xQB5/H7H7Lv6pH5yyDLP9mR27kmLoTlaj2qJ1jsgANnu7JVwW/bmFwulUHFMWYEFfP8+qFy+lUBmepZ+RwRSycC1eu67CTjX+81DX7xrpBSPMmKidpf/bjkLwHd7QW507bUV/24/nxMr//xMTlxr84X/Zperqwf6/dm+1NocKna4gCFujgAnfQZEaOngKudWMG1vYkbF50nzL72GUqt1ZFQ+re7pA4OgydZjt6CFwLsuiExa4ZDng/k8pK24kNrq6Ve75NntvQ/jqMojFPAQeRwcQChfSvGbgH0t7euhXisuY9001k58dFF1vXGVNh59ZFWLWTUD8VXx63zqPkC1DX52sMo3v908bzUjDRmOotrg4gHq1p61LtzNhbXjCLDsH5Gryaf9cZdfE7GqazAJ1TV3ceQG9XxGSeGW/fJ3LHph50Z/02Q0Ku8Wygei2pqnFyXikZkQwoBjfKUhzDtKrUsnHhesUXsRqalc9ZKuf6ysztaqdxw3Kmd7FllEWw/sxiuxm2gBiXSuPzN9lTPwvjIgeTbXour3/6HX7ZLf5Md6ZBV//qP+L1MDBSNSwD760ZYz9qkP8T6fa7p0/AdObgz9TLAQTxZi7P2NjwGNgpy3MmyVaWkKjav7aPGc3HRv801k1hCoPJc66cydQ+HpYecO7F0agBcHAp/D8cvguHxZc39IeimGfD6D7qD/5xdTiiK8WxncN2t0T3MbOvjux44a3zeEHGjseeW6hM/V+WfX3agfuiS181gGagV0aTdFjJk8g4dkOls1l3d6X6naQemhze7f/f+Z6PiAdkxNkVWbvq1K7okZv21/1Yp1ti7zP//LHAFnRf/8BM8kn2+Ukmqye//4cXd3Hxc3m3ttftRIcHvjb6qGy8RGpnU/rTkIyg0P5LjceuK6RQ/2Zp7v+CC9A1pipwSxK4wsoYdFqThQzTsQYikIoRWnQ8J72qVpF59wqE/TOUd6owDNX/GRdKRTbP0k61rVgHO7mvoa9BVqp/+6OPg3rehPSQw1MAVBEoc0yvr75RrrzU9b4kTFQbC2aGL5aA1mpWuyn5te9orI2uZXu3yyRHKw8/hj+HoydvAnJon4eiDT+jhK35M/cU4Dupz3EoX07v0/RnPx6NVdLA/WlVZRfXljGGqvmSS9r+674zCuRB297vZYuiXim4FrCwuo7ee8ijWobCZea2Za6oNU5blqtGES1sRBdRxsjSkIUInDc4Xs5GF63B85Sy7uzgk8yjc7ryLHnEadqGigAAAAA=",Bi="data:image/png;base64,UklGRnoDAABXRUJQVlA4IG4DAABQEQCdASpQAFAAPm0slEakIiIhKlINKIANiWcAz54BQA09jDCGkSPl+M8j+9Paf3YrLXEdpJpj/jl+l/Rw6z/7RpMW8J0WjOWJWzp1FeYdX3J6WAWYijjJz/t/SVS27PEiJfmQN/TK2nfrfKSatqgVQuwdl6bGXgG0ZQLh9ET7+ayzAaW0jZ13FEYqHlWnk/vGl0AA/vwwrtTBov+Y/JcO/BkGuJdck/7cbwBfmQIS7pb1+qCmV3R339AIXqz+qpWiscVFy0RyF3BkfNORvZvip6UqWx8LUlXSzK5HuTqc9gAddiML+1nZ/h7vzsfzQhX33RvaGZpw7pXqGtbP5c6TOhitpM38BMxNka3wFGFUcPSw35WoUyounCEghEEFJc+BEVhT89+dsrd+m4QtnDNMnx51BXyfQIdIOLaQQJBapmIFPPboKrVHDBpz+r7uqbhJG/m2OsX1vYq0+x2uPYTqwXcV8IFtRLumyP7eOb6nAUmsQnHv8N6ynRBmIcfUGiDJ+/pl9beQH5xdnH1mF3VcwcVFDP2+mkG7DxRq8VaRBx0WkBKEdwUj/pjsejDLkPL+W/UweqMzCSrfBooH2LXfcDcvu62SYAoNT7MAIRAbNWUCUmyTcfpDEEV9WnzYf2YoH5XWVmc5s8/qnf9JluyodM/w6TRnbWbP970vAxf9Yc5gDuKhqWwy0ZniAlfpX8fEu5rTWW3x2v6mvMW6B2SUdmobPMCANRT+Jd3EDRM0GEWI5+ZFwoi6GWsniP8hjGSWcPjmsbodTWGygJnM28BBwoPW8qjwNaT/o3UX2holnJAzzvKiY1mgTAP32mTihtjeNiL68YsVKqpannzMXHfwhIn5pNsn3T12q/MobOAQmGdpTNP+Zx9uo46Mb13zORkM0zArx2B+AH5aTrMGYk8+4S413w+UDnz8nwe75AmMMhvQhnZXDhfqLPTPgUwN/3AJRGJpL4oNV6rbOKiZfIL7e7mh71nNT0YT7R/GTz308i2OaJQClXNUIOreWP31dBK2l2jXn2qDN5TZKmVtJgbXieD7TjCQ4DOkz4ZNWXnc5nNHnOktZdvXjseBgvQT2q8sndZh7G3cNIe2DhuGYB/jwRfen9Wi2jTQKveHA+Rl1/xC0mxvc9wzeHkjhzWua6eKe6jUq1WlWCZb1kswAA==",Ri={key:1,class:"modal"},Ni={class:"modalTop"},Li={style:{display:"flex","align-items":"center"}},Di=["src"],Vi=(t=>(Dt("data-v-3df23f3a"),t=t(),Vt(),t))((()=>St("p",{class:"title"},"Remix Prompt",-1))),zi=Lt('<div class="tipsBox" data-v-3df23f3a><div style="font-size:12px;color:#EDEEF0;" data-v-3df23f3a>小贴士：</div><div style="display:flex;align-items:center;" data-v-3df23f3a><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEySURBVHgBjVOxTsMwEH223AiJVurY0RJih60CgVKJ/2kHNhbYWPsH8BcdkMiYrfAHHjtGokgoVE7PdptW7TnNm2zf3bvn87MAgypN+1B/VxDQ4QBGfOQZlyuOCpNyDIsJRfoHuYbO3lAmU5FlxRFBlQ41OvKTlhrNMPi3I5HlpibwnTvlvEXxHkly7ZRIv3WyueLHJ+D5lSPQUOXELQKBuzOHwQDodtkQaR875ap6GKbMwAIWCzTAv5Sqn4rD7w8NSMQprNQKTVgucQrKmQSxJt/0MOe9eLW0RmJ19kUkBZtwcQn0okP07pQbV03ZpNs74OaeJ7B4DzyoLTwnJRptQN3J0jsjeRXSjnygTbF0Vg7/Qdbns9yzkoqXCFHhY67zLDc7vgg2BtNhQ4Q07P1fuMUagpltQxa21eUAAAAASUVORK5CYII=" alt="" data-v-3df23f3a><div style="font-size:12px;color:#EDEEF0;margin-left:4px;" data-v-3df23f3a>该表单将提交至 Midjournty Bot。 请勿分享密码和其他任何敏感信息 </div></div></div>',1),Ui={style:{"font-size":"15px",color:"#edeef0","margin-left":"12px"}},ji={class:"inputBox"},Fi={class:"input"},Qi={class:"btnBox"},qi=zt(N({__name:"index",props:{taskId:Number,taskInfo:Object},emits:["close"],setup(t,{emit:e}){const i=At(),n=t,s=e,r=U(""),a=O((()=>Boolean(n.taskId))),o=O((()=>n.taskInfo));Z((()=>a),(t=>{t&&(r.value="")}));const l=U(),h=U();Z(o,(t=>{t&&(console.log(t),l.value=t.botType,h.value=t.customId)}));return(t,e)=>(bt(),It("div",null,[a.value?(bt(),It("div",{key:0,class:"mask",onClick:e[0]||(e[0]=t=>s("close"))})):Pt("",!0),a.value?(bt(),It("div",Ri,[St("div",Ni,[St("div",Li,[St("img",{src:"MID_JOURNEY"==l.value?Tt(Mi):Tt(Bi),alt:"",style:{width:"36px",height:"36px","border-radius":"50%","margin-right":"12px"}},null,8,Di),Vi]),St("div",null,[St("img",{style:{cursor:"pointer"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC8SURBVHgB7ZMxDsIwDEWTDrASmLqFo/TkHIVsnSCMhYGAo1SVLNtxVXXLW2I51v+K7RjTaGzFcheP5+sO5+edhr53gaoZx+gPR3uD+HI+XamazshkARASxL0kwBp0Ng3/I1AmSDyUWhK2RUCM0X/TIgTtgjwWd45uYdWAMilplbjKgDAxWnGgNuTMNOlyFNUX4IGWdI6lFVYZcNuCBy+Z2DXic8+p7eJM2BlIqwgx/iecTm3I7LYgk0ZjR34Kxn0Sb1w35gAAAABJRU5ErkJggg==",alt:"",onClick:e[1]||(e[1]=t=>s("close"))})])]),zi,St("div",Ui,"NEW PROMPT FOR IMAGE #"+Nt(h.value.split("PicReader::")[1]),1),St("div",ji,[St("div",Fi,[it(St("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),name:"",id:"",style:{resize:"none",width:"100%","background-color":"transparent",height:"100%"},placeholder:"请输入"},null,512),[[Bt,r.value]])])]),St("div",Qi,[St("div",{class:"closeBtn btn",onClick:e[3]||(e[3]=t=>s("close"))},"取消"),St("div",{class:"submitBtn btn",onClick:e[4]||(e[4]=t=>{r.value?s("close",r.value):i.warning("描述补充不能为空！")})},"确定")])])):Pt("",!0)]))}}),[["__scopeId","data-v-3df23f3a"]]);function Hi(t){const e={origin:!0,...t};let i;i=e.origin?document.createElement("textarea"):document.createElement("input"),i.setAttribute("readonly","readonly"),i.value=e.text,document.body.appendChild(i),i.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(i)}const Gi={style:{width:"400px",display:"flex","flex-direction":"column"}},Ji=["src"],Wi={style:{display:"flex","justify-content":"space-between","font-size":"14px"}},Zi=zt(N({__name:"index",props:{imgUrl:String,Original:String},emits:["closeImgView"],setup(t,{emit:e}){let i=null;const n=At(),s=t,r=e,a=U(),o=U();function l(){r("closeImgView")}function h(){let t=o.value;window.open(t,"_blank")}function u(){let t;i||(i=n.loading("下载中，请稍等",{duration:0})),t=-1!=o.value.indexOf("/ai/")?o.value.split("/ai/")[1]:"download.png",jt.get("/api/file/down",{responseType:"blob",params:{url:o.value}}).then((e=>{const i=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=i,s.setAttribute("download",t),s.click(),c(),n.success("下载成功")})).catch((t=>{c(),n.error("下载失败")}))}function c(){i&&(i.destroy(),i=null)}function d(){o.value?(Hi({text:o.value}),n.success("复制成功")):n.error("复制失败")}return a.value=s.imgUrl,o.value=s.Original,Z(s,(t=>{t.imgUrl&&(a.value=t.imgUrl),t.Original&&(o.value=t.Original)})),(t,e)=>(bt(),It("div",{class:"viewsBox",onClick:Ut(l,["stop"]),onContextmenu:e[2]||(e[2]=Ut((()=>{}),["right","stop"]))},[St("div",Gi,[St("img",{src:a.value,alt:"",onContextmenu:e[0]||(e[0]=Ut((()=>{}),["right","stop"])),onClick:e[1]||(e[1]=Ut((()=>{}),["stop"]))},null,40,Ji),St("div",Wi,[St("div",{class:"open",onClick:Ut(h,["stop"])}," 在浏览器中打开 "),St("div",{style:{color:"#FA8072"},onClick:Ut(u,["stop"])}," 下载原图 "),St("div",{style:{color:"#00A8FC"},onClick:Ut(d,["stop"])}," 复制原图地址 ")])])],32))}}),[["__scopeId","data-v-a09ac765"]]),Xi=t=>(Dt("data-v-f0d9ceef"),t=t(),Vt(),t),Ki={key:0,class:"imgbox"},Yi={key:0,src:ni,alt:"",style:{"margin-left":"20px","margin-top":"10px"}},$i={class:"robotAvatar"},tn=["src"],en={key:1,class:"drawInfo"},nn={key:0,style:{display:"flex","align-items":"center"}},sn=[Lt('<div style="padding:2px;border-radius:50%;background-color:#E6449C;" data-v-f0d9ceef><img style="width:15px;height:15px;" src="'+i+'" alt="" data-v-f0d9ceef></div><div style="color:#8E9093;margin-left:4px;" data-v-f0d9ceef> mj </div><div style="color:#8E9093;" data-v-f0d9ceef> 使用了 </div><div style="background-color:#3C4270;color:#04A5F9;padding:0 4px;display:flex;align-items:center;margin-left:4px;" data-v-f0d9ceef><img src="'+si+'" style="width:12px;height:12px;" alt="" data-v-f0d9ceef><p data-v-f0d9ceef>saveid</p></div>',4)],rn={class:"drawTime"},an=Xi((()=>St("div",{class:"robotName",style:{"font-size":"16px","line-height":"14px"}},"InsightFaceSwap",-1))),on=Xi((()=>St("div",{class:"app"},[St("img",{src:ri,alt:""}),St("p",null,"APP")],-1))),ln={class:"time",style:{"font-size":"12px",color:"#949BA4","line-height":"14px"}},hn={key:0},un={key:1},cn={key:2},dn={key:1,class:"typeFace",style:{"font-size":"14px",display:"inline-block"}},pn=[Xi((()=>St("p",null,"@mj",-1)))],fn={key:2,class:"imgurl"},gn=["src"],vn={key:3,class:"",style:{"font-size":"15px",color:"#b1b3b9","margin-top":"10px"}},mn={class:"drawParam"},_n={key:0,class:"param",style:{"font-size":"14px","line-height":"15px"}},yn={key:4,class:"tips",style:{display:"flex","align-items":"center"}},xn=Xi((()=>St("img",{src:ai,alt:"",style:{width:"16px","margin-right":"4px"}},null,-1))),wn=Xi((()=>St("span",{style:{"font-size":"14px",color:"#fff"}},"只有您才能看到这些 •",-1))),An={key:2,class:"imgbox"},bn=[Xi((()=>St("div",{class:"robotAvatar",style:{"background-color":"#E6449C"}},[St("img",{src:i,alt:""})],-1)))],Cn={key:3,class:"drawInfo"},kn={style:{display:"flex","align-items":"center"}},Sn=Xi((()=>St("div",{style:{"font-size":"16px",color:"#fff"}}," mj ",-1))),In={class:"drawTime"},En={class:"time",style:{"font-size":"12px",color:"#949BA4","line-height":"14px"}},Tn={key:0},Pn={key:1},On={key:2},Mn={style:{"font-size":"16px",color:"#DBDEE1"}},Bn={class:"imgurl"},Rn={key:0},Nn=["src"],Ln={key:1,style:{display:"flex"}},Dn=["onClick","src"],Vn={key:4,class:"imgbox"},zn={key:0,src:ni,alt:"",style:{"margin-left":"20px","margin-top":"10px"}},Un={key:1,src:ni,alt:"",style:{"margin-left":"20px","margin-top":"10px"}},jn={class:"robotAvatar"},Fn=["src"],Qn={key:5,class:"drawInfo"},qn={key:0,class:"robotTitle"},Hn=["src"],Gn=Xi((()=>St("div",{class:"app"},[St("img",{src:ri,alt:""}),St("p",null,"APP")],-1))),Jn={key:0,class:"robotName"},Wn={key:1,class:"parentParam",style:{"max-width":"850px","text-wrap":"nowrap",overflow:"hidden","text-overflow":"ellipsis","font-size":"14px"}},Zn={key:2,class:"type",style:{"font-size":"14px"}},Xn={class:"drawMode",style:{"font-size":"14px"}},Kn=Xi((()=>St("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFNSURBVHgBpVPdUQJBDP6yC4xPzp0ODz6JFXglYAd0wFgBWoHQgVYgdqAVQAdqBfIMnDnefLnELD8jCneKfDN3s9kk32a/ZIE9QavFhLnpxLWJtFGWoIpMnN7V43gYbBd+zLMbpzQAaUvMLvvsyCTEpilfzU1mbojSmzkeHfTyA4gOzBHH8aioiumU++So7Uhjl+dIwmYO7dm6VTMyI3wejzkpIvAe3XmOxYcrRAsCZEpYJUXVqj/FH1D5Zjjc5opzVX09Pjp82plgee+LbYGmVRT0OfmhTQW/IIisSveiaNbMTt8zI6C+NXSTwNrZEUEiIjOqYOiBFwntBRprYdY17W5UYOoPBDZENlrOUzigY33PsBS5CG6deYu/NNl7z2GQIiuT8Q/YIJ05Uz6zAb/GjjAdeqFrX49pwk0bz45pUFo2lEYq8lCvLx7T3vgE2a+RG0eMu9QAAAAASUVORK5CYII=",alt:""},null,-1))),Yn={key:1,style:{display:"flex","align-items":"center"}},$n=Xi((()=>St("div",{style:{padding:"2px","border-radius":"50%","background-color":"#E6449C"}},[St("img",{style:{width:"15px",height:"15px"},src:i,alt:""})],-1))),ts={style:{color:"#8E9093","margin-left":"4px"}},es=Xi((()=>St("div",{style:{color:"#8E9093"}}," 使用了 ",-1))),is={style:{"background-color":"#3C4270",color:"#04A5F9",padding:"0 4px",display:"flex","align-items":"center","margin-left":"4px"}},ns=Xi((()=>St("img",{src:si,style:{width:"12px",height:"12px"},alt:""},null,-1))),ss={class:"drawTime"},rs={key:0,class:"robotName",style:{"font-size":"16px","line-height":"14px"}},as=Xi((()=>St("div",{class:"app"},[St("img",{src:ri,alt:""}),St("p",null,"APP")],-1))),os={class:"time",style:{"font-size":"12px",color:"#949BA4","line-height":"14px"}},ls={key:0},hs={key:1},us={key:2},cs={class:"drawParam"},ds={key:0,style:{display:"inline-block"},class:"A_parent"},ps=["href"],fs=["innerHTML"],gs=["innerHTML"],vs=["href"],ms=["href"],_s={key:5,style:{"font-size":"12px",color:"#EDEEF0"}},ys={key:6,style:{color:"#fff","font-size":"12px","margin-left":"4px"}},xs={style:{display:"inline-block"}},ws={class:"type",style:{"font-size":"14px"}},As={class:"drawMode",style:{"font-size":"14px"}},bs={key:2,class:"",style:{"font-size":"15px",color:"#b1b3b9","margin-top":"4px"}},Cs={key:3,class:"",style:{"font-size":"15px",color:"#b1b3b9","margin-top":"4px"}},ks={key:4,class:"",style:{"font-size":"15px",color:"#b1b3b9","margin-top":"10px"}},Ss={class:"imgurl"},Is=["src"],Es={class:"btnBox"},Ts={style:{display:"flex"}},Ps=["onClick"],Os=["onClick"],Ms={style:{display:"flex"}},Bs=["onClick"],Rs={style:{display:"flex"}},Ns=["onClick"],Ls={style:{display:"flex"}},Ds=["onClick"],Vs={style:{display:"flex"}},zs=["onClick"],Us={style:{display:"flex"}},js=["onClick"],Fs=["onClick"],Qs=zt(N({__name:"drawTask",props:{task:Object,isSuccess:Boolean,instructionInfo:Object},emits:["addTask","handleClickRight","Delete"],setup(t,{emit:e}){const i=At(),n=new Jt.Renderer;Jt.setOptions({renderer:n,gfm:!0,pedantic:!1,sanitize:!1});const s=t,r=e,a={type0:["🔄"],type1:["U1","U2","U3","U4"],type2:["V1","V2","V3","V4"],type3:["Upscale (2x)","Upscale (4x)","Upscale (Subtle)","Upscale (Creative)","Vary (Subtle)","Vary (Strong)","Vary (Region)"],type4:["Zoom Out 2x","Zoom Out 1.5x","Custom Zoom"],type5:["⬅️","➡️","⬆️","⬇️"],type6:["1️⃣","2️⃣","3️⃣","4️⃣"]},o=U(),l=U(),h=U(!1),u=U(!1),c=U(1),d=U(1);ht((()=>{var t,e;const i=new Date;let n,r;if(o.value=("0"+(i.getMonth()+1)).slice(-2),l.value=("0"+i.getDate()).slice(-2),null==(t=s.task)?void 0:t.fullPrompt)if(-1!=s.task.fullPrompt.indexOf("--ar"))c.value=s.task.fullPrompt.split("--ar")[1].split(":")[0],d.value=s.task.fullPrompt.split("--ar")[1].split(":")[1];else{if(!s.task.fileInfo)return;const{width:t,height:e}=JSON.parse(s.task.fileInfo);c.value=t,d.value=e}else{if(!(null==(e=s.task)?void 0:e.fileInfo))return;const{width:t,height:i}=JSON.parse(s.task.fileInfo);c.value=t,d.value=i}n=s.task.createdAt.split(" ")[0].split("-")[1],r=s.task.createdAt.split(" ")[0].split("-")[2],n==o.value&&r==l.value&&(h.value=!0),n==o.value&&r==l.value-1&&(u.value=!0)}));let p="";const f=U(0),g=U(0),v=U(),m=function(){var t,e;9===(null==(t=s.task)?void 0:t.action)?(p=s.task.customId,f.value=s.task.id):(g.value=null==(e=s.task)?void 0:e.id,v.value=s.task)};function _(t){var e;if(t.operated)return void i.error("当前图片已经执行过相同指令！");t.operated=!0;if(y(t)===oi.VARY_REGION)setTimeout((()=>{var e;f.value=null==(e=s.task)?void 0:e.id,p=t.customId}),200);else{const i={type:"addTaskDTO",parameter:{type:li.IMAGE_ACTION,params:{taskId:null==(e=s.task)?void 0:e.id,action:y(t),customId:t.customId}},parent:s.task};r("addTask",i,(t=>{console.log(t)}))}}const y=t=>{if(["U1","U2","U3","U4"].includes(t.label))return oi.U_SCALE;if(["V1","V2","V3","V4"].includes(t.label))return oi.V_EXPAND;if(!t.label&&t.emoji){if("🔄"===t.emoji)return oi.REGENERATE;if(["⬅️","➡️","⬆️","⬇️"].includes(t.emoji))return oi.STRETCH;if(["1️⃣","2️⃣","3️⃣","4️⃣"].includes(t.emoji))return oi.IMAGE_TO_TEXT_ACTION}return t.label.includes("Upscale (4x)")?oi.UPSCALE_4X:t.label.includes("Upscale (2x)")?oi.UPSCALE_2X:t.label.includes("Vary (Subtle)")?oi.VARY_SUBTLE:t.label.includes("Vary (Strong)")?oi.VARY_STRONG:t.label.includes("Vary (Region)")?oi.VARY_REGION:t.label.includes("Make Square")?oi.SQUARE:t.label.includes("Zoom Out 2x")?oi.ZOOM2X:t.label.includes("Zoom Out 1.5x")?oi.ZOOM1_5X:t.label.includes("Custom Zoom")?oi.ZOOM_CUSTOM:t.label.includes("Redo Upscale (Subtle)")?oi.REDO_UPSCALE_SUBTLE:t.label.includes("Redo Upscale (Creative)")?oi.REDO_UPSCALE_CREATIVE:oi.NONE};Z(s,(t=>{t.isSuccess&&(f.value=0)}));const x=function(t){var e,i;if(null==(e=s.task)||e.buttons.forEach((t=>{t.customId==p&&(t.operated=!1)})),t){const e={type:"addTaskDTO",parameter:{type:li.IMAGE_ACTION,params:{...t,taskId:null==(i=s.task)?void 0:i.id,customId:p}},parent:s.task};r("addTask",e),p="",f.value=0}else p="",f.value=0},w=function(t){var e;if(t){const i={parameter:{type:li.IMAGE_ACTION,params:{prompt:t,taskId:null==(e=s.task)?void 0:e.id,action:oi.VARY_REGION}},type:"addTaskDTO",parent:s.task};r("addTask",i,(t=>{t&&(g.value=0)}))}else g.value=0};function A(t){t.preventDefault();let e={event:t,task:s.task};r("handleClickRight",e)}const b=U();ht((()=>{var t;let e=null==(t=s.task)?void 0:t.customId;if(e){if(-1!=e.indexOf("upsample::")){let t=e.split("upsample::")[1].split("::")[0];b.value=t}if(-1!=e.indexOf("variation")){let t=e.split("variation::")[1].split("::")[0];b.value=t}}}));const C=U(),k=U(),S=U(!1);function I(t){S.value=!0,setTimeout((()=>{C.value=t+`?imageView2/0/w/300/q/85&format=webp&quality=lossless&width=300&height=${parseInt(String(300*d.value/c.value))}`,k.value=t}),100)}function E(){S.value=!1}function T(){r("Delete",s.task)}return(t,e)=>{var i,n,r,o,l,p,y,P,O;return bt(),It("div",{class:"taskMainBox",onContextmenu:Ut(A,["right"])},[22==(null==(i=s.task)?void 0:i.action)?(bt(),It("div",Ki,[null==s.task.status?(bt(),It("img",Yi)):Pt("",!0),St("div",$i,[St("img",{src:Tt(ii),alt:""},null,8,tn)])])):Pt("",!0),22==(null==(n=s.task)?void 0:n.action)?(bt(),It("div",en,[null==s.task.status?(bt(),It("div",nn,sn)):Pt("",!0),St("div",rn,[an,on,St("div",ln,[St("div",null,[u.value?(bt(),It("p",hn,"昨天 "+Nt(s.task.createdAt.split(" ")[1]),1)):Pt("",!0),h.value?(bt(),It("p",un,"今天 "+Nt(s.task.createdAt.split(" ")[1]),1)):Pt("",!0),u.value||h.value?Pt("",!0):(bt(),It("p",cn,Nt(s.task.createdAt),1))])])]),null!=s.task.status?(bt(),It("div",dn,pn)):Pt("",!0),s.task.imageUrl?(bt(),It("div",fn,[St("img",{style:{width:"300px",cursor:"pointer","border-radius":"8px"},src:s.task.imageUrl+`?imageView2/0/w/300/q/85&format=webp&quality=lossless&width=300&height=${parseInt(String(300*d.value/c.value))}`,alt:"",onClick:e[0]||(e[0]=t=>I(s.task.imageUrl))},null,8,gn)])):Pt("",!0),4==s.task.status||s.task.fail?(bt(),It("div",vn," 请求错误： "+Nt(s.task.failReason||s.task.fail),1)):Pt("",!0),St("div",mn,[null==s.task.status?(bt(),It("div",_n,"idname "+Nt(s.task.originPrompt)+" created",1)):Pt("",!0)]),null==s.task.status?(bt(),It("div",yn,[xn,wn,St("span",{onClick:T,class:"spanMessage",style:{"font-size":"14px",color:"#00A8FC",cursor:"pointer"}},"无视这些消息")])):Pt("",!0)])):Pt("",!0),null==(null==(r=s.task)?void 0:r.action)?(bt(),It("div",An,bn)):Pt("",!0),null==(null==(o=s.task)?void 0:o.action)?(bt(),It("div",Cn,[St("div",kn,[Sn,St("div",In,[St("div",En,[St("div",null,[u.value?(bt(),It("p",Tn,"昨天 "+Nt(s.task.createdAt.split(" ")[1]),1)):Pt("",!0),h.value?(bt(),It("p",Pn,"今天 "+Nt(s.task.createdAt.split(" ")[1]),1)):Pt("",!0),u.value||h.value?Pt("",!0):(bt(),It("p",On,Nt(s.task.createdAt),1))])])])]),St("div",Mn,Nt(null==(l=s.task)?void 0:l.fullPrompt),1),St("div",Bn,[-1==(null==(p=s.task)?void 0:p.imageUrl.indexOf("&"))?(bt(),It("div",Rn,[St("img",{style:{width:"300px",cursor:"pointer","border-radius":"8px"},src:s.task.imageUrl+"?imageView2/0/w/300/q/85&format=webp&quality=lossless&width=300&height=300",alt:"",onClick:e[1]||(e[1]=t=>I(s.task.imageUrl))},null,8,Nn)])):(bt(),It("div",Ln,[(bt(!0),It(rt,null,Ot(null==(y=s.task)?void 0:y.imageUrl.split("&"),(t=>(bt(),It("div",null,[St("img",{onClick:e=>I(t),style:{width:"300px",height:"300px",cursor:"pointer","border-radius":"8px","margin-right":"5px"},src:t+"?imageView2/0/w/300/q/85&format=webp&quality=lossless&width=300&height=300",alt:""},null,8,Dn)])))),256))]))])])):Pt("",!0),null!=(null==(P=s.task)?void 0:P.action)&&22!==s.task.action?(bt(),It("div",Vn,[4==s.task.action||5==s.task.action?(bt(),It("img",zn)):Pt("",!0),4!=s.task.action&&5!=s.task.action&&3!=s.task.status&&4!=s.task.status?(bt(),It("img",Un)):Pt("",!0),St("div",jn,[St("img",{src:"MID_JOURNEY"==s.task.botType?Tt(Mi):Tt(Bi),alt:""},null,8,Fn)])])):Pt("",!0),null!=(null==(O=s.task)?void 0:O.action)&&22!==s.task.action?(bt(),It("div",Qn,[4==s.task.action||5==s.task.action?(bt(),It("div",qn,[St("img",{src:"MID_JOURNEY"==s.task.botType?Tt(Mi):Tt(Bi),style:{"background-color":"#fff",padding:"2px","border-radius":"50%",width:"24px"},alt:""},null,8,Hn),Gn,s.task.extraParam?(bt(),It("div",Jn,Nt("MID_JOURNEY"==s.task.botType?"Midjoumey Bot ":"niji・journey Bot"),1)):Pt("",!0),s.task.extraParam?(bt(),It("div",Wn,Nt(s.task.originPrompt)+" "+Nt(s.task.extraParam.split(" --")[0]+" -"),1)):Pt("",!0),s.task.extraParam?(bt(),It("div",Zn,[St("p",null,Nt("MID_JOURNEY"==s.task.botType?"@mj":"@nj"),1)])):Pt("",!0),St("div",Xn,[St("p",null,Nt(1==s.task.mode?"（fast）":"（relaxed）"),1)]),Kn])):Pt("",!0),4!=s.task.action&&5!=s.task.action&&3!=s.task.status&&4!=s.task.status&&21!=s.task.action?(bt(),It("div",Yn,[$n,St("div",ts,Nt("MID_JOURNEY"==s.task.botType?"mj":"nj"),1),es,St("div",is,[ns,St("p",null,Nt(1==s.task.action?"imagine":2==s.task.action?"describe":3==s.task.action?"blend":""),1)])])):Pt("",!0),St("div",ss,[s.task.extraParam?(bt(),It("div",rs,Nt("MID_JOURNEY"==s.task.botType?"Midjoumey Bot ":"niji・journey Bot"),1)):Pt("",!0),as,St("div",os,[St("div",null,[u.value?(bt(),It("p",ls,"昨天 "+Nt(s.task.createdAt.split(" ")[1]),1)):Pt("",!0),h.value?(bt(),It("p",hs,"今天 "+Nt(s.task.createdAt.split(" ")[1]),1)):Pt("",!0),u.value||h.value?Pt("",!0):(bt(),It("p",us,Nt(s.task.createdAt),1))])])]),St("div",cs,[St("div",{class:"param",style:lt([{"font-size":"14px","line-height":"15px"},2==s.task.action||21==s.task.action?"width: 300px;text-align: justify":""])},[3!=s.task.action&&-1!=s.task.prompt.indexOf("http")?(bt(),It("div",ds,[St("a",{href:s.task.prompt.split("height=300")[0]+"height=300"},Nt(s.task.prompt.split("height=300")[0]+"height=300"),9,ps),St("p",null,Nt(s.task.prompt.split("height=300")[1]),1)])):Pt("",!0),3!=s.task.action&&-1==s.task.prompt.indexOf("http")?(bt(),It("div",{key:1,style:{display:"inline-block"},class:"A_parent",innerHTML:Tt(Jt)(s.task.prompt)},null,8,fs)):Pt("",!0),s.task.status>1&&3!=s.task.action?(bt(),It("span",{key:2,style:{display:"inline-block","margin-left":"4px"},innerHTML:Tt(Jt)(s.task.extraParam)},null,8,gs)):Pt("",!0),s.task.status>1&&3==s.task.action&&s.task.fullPrompt?(bt(),It("a",{key:3,style:{display:"inline-block","margin-left":"4px"},href:s.task.fullPrompt.split("> <")[0].split("<")[1],target:"_blank"},Nt(s.task.fullPrompt.split("> <")[0].split("<")[1]),9,vs)):Pt("",!0),s.task.status>1&&3==s.task.action&&s.task.fullPrompt?(bt(),It("a",{key:4,style:{display:"inline-block","margin-left":"4px"},href:s.task.fullPrompt.split("> <")[1].split(">")[0],target:"_blank"},Nt(s.task.fullPrompt.split("> <")[1].split(">")[0]),9,ms)):Pt("",!0),3!=s.task.status&&4!=s.task.status?(bt(),It("span",_s," ("+Nt(null==s.task.progress||null==s.task.progress?"0%":s.task.progress+"%")+") ",1)):Pt("",!0),b.value?(bt(),It("span",ys,"#"+Nt(b.value),1)):Pt("",!0),St("div",xs,[St("div",ws,[St("p",null,Nt("MID_JOURNEY"==s.task.botType?"@mj":"@nj"),1)])]),St("span",As,Nt(1==s.task.mode?"（fast）":"（relaxed）"),1)],4)]),0!=s.task.status||s.isSuccess?Pt("",!0):(bt(),It("div",bs," ... 正在发送命令... ... ")),s.task.status<3&&s.task.status>0&&!s.isSuccess?(bt(),It("div",Cs," ... Midjoumey Bot 正在响应... ... ")):Pt("",!0),4==s.task.status||s.task.fail?(bt(),It("div",ks," 请求错误： "+Nt(s.task.failReason||s.task.fail),1)):Pt("",!0),6==s.task.status?(bt(),It("div",{key:5,style:{"margin-top":"10px","background-color":"#248046",width:"100px","line-height":"30px","text-align":"center","border-radius":"4px",color:"#fff",cursor:"pointer"},onClick:m}," 补充描述词 ")):Pt("",!0),St("div",Ss,[St("img",{style:{width:"300px",cursor:"pointer","border-radius":"8px"},src:s.task.imageUrl+`?imageView2/0/w/300/q/85&format=webp&quality=lossless&width=300&height=${parseInt(String(300*d.value/c.value))}`,alt:"",onClick:e[2]||(e[2]=t=>I(s.task.imageUrl))},null,8,Is)]),St("div",Es,[St("div",Ts,[(bt(!0),It(rt,null,Ot(s.task.buttons,(t=>(bt(),It("div",null,[-1!=a.type1.indexOf(t.label||t.emoji)?(bt(),It("div",{key:0,class:"btnItem",onClick:e=>_(t),style:lt([{display:"flex"},t.operated?"background:#5865F2":""])},Nt(t.emoji)+" "+Nt(t.label),13,Ps)):Pt("",!0),a.type0[0]==t.emoji&&2!=s.task.action?(bt(),It("div",{key:1,class:"btnItem",onClick:e=>_(t),style:lt([{display:"flex"},t.operated?"background:#5865F2":""])},Nt(t.emoji)+" "+Nt(t.label),13,Os)):Pt("",!0)])))),256))]),St("div",Ms,[(bt(!0),It(rt,null,Ot(s.task.buttons,(t=>(bt(),It("div",null,[-1!=a.type2.indexOf(t.label)?(bt(),It("div",{key:0,class:"btnItem",onClick:e=>_(t),style:lt([{display:"flex"},t.operated?"background:#5865F2":""])},Nt(t.label),13,Bs)):Pt("",!0)])))),256))]),St("div",Rs,[(bt(!0),It(rt,null,Ot(s.task.buttons,(t=>(bt(),It("div",null,[-1!=a.type3.indexOf(t.label)?(bt(),It("div",{key:0,class:"btnItem",onClick:e=>_(t),style:lt([{display:"flex"},t.operated?"background:#5865F2":""])},Nt(-1==t.emoji.indexOf("upscale")?t.emoji:"")+" "+Nt(t.label),13,Ns)):Pt("",!0)])))),256))]),St("div",Ls,[(bt(!0),It(rt,null,Ot(s.task.buttons,(t=>(bt(),It("div",null,[-1!=a.type4.indexOf(t.label)?(bt(),It("div",{key:0,class:"btnItem",onClick:e=>_(t),style:lt([{display:"flex"},t.operated?"background:#5865F2":""])},Nt(t.emoji)+" "+Nt(t.label),13,Ds)):Pt("",!0)])))),256))]),St("div",Vs,[(bt(!0),It(rt,null,Ot(s.task.buttons,(t=>(bt(),It("div",null,[-1!=a.type5.indexOf(t.emoji)?(bt(),It("div",{key:0,class:"btnItem",onClick:e=>_(t),style:lt([{display:"flex"},t.operated?"background:#5865F2":""])},Nt(t.emoji),13,zs)):Pt("",!0)])))),256))]),St("div",Us,[(bt(!0),It(rt,null,Ot(s.task.buttons,(t=>(bt(),It("div",null,[-1!=a.type6.indexOf(t.emoji)?(bt(),It("div",{key:0,class:"btnItem",onClick:e=>_(t),style:lt([{display:"flex"},t.operated?"background:#5865F2":""])},Nt(t.emoji),13,js)):Pt("",!0),a.type0[0]==t.emoji&&2==s.task.action?(bt(),It("div",{key:1,class:"btnItem",onClick:e=>_(t),style:lt([{display:"flex"},t.operated?"background:#5865F2":""])},Nt(t.emoji)+" "+Nt(t.label),13,Fs)):Pt("",!0)])))),256))])])])):Pt("",!0),Et(Oi,{taskId:f.value,onClose:x},null,8,["taskId"]),Et(qi,{"task-id":g.value,taskInfo:v.value,onClose:w},null,8,["task-id","taskInfo"]),S.value?(bt(),Ct(Zi,{key:6,imgUrl:C.value,Original:k.value,onCloseImgView:E},null,8,["imgUrl","Original"])):Pt("",!0)],32)}}}),[["__scopeId","data-v-f0d9ceef"]]),qs={class:"instructionBox"},Hs={key:0,class:"mainBox"},Gs={class:"left"},Js=["onClick"],Ws=["src"],Zs=(t=>(Dt("data-v-5cf19d81"),t=t(),Vt(),t))((()=>St("div",{class:"line"},null,-1))),Xs={class:"right"},Ks={class:"rightContent"},Ys={style:{display:"flex","font-size":"12px",color:"#fff","align-items":"center"}},$s=["src"],tr={style:{"margin-left":"8px",color:"#B5BAC1","font-weight":"bold"}},er=["onClick"],ir={style:{display:"flex","align-items":"center",height:"30px"}},nr={class:"title"},sr={key:0,class:"line",style:{width:"1px",height:"15px","background-color":"#46484F",margin:"0 4px"}},rr={class:"hint"},ar={class:"intro"},or={style:{color:"#B4B9C0",width:"60px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},lr={key:1,class:"mainBox"},hr={class:"right"},ur={class:"rightContent"},cr=["onClick"],dr={style:{display:"flex","align-items":"center"}},pr={style:{"margin-right":"10px","border-radius":"50%",overflow:"hidden"}},fr=["src"],gr={style:{display:"flex","align-items":"center",height:"30px"}},vr={style:{display:"flex"}},mr={class:"title"},_r={key:0,class:"line",style:{width:"1px",height:"15px","background-color":"#46484F",margin:"0 4px"}},yr={class:"hint"},xr={class:"intro"},wr=zt(N({__name:"index",props:{promptValue:String,selectType:String},emits:["handle_Item"],setup(t,{emit:e}){const i=U(),n=U(0),s=U(0);function r(){i.value=[{name:"INSIGHTFACESWAP",name1:"insightFaceswap",logo:ii,id:0,list:[{title:"/delall ",intro:"Delete all saved IDNAMEs",logo:ii,selectId:0,id:"ins_0",param:[],hint:""},{title:"/delid ",intro:"idname to delete",logo:ii,selectId:1,id:"ins_1",param:[{name:"idname",isBlur:!1,isShow:!1}],hint:""},{title:"/listid ",intro:"List all saved IDNAMEs",selectId:2,logo:ii,id:"ins_2",param:[],hint:""},{title:"/saveid ",type:"INSIGHT_FACE",intro:"Save Identity Feature by Name and Image",selectId:3,logo:ii,id:"ins_3",param:[{name:"idname",isBlur:!1,isShow:!1},{name:"image",isBlur:!1,isShow:!1,canLoad:!0}],hint:""},{title:"/setid ",intro:"Set Current/Default lDNAMEs, use comma splitter for multiple names",selectId:4,logo:ii,id:"ins_4",param:[{name:"idname",isBlur:!1,isShow:!1}],hint:""},{title:"/swapid ",intro:"Apply ldentity Feature to Target lmage, use comma splitter for multiple identities",selectId:5,logo:ii,id:"ins_5",param:[{name:"idname",isBlur:!1,isShow:!1},{name:"image",isBlur:!1,isShow:!1,canLoad:!0}],hint:""}]},{name:"MIDJOURNEY BOT",name1:"Midjourney bot",logo:Mi,id:1,list:[{title:"/blend ",version:"mj",type:"IMAGE_MIX_IMAGE",intro:"Blend images together seamlessly!",selectId:6,logo:Mi,id:"mj_1",param:[{name:"image1",isBlue:!1,isShow:!1,canLoad:!0},{name:"image2",isBlur:!1,isShow:!1,canLoad:!0},{name:"image3",isBlur:!1,isShow:!1,canLoad:!0},{name:"image4",isBlur:!1,isShow:!1,canLoad:!0},{name:"image5",isBlur:!1,isShow:!1,canLoad:!0}],hint:"+3 可选"},{title:"/describe ",version:"mj",type:"IMAGE_TO_TEXT",intro:"Writes a prompt based on your image.",selectId:7,logo:Mi,id:"mj_2",param:[{name:"image1",isBlue:!1,isShow:!1,canLoad:!0}],hint:"+1 可选"},{title:"/help ",version:"mj",intro:"Blend images together seamlessly!",selectId:8,logo:Mi,id:"mj_3",param:[],hint:""},{title:"/imagine ",version:"mj",type:"TEXT_TO_IMAGE",intro:"Create images with Midjourney",selectId:9,logo:Mi,id:"mj_4",param:[{name:"prompt",isBlur:!1,isShow:!1}],hint:""},{title:"/settings ",version:"mj",intro:"View and adjust your personal settings.",logo:Mi,selectId:10,id:"mj_5",param:[],hint:""},{title:"/shorten ",version:"mj",intro:"Analyzes and shortens a prompt.",logo:Mi,selectId:11,id:"mj_6",param:[{name:"prompt",isBlur:!1,isShow:!1}],hint:""},{title:"/show ",version:"mj",intro:"Shows the job view based on job id.",logo:Mi,selectId:12,id:"mj_7",param:[{name:"job_id",isBlue:!1,isShow:!1,canLoad:!1}],hint:""},{title:"/tune ",version:"mj",intro:"Create a shareable style tuner based on a prompt.",selectId:13,logo:Mi,id:"mj_8",param:[{name:"prompt",isBlur:!1,isShow:!1}],hint:""}]},{name:"NIJI·JOURNEY BOT",name1:"niji·journey bot",logo:Bi,id:2,list:[{title:"/blend ",version:"nj",type:"IMAGE_MIX_IMAGE",intro:"Blend images together seamlessly!",selectId:14,logo:Bi,id:"nj_1",param:[{name:"image1",isBlue:!1,isShow:!1,canLoad:!0},{name:"image2",isBlur:!1,isShow:!1,canLoad:!0},{name:"image3",isBlur:!1,isShow:!1,canLoad:!0},{name:"image4",isBlur:!1,isShow:!1,canLoad:!0},{name:"image5",isBlur:!1,isShow:!1,canLoad:!0}],hint:"+3 可选"},{title:"/describe ",version:"nj",type:"IMAGE_TO_TEXT",intro:"Writes a prompt based on your image.",selectId:15,logo:Bi,id:"nj_2",param:[{name:"image1",isBlue:!1,isShow:!1,canLoad:!0}],hint:"+1 可选"},{title:"/help ",version:"nj",intro:"Blend images together seamlessly!",selectId:16,logo:Bi,id:"nj_3",param:[],hint:""},{title:"/imagine ",version:"nj",type:"TEXT_TO_IMAGE",intro:"Create images with Midjourney",selectId:17,logo:Bi,id:"nj_4",param:[{name:"prompt",isBlur:!1,isShow:!1}],hint:""},{title:"/settings ",version:"nj",intro:"View and adjust your personal settings.",selectId:18,logo:Bi,id:"nj_5",param:[],hint:""},{title:"/shorten ",version:"nj",intro:"Analyzes and shortens a prompt.",selectId:19,logo:Bi,id:"nj_6",param:[{name:"prompt",isBlur:!1,isShow:!1}],hint:""},{title:"/show ",version:"nj",intro:"Shows the job view based on job id.",selectId:20,logo:Bi,id:"nj_7",param:[{name:"job_id",isBlue:!1,isShow:!1,canLoad:!1}],hint:""},{title:"/tune ",version:"nj",intro:"Create a shareable style tuner based on a prompt.",selectId:21,logo:Bi,id:"nj_8",param:[{name:"prompt",isBlur:!1,isShow:!1}],hint:""}]}]}ht((()=>{r()}));const a=U(!0),o=U([]);ht((()=>{i.value.forEach((t=>{o.value=[...o.value,...t.list]}))}));const l=e,h=t,u=U(null),c=U(null),d=U([]);function p(t){l("handle_Item",t)}Z(h,(t=>{var e,o,l;if(""==t.promptValue)return;d.value=[],"/"==t.promptValue?(r(),i.value.forEach((e=>{e.list=e.list.filter((e=>-1!=e.title.indexOf(t.promptValue)))})),a.value=!0):(i.value.forEach((e=>{e.list=e.list.filter((e=>-1!=e.title.indexOf(t.promptValue))),d.value=[...d.value,...e.list]})),a.value=!1);let h,f=u.value.length;if(c.value&&(h=c.value.length,c.value=c.value.slice(0,h)),u.value=u.value.slice(f-22,f),-1!=(null==(e=t.selectType)?void 0:e.indexOf("up")))if(a.value){if(0==n.value)return;n.value--,u.value[n.value].scrollIntoView({behavior:"smooth"})}else{if(0==s.value)return;s.value--,c.value[s.value].scrollIntoView({behavior:"smooth"})}else if(-1!=(null==(o=t.selectType)?void 0:o.indexOf("down")))if(a.value){if(n.value>20)return;n.value++,u.value[n.value].scrollIntoView({behavior:"smooth"})}else{if(s.value>d.value.length-2)return;s.value++,c.value[s.value].scrollIntoView({behavior:"smooth"})}else-1!=(null==(l=t.selectType)?void 0:l.indexOf("enter"))&&(a.value&&i.value.forEach((t=>{t.list.forEach((t=>{t.selectId==n.value&&(p(t),n.value=0)}))})),a.value||(p(d.value[s.value]),s.value=0))}));const f=U([]),g=t=>{f.value.length<3&&f.value.push(t)};return(t,e)=>(bt(),It("div",qs,[a.value?(bt(),It("div",Hs,[St("div",Gs,[(bt(!0),It(rt,null,Ot(i.value,(t=>(bt(),It("div",{class:"robotLogo",onClick:e=>{return i=t.id,void(0!=f.value.length&&f.value[i].scrollIntoView({block:"start",behavior:"smooth"}));var i}},[(bt(),It("div",{class:"logo",key:t.id},[St("img",{src:t.logo,alt:"",style:{width:"20px",height:"20px"}},null,8,Ws)]))],8,Js)))),256)),Zs]),St("div",Xs,[St("div",Ks,[(bt(!0),It(rt,null,Ot(i.value,(t=>(bt(),It("div",{class:"contentItem",key:t.id,ref_for:!0,ref:g},[St("div",Ys,[St("img",{src:t.logo,alt:"",style:{"background-color":"#fff","border-radius":"50%",width:"20px",height:"20px"}},null,8,$s),St("p",tr,Nt(t.name),1)]),(bt(!0),It(rt,null,Ot(t.list,(e=>(bt(),It("div",{class:"childList",onClick:t=>p(e),ref_for:!0,ref_key:"selectRef",ref:u,style:lt(n.value==e.selectId?"background:#35373C":"")},[St("div",null,[St("div",ir,[St("p",nr,Nt(e.title),1),(bt(!0),It(rt,null,Ot(e.param,((t,i)=>(bt(),It("div",null,[i<2?(bt(),It("div",{key:0,class:Mt(n.value==e.selectId?"itemParam1":"itemParam")},Nt(t.name),3)):Pt("",!0)])))),256)),""!=e.hint?(bt(),It("div",sr)):Pt("",!0),St("div",rr,Nt(e.hint),1)]),St("p",ar,Nt(e.intro),1)]),St("div",or,Nt(t.name1),1)],12,er)))),256))])))),128))])])])):(bt(),It("div",lr,[St("div",hr,[St("div",ur,[(bt(!0),It(rt,null,Ot(d.value,((t,e)=>(bt(),It("div",{class:"contentItem",key:t.selectId,ref_for:!0,ref_key:"selectallRef",ref:c,style:{"margin-bottom":"0"}},[St("div",{class:"childList",onClick:e=>p(t),style:lt(s.value==e?"background:#35373C":"")},[St("div",dr,[St("div",pr,[St("img",{src:t.logo,alt:"",style:{width:"30px",height:"30px"}},null,8,fr)]),St("div",null,[St("div",gr,[St("div",vr,[St("p",mr,Nt(t.title),1),(bt(!0),It(rt,null,Ot(t.param,((t,i)=>(bt(),It("div",null,[i<2?(bt(),It("div",{key:0,class:Mt(s.value==e?"itemParam1":"itemParam")},Nt(t.name),3)):Pt("",!0)])))),256))]),""!=t.hint?(bt(),It("div",_r)):Pt("",!0),St("div",yr,Nt(t.hint),1)]),St("p",xr,Nt(t.intro),1)])])],12,cr)])))),128))])])]))]))}}),[["__scopeId","data-v-5cf19d81"]]);function Ar(){const t=At();return{selectFile:function(){return new Promise(((e,i)=>{const n="text/x-c,text/x-c++,application/csv,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/html,text/x-java,application/json,text/markdown,application/pdf,text/x-php,application/vnd.openxmlformats-officedocument.presentationml.presentation,text/x-python,text/x-script.python,text/x-ruby,text/x-tex,text/plain,text/css,image/jpeg,image/gif,image/png,application/x-tar,application/typescript,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/xml,application/zip",s=[".c",".cpp",".csv",".docx",".html",".java",".json",".md",".pdf",".php",".pptx",".py",".py",".rb",".tex",".txt",".css",".jpeg",".jpg",".js",".gif",".png",".tar",".ts",".xlsx",".xml",".zip"],r=document.createElement("input");r.multiple=!0,r.name="file",r.type="file",r.accept=n,r.click(),r.style.display="none",r.onchange=async()=>{const a=r.files;let o=a&&(null==a?void 0:a.length)>=1?a[0]:void 0;if(o)return n.includes(o.type)?o.size>=536870912?(t.error("上传的文件不能超过512Mb"),void i("上传的文件不能超过512Mb")):void e(o):(t.error("上传文件只支持"+s.join(",")+"格式"),void i("上传文件只支持"+s.join(",")+"格式"));i("未选择文件")},r.remove()}))},selectFileByImageAndVideo:function(){return new Promise(((e,i)=>{const n="image/jpeg,image/png, video/mp4",s=[".jpeg",".jpg",".png",".mp4"],r=document.createElement("input");r.multiple=!0,r.name="file",r.type="file",r.accept=n,r.click(),r.style.display="none",r.onchange=async()=>{const a=r.files;let o=a&&(null==a?void 0:a.length)>=1?a[0]:void 0;if(o)return n.includes(o.type)?o.size>=10485760?(t.error("上传的文件不能超过10Mb"),void i("上传的文件不能超过10Mb")):void e(o):(t.error("上传文件只支持"+s.join(",")+"格式"),void i("上传文件只支持"+s.join(",")+"格式"));i("未选择文件")},r.remove()}))},upload:async function(t,e){const{file:i,purpose:n}=t,s=new FormData;return s.append("file",i),s.append("purpose",n),await Ft(s,e)}}}const br=t=>(Dt("data-v-5c08b8ce"),t=t(),Vt(),t),Cr={class:"box"},kr={style:{display:"flex",width:"100%","background-color":"#38393E"}},Sr={class:"uploadBox"},Ir={class:"imgTitle"},Er=br((()=>St("img",{style:{width:"48px",height:"48px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPTSURBVHgB7VndUdtAEN6THSdPYPE3w5tdAaQDU0GggkAFQAWYCggVABVAKsCpIKIC640Z/s6Z4SFkkDa74iTLtk4/1slJJv5mPCPJd6dv7/Z29z4BzDHH/w0BM0S/L5sLC7ArLPEJETbpUTMgIcBBXzi+71+srtq9AkPOzgApf+z7iF1QpHUgY3ovP3Fvfd12IQcqN4BnfbEpLmnGOwW6DdDHvZUV+yqroQUVInCZRXEdJ48APUA8/PWC7eWlJnkT2r6HW4h4EevKf1ze3cnNrHdUtgIhebqMSJALHa8u211dHylly8egT0s9csnAj7ZtD3R9KlmBacgziCgT3qLLkHDr1YeDtD7GDZiWfAg2gvz/MLy3hNhPa2/UhcqSj+PxaSBBRSyP3GjNtp2kdsZWwCR5Bm3qr9GNB9rNbMQA0+QZFK3c8JpyQ0vXrrQBRchTMjt6koPr21vZyhpXjCa8aqJQQfJnnIk5JzQ+WEdZY1uW2AivBQ5XY6IdTIkpyO+G9+j539LG5hWKJ79aDRxd26kMKEOe21GJcJ42fqMxXCHO3BxawRSYPIW47/TD8Hf/KLtJbZl8nnZjfY7iffKUE38t+YdH+QVMYdbk+V2QA7n2QFmfz8oHTF6dFUI4qiYyA3rBySxnnqrSJpjCw4Pc/WfJM2jQftam+pPkU/cAzz7EDhc1C7oJRE5M+fz4wYX3HpRBPOooY0aQ173GyeeZeRYB1P/9tJXRroAquKKoQ+l84oBt1cTn8NrkzKt2obu2PE8vCGgNqNeHJaxK5xMVYbxeqVtwDubIj7RLUyf0e8CKHSIQbyYJjZTEblq9UoZ8Vj5I28SR32FCPa4IR4dvnZ+WJZ+mSGQZEHUUGjWNnkdlLqI4gxmTZ9R1f9AhYhAd+TVHOs/DY9rIncAAgG2OGGTJadCF9E8i1amS/Bs1DbiMrdVFWFANSEWzk9px6CTpI+uEVQl5RqqsEpc2WP7TKcfKiH1IcDVSF05Xlu2D8ecmyEOWAVw6CCUsUcPe0lJTGxE4KgXxWnD0shYF+DcWhdYkQqbIK156KK2yH96TYraTRzFOH9MceUZqLRTIfGpTMmhjnuWRRHQwTZ6ReaBRBZyrbpuN9+J6GiOqIM/INIBf4L3iDsSSFhnRZ0KQA2wsi1lVkGfkFndVWL0EGMkJLqDo8bet52dw2u03Qkz63TvocLGX8GXGGHlGIXU64QNEIehCahkUErZ4U1NCa/P3KwC93DcOrmY5j5gmzyj1feD+XnaEBdskH28IGH42JbhE2qEZv0EPrtbWkrX9OeaYozx+A9pzIkx6bDzRAAAAAElFTkSuQmCC",alt:""},null,-1))),Tr=br((()=>St("div",{style:{"font-size":"12px",color:"#23a559","margin-top":"12px"}},"上传文件",-1))),Pr={key:1,class:"imgBox1",style:{position:"relative"}},Or=br((()=>St("span",null,"移除附件",-1))),Mr={style:{position:"absolute",bottom:"5px",left:"10px","font-size":"12px",display:"flex","align-items":"center"}},Br=br((()=>St("span",{style:{color:"#EDEEF0"}},"image：",-1))),Rr={style:{color:"#FF453A","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis",width:"125px"}},Nr=zt(N({__name:"index",props:{promptMessageText:String,promptMessageText1:String,item:Object},emits:["base64Array"],setup(t,{emit:e}){const i=Qt(),n=At(),{selectFile:s}=Ar(),r=t,a=e,o=U("/api/file/upload"),l=U(),h=U("");async function u(t=1){let e;if(1===t){if(e=await s(),!e)return void n.error("选择文件错误")}else e=t;const r=new FormData;r.append("file",e),function(t){return new Promise(((e,i)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=function(){const t=n.result.split(",")[1];e(t)},n.onerror=function(){i(new Error("Failed to load file"))}}))}(e).then((t=>{a("base64Array","data:image/png;base64,"+t)})),await jt.post(o.value,r,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{if(e.data){let{data:t}=e.data;h.value=t,l.value=t.split("/ai/")[1]}1!==t&&i.updateRecordDialog(!1)}))}return(t,e)=>(bt(),It("div",Cr,[St("div",kr,[St("div",Sr,[""==h.value?(bt(),It("div",{key:0,class:"imgBox",onClick:e[0]||(e[0]=t=>u(1))},[St("div",Ir,Nt(r.item.name),1),Er,Tr])):(bt(),It("div",Pr,[Et(Tt(c),{trigger:"hover"},{trigger:kt((()=>[St("img",{style:{width:"25px",height:"25px",position:"absolute",right:"10px",top:"10px","z-index":"1","background-color":"#313338",padding:"6px","border-radius":"2px"},src:"/static/png/del-f22398be.png",alt:"",onClick:e[1]||(e[1]=t=>{h.value="",l.value=""})})])),default:kt((()=>[Or])),_:1}),Et(Tt(Ke),{src:h.value,style:{display:"flex","justify-content":"center","background-color":"#414246"}},null,8,["src"]),St("div",Mr,[Br,St("div",Rr,Nt(l.value),1)])]))])])]))}}),[["__scopeId","data-v-5c08b8ce"]]),Lr=(t=>(Dt("data-v-5e60ee77"),t=t(),Vt(),t))((()=>St("p",{style:{color:"#83918c","font-size":"12px"}},"所需选项",-1))),Dr={class:"needBox"},Vr=["onClick"],zr=zt(N({__name:"index",props:{needPromptArr:Array,canUpload:Boolean},emits:["handleNeedPromptFn"],setup(t,{emit:e}){const i=t,n=e;return(t,e)=>i.needPromptArr&&0!=i.needPromptArr.length?(bt(),It("div",{key:0,class:"box",style:lt(i.canUpload?"margin-bottom:220px":"")},[Lr,St("div",Dr,[(bt(!0),It(rt,null,Ot(i.needPromptArr,(t=>(bt(),It("div",{class:"needItem",onClick:e=>function(t){n("handleNeedPromptFn",t)}(t)},Nt(t.name),9,Vr)))),256))])],4)):Pt("",!0)}}),[["__scopeId","data-v-5e60ee77"]]),Ur=t=>(Dt("data-v-a3969492"),t=t(),Vt(),t),jr={class:"uploadmainBox"},Fr={class:"imgBox"},Qr={class:"actionBox"},qr={key:0,class:"axtionIcon",style:{width:"26px"},src:"/static/png/eye-close-98b83e6d.png",alt:""},Hr={key:1,class:"axtionIcon",style:{width:"26px"},src:ai,alt:""},Gr=Ur((()=>St("div",null,"剧透附件",-1))),Jr={class:"edit"},Wr=Ur((()=>St("img",{class:"axtionIcon",style:{width:"18px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAACytJREFUeF7t3WtSHDcUhmFpyELIRgz8MC4X8RqCV2KzErwHh3IF/wC8kUz2EaaTntB4rt26HJ3W5aUqlUpGLam/c57qwYKxNXyRQMIEvn17OF0tFtedtWf9MtZ0p8aY/p9l/9+dsUtrVktjFk9Xl2++JNxK0NQ26CouIoGRBAYUxprfXzC45rXswXT2+ebD24tH14tSjgNIynQbnPvuz6fP/z0mPgnc+nJlVx/nhgIQgUoyhTHrp8bJ4sHziTEdXWdurt6dfZ4emGYEQNLk2tSsX78/nC+6NY5UX8vF8+ri/fuL9fctml8A0Uy7wrUE31JNpTMLEoBMlYXXjyZwd/94a4y9VoxIHQlAFKtb01Iz4BjiU0UCkJq6VuleZsShjgQgSk1VyzIZ4FBFApBaOlfhPjLCoYYEIAqNVcMSGeJQQQKQGro38T1kjCM5EoAkbq7Spy8AR1IkACm9gxPuvyAcyZAAJGGDlTx1gTiSIAFIyV2caO8F4xBHApBETVbqtBXgEEUCkFI7OcG+K8IhhgQgCRqtxCkrxCGCBCAldrPwnivGEY0EIMLNVtp0DeCIQgKQ0jpacL8N4QhGAhDBhitpqgZxBCEBSEldLbTXhnF4IwGIUNOVMg04Xivl9JuJACmlswX2CY69ECeRAESg8UqYQuGjeUqI4dAeR5EApNSyeu574+NAJT710HP17IcfRQKQ7Gsnt0GQjGZ5EAlA5PqviJlAcrxMnbGPv12+udgcAZAi2lp2kyAZy7P7cnV5/nEYARDZ3itmNpAcL9XKri6GT5UHSDEtLb9RkBzOdPOtFkDk+66oGUFyuFzDUwQgRbVzms2CZD/X4SkCkDQ9pzrr3f2P69i/3w8keyVbXl2e/QoQ1VaWX+znj49s/+lLyEog2U6tf5sFkJBOyuSa/Z+tAoloaTpzAxDRRPUmO/6DhyCRqkL/fQhApNJUnGf6p3JBIlSOJUCEktSaZhrHsBOQCNQEIAIhqk3hjgMkUkXhCSKVZOJ5/HGARKAkPEEEQkw+RTgOkMQUh2/SY9JTujYeB0jCS9V94S1WeHrJr5TDAZKwYtmPAAlLLvlV8jhA4lu0xfOKHzXxDU1jfDocIPGp39XlmeUJ4pOYwtj0OEDiVMbO3Fy9O/sMEKe0dAbp4QDJVEX7p0c/BiBTSSm9ro8DJEdL+/L0AIhS808tMx8OkByozfr3QIb/zxNkqnsTvz4/DpBslnjzAxt4giRu/qnp88EBkj6BXRwAmerghK/nh6NxJBvfd2yWnbdYCREcmzpfHK0iOf6rAQBRBpI/jtaQjP/eDEAUgZSDoxUk079UBhAlIOXhqB3JNA6+SQeHYwJuzTQ2WV4fKeR+PzxBHFskdFi5T47dO3ZvqmNZ5YHE7z4AEtr5DtfVg6OWt1t+OHiL5dDkoUPqw1E6En8cAAnt/onr6sVRKpIwHABJAKR+HKUhCccBEGEg7eAoBUkcDoAIAmkPR+5I4nEARAhIuzhyRSKDAyACQMCRGxI5HACJBAKO3A4TZXEAJAIIOI6FF9+kYSfu8eseuiNO0gOQgGMqtPhm9UMSv96xOwLIVK13XgeHa2DxTeuGJH6dsTsCiGu9jTHg8AhrPTS+eceRxM8/dUcAmUro5XVwOAa1Nyy+iQ8jiZ/X5Y4A4pASOBxCGh0S38zbSOLnc70jgEwkBQ7XVpoaF9/UayQnJ+dXl2++TK0m9TpARpIEh1SbDfPEI5He0dR8ADmSEDimWif09bKQAORAncER2vyu15WDBCA7NQWHa5PHjisDCUA26gyO2Kb3vT5/JADhnMO3q4XH540EIJyQCzd8yHT5ImkeCG+rQho6xTV5ImkaCDhSNHrMnPaj5iGgy06bBQIOl/bQHMMTRDPt0bXAkU0pXjaSJ45+c809QcABDp8EmgICDp/W0Bib75NjuPtmgIBDo+F91sgfRzNvscDh07gaY8vA0QQQcGg0vM8a5eCoHgg4fBpXY2xZOKoGAg6NhvdZozwc1QIBh0/jaowtE0eVQMCh0fA+a5SLozog4PBpXI2xZeOoCgg4NBreZ43ycVQDBBw+jasxtg4cVQABh0bD+6xRD47igYDDp3E1xtaFo2gg4NBoeJ816sNRLBBw+DSuxtg6cRQJBBwaDe+zRr04igMCDp/G1RhbN46igIBDo+F91qgfRzFAwOHTuBpj28BRBBBwaDS8zxrt4MgeCDh8GldjbFs4sgYCDo2G91mjPRzZAgGHT+NqjG0TR5ZAwKHR8D5rtIsjOyDg8GlcjbFt48gKCDg0Gt5nDXBkAwQcPo2rMRYcQ8qzf7IiODQa3mcNcGymNSsQcPg0rsZYcOymPBsQcGg0vM8a4DiU1ixAwOHTuBpjwXEsZXUg4NBoeJ81wDGWlioQcPg0rsZYcEylrAYEHFOl0H4dHC6JqwABh0spNMeAwzXt5EDA4VoKrXHg8Ek6KRBw+JRCYyw4fFNOBgQcvqVIPR4cIQknAQKOkFKkvAYcoemKAwFHaClSXQeOmGRFgYAjphQprgVHbKpiQMARWwrp68EhkagIEHBIlEJyDnBIpRkNBBxSpZCaBxxSSfbzRAEBh2QpJOYCh0SKm3MEAwGHdCli5wNHbIKHrg8CAo4UpYiZExwx6Y1d6w0EHKlKETovOEKTc7nOCwg4XCLVHAOO1Gk7AwFH6lL4zg8O38RCxjsBAUdItCmvAUfKdL3+FAscWqVwXQccrklJjBt9goBDImLJOcAhmabLXEeBgMMlPs0x4NBMe1jrIBBwzFGKsTXBMVdFjgB56ubaEOvuJgCOOXtiD8i3bw+nq5PFX3NuirWHBMAxdy/sAfn6/eF80S0e5t4Y64Mjhx7YA3J3/+PamO42h821uwdw5FL7fSB/Pn021nzKZYPt7QMcOdX8wBPk8dYYe53TJtvZCzhyqzVAsqkIOLIpxcZGDgB56v8E6zTHzda7J3DkWluAzF4ZcMxegpENHALCIaFaxcChFnXgQltAOCQMTDHoMnAExaZ80RYQDgm10geHVtKx62wB4ZAwNk6X68HhklIuY7aBcEiYuC7gSByw+PQ7TxAOCcUTfp0QHOmyTTczQNJluzEzOFRiTrDIDhAOCeUzBod8pnozAiRp1uBIGq/C5LtAOCQUCx0cYlHOONErEA4JJasADsk055zrFQiHhFJlAIdUkjnM8wqEQ0KJcoBDIsWc5vgJhEPCyLqAIzLALC/feIJwSBheIXCEZ5f3lQCJrg84oiPMeIINIBwS+tcJHP6ZlXUFQILrBY7g6Aq6cBMIh4TOhQOHc1SFD1wD4ZDQp4rg8Emr9LFrIJyBuJYRHK5J1TIOIM6VBIdzVBUN/B8Ih4QTJQVHRT3vdSsvTxAOCY+nBg6vjqpsMEBGCwqOyvrd+3ZegHBIuJ8cOLy7qcILAHKwqOCosNeDbmkAwiHha3zgCOqkSi+yHBJuVhYclfZ58G1ZDgmH7MAR3EUVXwiQdXHBUXGPR92a5ZAQHFEdVPnF9u6+5UNCcFTe39G31zAQcER3TwMT2Lv7Fg8JwdFAb4vcYoNAwCHSOY1M0gNp6JAQHI30tdhtNvQEAYdY1zQ0kf3j/seDNd153fcMjrrrm+7uGjgHAUe69ql/5sp/Fgsc9bdw2jss+Vdul+sfEjF2ac1qaTr7d//fq8Xqsf/3h7cX63/zRQIxCbx+7M/zycltRt+L0PwxVeVasQR2/wKdB2PMqdjshyei+RMHzPRyCWz9FWzr3w1ZLK6NNZ8Cl9hvfmuXK/u8/OUfs3z//mL9Ol8kUEoCW0CGTQ9QOmvPrOn6J0r/D81fSlXZp1gC/wJIq1IluWAgxwAAAABJRU5ErkJggg==",alt:""},null,-1))),Zr=Ur((()=>St("div",null,"修改附件",-1))),Xr=Ur((()=>St("img",{class:"axtionIcon",style:{width:"20px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAACz5JREFUeF7tnV1240QQhUsmr4TDCsisxE4O+5hkJQwrSdgHx3FWglkBh/DKWBw5k2EI1qh0Vd1utb68prvU/XVd3y79NsYfBCDQS6CBDQQg0E8AgZAdEPgKAQRCekAAgZADENAI4CAaN3othAACWchCM02NAALRuNFrIQQQyEIWmmlqBBCIxo1eCyGAQBay0ExTI4BANG70WgiBxQnkj83m6sIurlo7XC1kjUOm2dhq/7f9vf9+t9uHBJxJkEUIpBPFyla3TWvvzQxhTEvOfdvYLwc7PCxBLFUL5Ath/DQtJ+h9gsAihFKtQP7a/Lhp28MjqZ2cwP5jc7iu1U2qFAjiSC6Ktwc4usl3u+2H7EdOfMDqBII4EmdMf/h906zuvt39ujvbCBIcuDqBPK9v2gScCOkjUN12qyqBPK9v7s3s1reWtEpE4OHyaXuXKHb2sNUIpDtj9U27+i07QQ74v3qkpq1WNQLBPYpSajUuUpNAOvfgImAZOtlfPm3flTGUaaOoSSAU59NyIbR306yuazijVYVAnjc3t9ZaV6DzVwgBBFLIQnTDQCAFLcbrUBq7u9xtHwoc2aghVeEgf25uPjStRd1v1d2tumsb+31lq6ouevVlxvHO5tbWZu2VWbMZlUE9jdvGfq7hyjoC+WKBa1nUKQke9WNTC0sE8pJN1V0BniKST9eUuhs95bOCCGTKCgT3nfqr97E5vKv1blQV9dQLrwhEJZ+g3ySBVFJMJsA66eQHAkmxImLMCQKp5oKWiG6w2/P6+lEp3BHIINp8DSYIpJpbIlLRVtkikFQrIsRVF9HYXg3SVp+vQSCDaPM1UAVCcT68RmqxjkCG2WZrgUDSoUYg6dhmi4xA0qFGIOnYZouMQNKhRiDp2GaLjEDSoUYg6dhmi4xA0qFGIOnYZouMQNKhRiDp2GaLjEDSoUYg6dhmi4xA0qFGIOnYZouMQNKhRiDp2GaLjEDSoUYg6dhmi4xA0qFGIEFsjyBtFfI88+ghte179ZbsxmxRX0way7Y1uxKf93+wxp7GHi+iffc1rKhXDk165JYP1EQsJzESEQj5JIMsEPU26EQwCAuBPgKTPssgC4TPDJCRMyIgPzkqCUR9DHNGQBlqfQSkp0dFgfCRmvryp/oZSS4yWiDUHtUnUrUTVN4XjECqTQcm9pZAFoGoF45YLgicm4DyDoLRDtJNkjNY515qjq8QuHzajs730R26gam3diiTog8EIgiob1mRBBLxcuOISRMDAj4C7e7y6fHa1/a/rSSBdCEQiYKbPmcgMOnN/bJAXkWystVt07Zr5WbBM8DikMshcN57sd5y7hzlwi7070m8fOWI7wwuJ4F7Z9rVC1O+7hV1J283wEkOErmWXICMpDnvWMr1ilQzRiCpyBJXJoBATqDDQeR8qq4jAkEg1SV15IQQCAKJzKfqYiEQBFJdUkdOCIEgkMh8qi4WAkEg1SV15IQQCAKJzKfqYiEQBFJdUkdOCIEgkMh8qi4WAkEg1SV15IQQCAKJzKfqYiGQ+QvkeCt1N43urtP25U7ktZl17yaW72gOyvSSx+aaIgKZtUD6n04r4F3FvS9HK2BsLnF0jRDITAXifa75HM/slzw2tzI+NUQgsxSI/7nml8eRm/t8T1mWPLax8sBBThIr/Xb3sb9qOedT8tjGywOBzFIgY9+plPMFeyWPDYEoBGa3xfJvYb6cWqa34EtvLc80Nik7xjqidBBnJx65dYFCIC5MQY0QCA4SlErHMDhIJM03sXAQF1wcxIUpqBEOgoMEpRIOEgnyVCwcxEUYB3FhCmqEg+AgQamEg0SCxEFkmjiIjE7oiIPgIELa9HbhLFYkTc5iKTRxEIWa2gcHwUHU3DnVDweJpImDKDRxEIWa2gcHwUHU3MFBIsk5YnEdxAHJDAdxYQpqhIPgIEGpxHWQSJBcB5Fp4iAyOqEjDoKDCGnDdZBIaN5Y1CAuUjiIC1NQIxwEBwlKJWqQSJDUIDJNHERGJ3TEQXAQIW2oQSKheWNRg7hI4SAuTEGNcBAcJCiVqEEiQVKDyDRxEBmd0BEHwUGEtKEGiYTmjUUN4iKFg7gwBTXCQXCQoFSiBokESQ0i08RBZHRCRxwEBxHShhokEpo3FjWIi5TqIDf3ZnbrOoTeiEdudXaDPRHIIKKuAQJxYQpqxBZrMVssHETRDAJBIEre9PVhixVJ800stlguuGyxXJiCGuEgOEhQKnEdJBIk10FkmjiIjE7oiIPgIELacB0kEpo3FjWIixQO4sIU1AgHwUGCUokaJBIkNYhMEweR0QkdcRAcREgbapBIaN5Y1CAuUiU7iDq260ezZuOafuZGOAgOEphyCCQQ5v9C4SAuumoS5rgXSx0bDuJZegTioVT03bwIxLWEYiME4gKnJiEO4sL7phE1CDWIkjc9fVTxssXyLAIO4qHEFstFKaoRDoKDROXShKcdcRDPIuAgHko4iItSVCMcBAeJyiUcJJDkqVA4iAuwWghzFsuFl7NYw5j+2vy4advD43DLc7RAIDmps8ViixWYb6p4KdI9i8AWy0OJIt1FKaoRDoKDROUSRXogSYp0Gaa6jaFIV5DjIDiIkjc9fVTxUoN4FoEaxEOJGsRFKaoRDoKDROUSNUggSWoQGaa6jaEGUZDjIDiIkjfUIIHUvKGoQVykcBAXpqBGOAgOEpRKXRhVvJzF8iwCDuKhJCchNYgL75tGOAgOouQNNUggNW8oHMRFSt3G4CAuvDjIMCZudx9mdLqFKl5qEA9xHMRDiRrERSmqETUINUhULnEWK5DkqVA4iAuwuo2hBnHhpQYZxkQNMsyIGkRlpPfDQVzscBAXpqBG1CDUIEGp1IVRxctZLM8i4CAeSmb7y6ftO1/Tf1s9r29+M7Orsf1Gti95bCOn8tIcB5mdg5h9bA7vvt/t9mNW/Hl9045pr7a9fNqO/qHLNTZlTghkhgKxxu4ud9sH74I/b25urbV7b/tJ7UoemzAxBDJHgZjtPzaHa6+LZNpevZIcO7YsziZogy1WH7SyT/O+jtpXED+vz1IAP1w+be+GkvJMYxsa1n/+j4PM00E+/1o3zeru292vu7fT+GOzufqmXXWvT01dmPcl3L5vbJ9+gLot37nG5hYJApm3QD4Lxcx2bWO/H8+8tPaTOwPSN+xOJhzH1rT2g5ndpj9k3BEQSB0CicsIIrHFGsqBedQgQ7Pg/xEEcBAcJCKPqo2BQBBItckdMTEEgkAi8qjaGAgEgVSb3BETQyAIJCKPqo2BQBBItckdMTEEgkAi8qjaGAgEgVSb3BETQyAIJCKPqo2BQBBItckdMTEEgkAi8qjaGAjkxNJ+ulW8e4abv4UTUB5vToVs9LPMqQaCQFKRnV9cBNKzZiW/SGB+aTbfESsvoUg122IcpJvgHB4HTbUQxP1MwPXocC5eRQmEZ0JyLXvBxxn5hpbUMylKIAU8052aN/G/TkB6CV5KqEUJ5LjNyvk+qZRkiT2eQGHu0U2gOIG8uEhzb9ZsxhOmx3wJ+F6plHt+xQmkA8BWK3canP14xW2tXokUKRBEcvaEzTmA3nd55RxE37GKFQgiKSE9Uo+hzG3Vl7MuWiCvIlnZ6rZp7f0c3gqYOqUqib9vG/vlu932Q+nzKV4grwCPdYmtNta27yngS0+r3vHNRhjF1yBfS4FOLN3/L+ziqrVD8e+anW06Bwy8sdXxmyqn3mUcED55iNk4SHISHAACJwggENICAl8hgEBIDwggEHIAAhoBHETjRq+FEEAgC1lopqkRQCAaN3othAACWchCM02NAALRuNFrIQQQyEIWmmlqBBCIxo1eCyGAQBay0ExTI/APpOnmUHyWSIkAAAAASUVORK5CYII=",alt:""},null,-1))),Kr=Ur((()=>St("div",null,"移除附件",-1))),Yr={style:{height:"85%",width:"100%",display:"flex","justify-content":"center","background-color":"#414246","border-radius":"4px",position:"relative"}},$r={key:0,style:{height:"100%",position:"absolute",width:"100%","z-index":"15"},class:"divBox"},ta=[Ur((()=>St("div",{style:{"background-color":"#363B34",color:"#fff","font-size":"14px","font-weight":"bold","border-radius":"16px","text-align":"center",width:"50%","line-height":"30px",cursor:"pointer"}},"剧透内容",-1)))],ea=["src"],ia={style:{color:"#E0F4E6","font-size":"14px","text-align":"center"}},na=zt(N({__name:"index",props:{uploadItem:Object},emits:["deleteFn"],setup(t,{emit:e}){const i=t,n=e,s=U(!1);function r(){n("deleteFn",i.uploadItem)}return(t,e)=>(bt(),It("div",jr,[St("div",Fr,[St("div",Qr,[St("div",{class:"isShow",onClick:e[0]||(e[0]=t=>s.value=!s.value)},[Et(Tt(c),{trigger:"hover",placement:"top",style:{background:"#000",color:"#fff","border-radius":"12px"}},{trigger:kt((()=>[s.value?(bt(),It("img",qr)):(bt(),It("img",Hr))])),default:kt((()=>[Gr])),_:1})]),St("div",Jr,[Et(Tt(c),{trigger:"hover",placement:"top",style:{background:"#000",color:"#fff","border-radius":"12px"}},{trigger:kt((()=>[Wr])),default:kt((()=>[Zr])),_:1})]),St("div",{class:"delet",onClick:r},[Et(Tt(c),{trigger:"hover",placement:"top",style:{background:"#000",color:"#fff","border-radius":"12px"}},{trigger:kt((()=>[Xr])),default:kt((()=>[Kr])),_:1})])]),St("div",Yr,[s.value?(bt(),It("div",$r,ta)):Pt("",!0),St("img",{style:{height:"100%","border-radius":"4px"},src:i.uploadItem.data,alt:""},null,8,ea)]),St("div",ia,Nt(i.uploadItem.imgName),1)])]))}}),[["__scopeId","data-v-a3969492"]]),sa=t=>(Dt("data-v-3923fd91"),t=t(),Vt(),t),ra=[sa((()=>St("p",null,"复制文字",-1))),sa((()=>St("img",{src:"/static/png/copy-558fc1b4.png",alt:"",style:{width:"15px",height:"15px"}},null,-1)))],aa=[sa((()=>St("p",null,"APP",-1))),sa((()=>St("img",{src:"/static/png/menuRight1-da79bc26.png",alt:"",style:{width:"15px",height:"15px"}},null,-1)))],oa=[sa((()=>St("p",null,"INSwapper",-1))),sa((()=>St("img",{src:ii,alt:"",style:{width:"15px",height:"15px"}},null,-1)))],la=[sa((()=>St("p",null,"删除信息",-1))),sa((()=>St("img",{class:"delred",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAADKFJREFUeF7tnV2IXVcZhr+1Jz+1Zs6ZxCpKraaoUBG90WpLzTln9kxTI72QoBXshbUIhdALJVYQL1rBC0FFoVJ/igTFigiaq5AaMudnktbW2huLioKNvRDFWpM5J20TJ2cvmTFTUkOZ79s/J3ut88z1+6299vOud85+90wyTviqDQHf6Vw1EtntZWa3F787yaTpxJ/KXHLKbZFnG0tLL9Rms1OyETcl91m72/T79m0/++L5W7zzt4kkLRG/W0TevMlGhyJySkSect4flQtbT84+fuyftbu5iDZEQCZo5pkPz78/SZKOOH+LiHxERF5X/PK+7yU5IUn2WLPX+1Xx9VjhUgIEZALnYdRafHcm2QEnckCcJBVe8pdJ4h/a0estVXiNqVqagFRo98tp+vbVsT8g4g6IyI4KL/Wqpb33jzhxDzWWu49P6pqxXoeAVOTsqJXe752sBeNNFV1Cs+zDF7Ym9+06fnxFI0ZzOQECUsGpGHUWfua9/2QFS5uXdCJPO598Zsfy8WfMwwwIASnxEPx7cbG5ZTVbFpH3lbhs4aW8l5dkxt/R7PWOFF5syhYgICUZfra1+N7MZU+LyNaSlix9mbWXBLOD7ndLXzjiBQlICeYOO50bxCd/LGGp6pdwcl+j3/1G9ReK4woEpKCPFx+rzhRcZqLj3rl9zf7SoxO9aKAXIyAFjRu2F34t4m8quMzEx8eZ7+w80RtM/MKBXZCAFDBs2Jn/nnh3T4El1kedyO+8+EfHzh8V5077/8ycHsvLp587d+7cDXNzu/yq2+VnxrtknNzkXbboxC2KyJai1/XiPtgcLD1VdJ2Y5wlITndHnfSr3suXc45vjB3yY//95snek5Z1Rnv2vDFz2+5wLjso4q63zF6q9V7+nMz4/bO93u/zrhH7HAHJ4fCZ9sKtifhjOUY3Rg5nXr4zt9ztFlhDnt+z5y3bZ7YeFC8Hc6/j/I8a/d5duecjHyQgOQwetdNjXuTWHKOSOfnSXL/7tTyzrzUz7Cx8TLw/JCJzedbNvNw2t9wtEvg8lw1ihoAYbVrppPc6Lw8ax9blY5H9Owfdw3lmN5v5V5peu20sJ0Vk7dfmbV/eHWksL91uG5oONQEx+PxSa+91q271MSfuOsPYurQx6E6E9bA93xNxHev+vPd3Npd7P7XOxa6fiGmxQBy10ge9k3ut95Ml/gNzvd7aT9kn8pUrJF6ebCx3g3tdXTVQAqIk/I+9e19/9fkLfxWRa5Qj6zIn/p7ZQe8Hlpmi2vW3XMnWI07kRstadJHLaREQ5QkatdNPeJGfK+UbssONQXe/caYU+cXibus7Tr7Z6He/UMoGIlmEgCiNHLbTh0Xks0r5uizzslD0Va7lev+vzfGo9Uxj0K3VbyIXuf8yZgmIkuKonT7nRd6mlK/JDjUG3bsN+tKlw056l3hZe/2r/nKZe8/siaU/qAciFxIQhcEr7YUbnfjfKKSvSLxLbm72jz9hmalCaw+2/2Jj0Pt6FXsJcU0ConBtpZU+4Jzcr5BuSJ5tDLrvMOgrk47a6SNe5FP6C/h+Y9Cb1+vjVhIQhb+j1vxPvHN3KqQXJe7HjcHSp/X66pTD1vzd4twPDVf4W2PQfatBH7WUgCjsHbbSJ8TJhxTSdYlLko/P9o7/QquvUjfsdK4Rnzxvucakfqhp2dOV0hIQBflhK31BnOxSSNcl22bknVd1u3/R6qvWDdvp2v/GqP4VlLHLrt/Z76/9zGfqvwiI4ggM26lXyDYkL85evf0N7ujR84aZSqUr7XTth4Yf1V4ky/zi3An+87n1pwEttDXd6U6nM+Odpaxalq+p1m0XkZu1m/MiZ53432r1k9A5ce/yItcarvUnEf93gz4Y6dj5r+zs9/vaDecISNLTLo4OAnUjMHbZPAGpmyvspzYECEhtrGAjdSRAQOroCnuqDQECUhsr2EgdCRCQOrrCnmpDgIDUxgo2UkcCBKSOrrCn2hAgILWxgo3UkQABqaMr7Kk2BAhIbaxgI3UkQEDq6Ap7qg0BAlIbK9hIHQkQkDq6wp5qQ4CA1MYKNlJHAgSkjq6wp9oQICC1sYKN1JEAAamjK+ypNgQqD0ht7pSNQCAngcr+RWHO/TAGgWAJmP5NerB3ycYhkJMAAckJjrHpIEBApsNn7jInAQKSExxj00GAgEyHz9xlTgIEJCc4xqaDAAGZDp+5y5wECEhOcIxNBwECMh0+c5c5CRCQnOAYmw4CBGQ6fOYucxIgIDnBMTYdBAjIdPjMXeYkQEBygmNsOghc0YD870+6lfUXq/j73iEc2WF7vifiOmXs1fqPn/Jck4DkocZMbgIExICOTxADrEikBMRgJAExwIpESkAMRhIQA6xIpATEYCQBMcCKREpADEYSEAOsSKQExGAkATHAikRKQAxGEhADrEikBMRgJAExwIpESkAMRhIQA6xIpATEYCQBMcCKREpADEYSEAOsSKQExGBkKAEJwVRYGg6eQcovKypgERAFJKUkBJaX3goBURgbgql8giiMzCEhIApoBEQBSSkJgSWfIEozN2QhmMoniNFUpZxPEAUoAqKApJSEwJJPEKWZfIIYQSnkBEQBaUPCY4EB1iZSWJbHkk8QI8sQvusREKOpSjkdRAGKgCggKSUhsOQTRGkmHcQISiEnIApIdJB+34BJJeURS4XJLOIRS4EshO96BERhZA4JAVFAIyAKSEpJCCzpIEoz6SBGUAo5AVFAooPQQQzH5DWl/N+8JorV/efVIXzXo4OYDotaTAdRoCIgCkhKSQgs6SBKM+kgRlAKOQFRQKKD0EEMx4QOUgYsETpICH+MiE8Qw2mnWBpgbSKFZXks6SBGliF81yMgRlOVct5iKUAREAUkpSQElnyCKM3kLZYRlEJOQBSQeIvFWyzDMeEtVhmweIsVxp/U5hPEcNoplgZYvMW6jAC/i2U6P/wchJ+DmA6MSsxbLAWmEB4L+DRWGJlDQkAU0AiIApJSEgJLXvMqzeQ1rxGUQk5AFJB4zctrXsMx4TVvGbB4zctr3nLO0atXoYMoqIbwWEBJVxiZQ0JAFNAIiAKSUhICS0q60kxKuhGUQk5AFJAo6ZR0wzGhpJcBi5JOSS/nHFHSzRxDeCygpJttVQ1Q0hWYCIgCklISAktKutJMSroRlEJOQBSQKOmUdMMxoaSXAYuSTkkv5xxR0s0cQ3gsoKSbbVUNUNIVmAiIApJSEgJLSrrSTEq6EZRCTkAUkCjplHTDMaGklwGLkk5JL+ccUdLNHEN4LKCkm21VDVDSFZgIiAKSUhICS0q60kxKuhGUQk5AFJAo6ZR0wzGhpJcBi5JOSS/nHFHSzRxDeCygpJttVQ1Q0hWYCIgCklISAktKutJMSroRlEJOQBSQKOmUdMMxoaSXAYuSTkkv5xxR0s0cQ3gsoKSbbVUNUNIVmAiIApJSEgJLSrrSTEq6EZRCTkAUkCjplHTDMaGklwGLkk5JL+ccUdLNHEN4LKCkm21VDVDSFZgIiAKSUhICS0q60kxKuhGUQk5AFJAo6ZR0wzGhpJcBi5JOSS/nHFHSzRxDeCygpJttVQ1Q0hWYCIgCklISAktKutJMSroRlEJOQBSQKOmUdMMxoaSXAYuSTkkv5xxR0s0cQ3gsoKSbbVUNUNIVmAiIApJSEgJLSrrSTEq6EZRCTkAUkCjplHTDMaGklwGLkk5JL+ccUdLNHEN4LKCkm21VDVDSFZgIiAKSUhICS0q60kxKuhGUQk5AFJAo6ZR0wzGhpJcBi5JOSS/nHFHSzRxDeCygpJttVQ1Q0hWYCIgCklISAktKutJMSroRlEJOQBSQKOmUdMMxoaSXAYuSTkkv5xxR0s0cQ3gsoKSbbVUNUNIVmFZa6QMKmUqSJVl/Z7+aR6wkSzqqTShEzeVuafd86eVC+GZDSVccECTVECAgBq6hPBYYbgnpJgQIiOGIEBADrEikBMRgJAExwIpESkAMRhIQA6xIpATEYCQBMcCKREpADEYSEAOsSKQExGAkATHAikRKQAxGEhADrEikBMRgJAExwIpESkAMRhIQA6xIpATEYCQBMcCKREpADEYSEAOsSKQExGDkSif9nPPyLcMIUgi8QsA7+Xyz3/12lUiu6K+7E5AqrY1/bQISv8fcYQECBKQAPEbjJ0BA4veYOyxAgIAUgMdo/AQISPwec4cFCBCQAvAYjZ8AAYnfY+6wAAECUgAeo/ETICDxe8wdFiBAQArAYzR+AgQkfo+5wwIECEgBeIzGT4CAxO8xd1iAAAEpAI/R+AkQkPg95g4LECAgBeAxGj8BAhK/x9xhAQKTCMh/AUqqApuKPFieAAAAAElFTkSuQmCC",alt:"",style:{width:"15px",height:"15px"}},null,-1))),sa((()=>St("img",{class:"delwhite",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAC3NJREFUeF7tnVvIdukcxv9/EaLILrKdUCRObCelbzIa5ECTTXFgk5qaHJBNyYFRDhSiyDZNhKSYo8mm8NkbmxMTouwOpEg2IY7+npvn5TWameta617re+/7/a16+06u+15r/a77+p77et71PG8Gx5khUFV3iYiHnfq5R0T84vjz88z8/Zm52HNyIXlO7vPM3WZV3TkinhoRV0XE046huP/tXOifj2H5bkR8NiK+npm/PXM3N9EFEZAdzayqx0fEhWMwnhkRd+1w+osR8bWI+EZmfr7DfExxigAB2WE5VNWjI+La488dNjzlZyLivZn5xQ3Pca6mJiAb2l1VDz0VjLtveKpbTv3xY1C+ueM5pzwVAdnI1qp60zEc99voFMq0H4qI12XmnxQxmv8nQEA2WBVV9cmIeOEGUy+Z8vsR8bLMvHnJ4PM+hoB0XAFV1d6W/WpEPK7jtD2m+ltEvCAzb+wx2Xmag4B0cruqHhsR7X/rO3Wacotprs3M920x8axzEpAOzh62VI86bKl+3GGqPaZoneTte5xohnMQkJUuHrdVf1w5zd7Dn5WZn9v7pCOej4CsdK2qvhURT1k5zaUYfiEzv3IpTjzSOQnICreq6v0Rcc2KKU6G/uAQsvY/ent85A+nfv4eEfc69dOCeOXx544dzvukzGyPrXDcCgECsnBpVNVbIuKNC4efDLs+Ij6QmTc581TVfdu7UhHxmoi4zBl7C+1PI+LqzPzhijmmHkpAFthbVc+IiC8sGHoy5IaIeE9mfmnFHFFVDziGpAVl6fGRzHzp0sGzjyMgCxyuqhaOFpIlxxsy861LBt7amKp6bkS0V6N7Lpz3qsxcE/iFpz37wwiI6VFVvTIi3m0OO5G37Ux79eh+VNUD2+Pvx8fm3flvzMznuIPOg56AGC5X1YPbY+UR0f61jszchXVVffn4SL11fRHx4sz8hDtodv0ups0CsaraK0d7BXGPJ2Rm+y37LsfCkNx0+N3IiG9Xb8qUgIh4q+puEfHLQ7m+jzjkRHZNZn7QHLNKfnyXqz139URzIrrILYAREHEFVdXzI+JTovxEdkNmXm2O6SI/Fne377wjM1/b5QImmYSAiEYeSnD7bMUrRPmJ7Olr38o1z/c/8gVbrZsz86w9ibwGweqxBEREWFW/ioiHiPImuz4zX27ou0urqv1+o7396xyPycwfOQNm1hIQwd2qanv57wjS05LLM/Pb5pju8gXBfn1mvq37hQw6IQERjKuq6yKifYRWPdp3WD1cFW+pq6r2+fQXGee4eHiI8QpDP7WUgAj2VtXH2u8JBOmJ5KOZ+RJDv5m0qto278PGCX6dmQ8y9FNLCYhgb1W1rdKTBemJ5HmZ+WlDv5m0qtrb0r9zTrDXLzWda7pUWgIikK+q9pWf7bFz9XhEZv5MFW+tq6r29aXtK03V47LDA4ztdz7n/iAgwhI4fIVPCbITyV8Pz2rdOzP/YYzZVHp4k6H90vDZxkmu5Mvn/k3LCkhVta/NdMqq4cmZlbbv0L3cuLq/RMT3DP0e0kdGRHuYUT1+cvgg2G9U8WC6N2dm+7pW6VgSkPYwHAcERiVwBQEZ1Tquew8CBGQPypxjWAIEZFjruPA9CBCQPShzjmEJEJBhrePC9yBAQPagzDmGJUBAhrWOC9+DAAHZgzLnGJYAARnWOi58DwIEZA/KnGNYAgRkWOu48D0IEJA9KHOOYQkQkGGt48L3IEBA9qDMOYYlQECGtY4L34MAAdmDMucYlgABGdY6LnwPApsHZI+b4BwQ2IzAZp8o3OyKmRgCZ5SA9Zn0M3oPXBYENiNAQDZDy8QzECAgM7jIPWxGgIBshpaJZyBAQGZwkXvYjAAB2QwtE89AgIDM4CL3sBkBArIZWiaegQABmcFF7mEzAgRkM7RMPAMBAjKDi9zDZgQIyGZomXgGAgRkBhe5h80IEJDN0DLxDAQuaUCOf9Kt11+s4u97D7Aiq6r53f6UX4/D+vDTkhMSkCXUGLOYAAEx0PEKYsCaREpADCMJiAFrEikBMYwkIAasSaQExDCSgBiwJpESEMNIAmLAmkRKQAwjCYgBaxIpATGMJCAGrEmkBMQwkoAYsCaREhDDSAJiwJpESkAMIwmIAWsSKQExjCQgBqxJpATEMHKUgIxgKiyNhWdIeVhRgEVABEiiZASWp2+FgAjGjmAqryCCkQskBESARkAESKJkBJa8gohmnshGMJVXENNUUc4riACKgAiQRMkILHkFEc3kFcQEJcgJiADp1MJrn00+859JH8FUtljGwjOkbLEEWAREgCRKRmDJFks0ky2WCUqQExABElusvGhgkqRssSRMtogtloBshP/1CIhg5AIJARGgERABkigZgSUdRDSTDmKCEuQERIBEB6GDGMvktqR89agBcrPv5h3hfz06iLFSDCkdRIBFQARIomQElnQQ0Uw6iAlKkBMQARIdhA5iLBM6SCdYdBCea+u0lP47DR1EQDrCtoCSLhi5QEJABGgERIAkSkZgSUkXzaSkm6AEOQERIFHSKenGMqGkd4JFSaekd1pKlHQL5AjbAkq6ZakspqQLqAiIAEmUjMCSki6aSUk3QQlyAiJAoqRT0o1lQknvBIuSTknvtJQo6RbIEbYFlHTLUllMSRdQERABkigZgSUlXTSTkm6CEuQERIBESaekG8uEkt4JFiWdkt5pKVHSLZAjbAso6ZalspiSLqAiIAIkUTICS0q6aCYl3QQlyAmIAImSTkk3lgklvRMsSjolvdNSoqRbIEfYFlDSLUtlMSVdQEVABEiiZASWlHTRTEq6CUqQExABEiWdkm4sE0p6J1iUdEp6p6VESbdAjrAtoKRblspiSrqAioAIkETJCCwp6aKZlHQTlCAnIAIkSjol3VgmlPROsCjplPROS4mSboEcYVtASbcslcWUdAEVAREgiZIRWFLSRTMp6SYoQU5ABEiUdEq6sUwo6Z1gUdIp6Z2WEiXdAjnCtoCSblkqiynpAioCIkASJSOwpKSLZlLSTVCCnIAIkCjplHRjmVDSO8GipFPSOy0lSroFcoRtASXdslQWU9IFVAREgCRKRmBJSRfNpKSboAQ5AREgUdIp6cYyoaR3gkVJp6R3WkqUdAvkCNsCSrplqSympAuoCIgASZSMwJKSLppJSTdBCXICIkCipFPSjWVCSe8Ei5JOSe+0lCjpFsgRtgWUdMtSWUxJF1AREAGSKBmBJSVdNJOSboIS5AREgERJp6Qby4SS3gkWJZ2S3mkpUdItkCNsCyjplqWymJIuoCIgAiRRMgJLSrpoJiXdBCXICYgAiZJOSTeWCSW9EyxKOiW901KipFsgR9gWUNItS2UxJV1ARUAESKJkBJaUdNFMSroJSpATEAESJZ2SbiwTSnonWJR0SnqnpURJt0COsC2gpFuWymJKuoCKgAiQRMkILCnpopmUdBOUICcgAiRKOiXdWCaU9E6wKOmU9E5LiZJugayq66wBty1uQb7Ycb5/TXUs6Rd6zZuZPe/5P5fFFstwaJR3XoxbQno7BAiIsUQIiAFrEikBMYwkIAasSaQExDCSgBiwJpESEMNIAmLAmkRKQAwjCYgBaxIpATGMJCAGrEmkBMQwkoAYsCaREhDDSAJiwJpESkAMIwmIAWsSKQExjCQgBqxJpATEMJKAGLAmkRIQw0gCYsCaREpADCOr6lUR8U5jCFIInCbw6sx815ZILvVHbgnIlu7OPzcBmd9j7nAFAQKyAh5D5ydAQOb3mDtcQYCArIDH0PkJEJD5PeYOVxAgICvgMXR+AgRkfo+5wxUECMgKeAydnwABmd9j7nAFAQKyAh5D5ydAQOb3mDtcQYCArIDH0PkJEJD5PeYOVxAgICvgMXR+AgRkfo+5wxUECMgKeAydnwABmd9j7nAFgc0D8k+Rbd1QQCKVBgAAAABJRU5ErkJggg==",alt:"",style:{width:"15px",height:"15px"}},null,-1)))],ha={key:3,style:{padding:"0 12px"},class:"messageBox"},ua={class:"message"},ca={style:{"line-height":"15px"}},da=[sa((()=>St("p",{style:{"line-height":"15px"}},"标记为已读",-1))),sa((()=>St("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHsSURBVHgBrZO/axRBFMe/by6nuYDJbjTFqcVGsBJEUFCxyKWwErXQwkpNFcv7Ey6tjRew8A5BcggeClZqJVwKQQvFJJAmIbkNhARy2ZvtLiG5mbzZzV02y3KkyBd2fu17n3nz3gxwCqL4Qr0urcFBvCRBj3nqHC67qq1n9vYwm83abk9IoyFzIkUfIs5xGdjEyIg9mwjZ2pI3Un30HycQg8ajoACyuSmdM2ep1iOCuHxBetS2bd9M+kyTTiPXATQl8PsvJXrevaUxbAdDa18hz32hC+E8vNA6NFzfIPz4mQy5fBEMCQ1TRGPHjuM1/ToiR/HkEWQgo5HpT2S654et0W4kUS0sEkqVI8j1a8Dkc41eCqybTb/GZjkzbrWA5VVCayc0uJTVwTGimueNvn6Dvy1FsVo+NxVAGp7MC6I3OIFM4oslwtOHQOUzYVelnfA4CnNIJTvVfhH+/AMe3OeIsgYg8OSR5jxy1LvarZYza53qJEbh8a7fuVImJ6UZwUkGbt/UuGBplCvkQqjxwN80Wulp7tw4ZKA//JZWgPykwh2+J+aulCrsptRE9V34jrplkFI67TYnN3x4Fh2WvLENvH5LVu4erKtXgI9fCJ6vp6rloULHN/lWxfTslXSwLwpsPUYa05/eDxWj/w8Akmmli4EOI1gAAAAASUVORK5CYII=",alt:""},null,-1)))],pa=Lt('<div class="warning" data-v-3923fd91><div class="imgBox" data-v-3923fd91><img style="width:32px;height:32px;" src="'+ei+'" alt="" data-v-3923fd91></div><span class="title" style="font-weight:bold;" data-v-3923fd91>midjourney</span><span class="intro" style="font-weight:bold;" data-v-3923fd91> 为了保证每个用户分组的隐私, 左侧频道区域我们设置了无法选择, 您进入这个系统, 我们已经为您创建了一个私密的频道，已经将midjourney的机器人加入，您可以直接在最下方的对话框输入&quot;/&quot;，呼出midjourney机器人然后开始出图，具体看下图 </span><div class="referToImg" data-v-3923fd91><img src="/static/png/image24-893100f5.png" alt="" data-v-3923fd91></div><div class="intro1" data-v-3923fd91><div data-v-3923fd91><span style="color:#ff0;" data-v-3923fd91>如果是新手，请参考</span><span style="color:#00A8EF;margin-left:2px;" data-v-3923fd91>教程</span><p style="color:#ff0;" data-v-3923fd91>申明：本系统一切数据来源于我司正版付费购买的midjourney账号</p><p style="color:#ff0;" data-v-3923fd91>支持midjourney最新的局部重画，智能扩展等功能</p><p style="color:#ff0;" data-v-3923fd91>本系统不需要魔法，直接国内环境使用可能速度更快</p><span style="color:#B1B3B9;" data-v-3923fd91>开始于</span><span style="color:#FFF;margin-left:4px;" data-v-3923fd91>mj</span></div></div></div>',1),fa={class:"drawBox"},ga={key:0,style:{width:"100%",padding:"0 20px",position:"relative"}},va=[sa((()=>St("div",{style:{width:"100%",height:"1px","background-color":"red"}},null,-1))),sa((()=>St("div",{style:{"line-height":"15px","font-size":"12px",color:"#fff",padding:"0 2px","background-color":"red",position:"absolute",right:"0",top:"-7px","z-index":"1"}}," 新的",-1))),sa((()=>St("div",{style:{width:"9px",height:"9px","background-color":"red",transform:"rotate(45deg)",position:"absolute",right:"24px",top:"-4px"}},null,-1)))],ma={class:"sendBox",style:{position:"absolute"}},_a={class:"textTipBox",style:{"margin-top":"10px"}},ya={style:{color:"#fff","margin-right":"4px"}},xa={style:{display:"flex",width:"100%","background-color":"#38393E"}},wa={class:"sendInput"},Aa={key:0,class:"addPoput"},ba=[sa((()=>St("img",{src:"/static/svg/uploadFile-4cd8da7a.svg",alt:""},null,-1))),sa((()=>St("p",{style:{"font-size":"14px",color:"#B5BAC1"}},"上传文件",-1)))],Ca=[sa((()=>St("img",{src:"/static/svg/usedApp-a94f1c87.svg",alt:""},null,-1))),sa((()=>St("p",{style:{"font-size":"14px",color:"#B5BAC1"}},"使用APP",-1)))],ka={class:"inputBox"},Sa={class:"imgBox"},Ia=["src"],Ea={style:{display:"flex",width:"100%"}},Ta={key:0,style:{position:"absolute",left:"115px","z-index":"14",color:"#B1B3B9",top:"15px"}},Pa={key:1,style:{display:"flex"}},Oa={class:"param"},Ma={key:0,style:{cursor:"pointer","background-color":"#38393E",color:"#EDEEF0"}},Ba=["rows","onBlur"],Ra={key:2,style:{flex:"1",position:"relative"}},Na={key:0,style:{position:"absolute",left:"10px","z-index":"14",color:"#B1B3B9",top:"2px"}},La=zt(N({__name:"drawContent",emits:["canNotSend"],setup(t,{emit:e}){const i=Qt(),n=qt(),s=At(),r=U(!1),a=U(),o=U(!1),l=U(0),h=U(0),u=U([]);ht((()=>{g({page:1,size:10}).then((t=>{a.value=t.data.rows.reverse(),setTimeout((()=>function(){let t=Mt.value;t&&(t.scrollTop=3e5)}()),100),wt=a.value.filter((t=>[1,2].includes(t.status))).map((t=>t.jobId)),wt.length&&Tt()}))}));const c=U(),d=U(!1);Z(c,(t=>{""==t&&(z.value=""),""!=t&&"/"==t[0]?d.value=!0:d.value=!1,t!=P.value&&(ut.value=!1,st.value=!1)}));const p=U(),f=U(0);function b(t){if(p.value="",38==t.keyCode){if(!c.value)return;t.preventDefault(),p.value="up"+f.value,f.value++}if(40==t.keyCode){if(!c.value)return;t.preventDefault(),p.value="down"+f.value,f.value++}if(13==t.keyCode){if(!c.value||-1==c.value.indexOf("/"))return void(0!=u.value.length&&async function(){let t=[];u.value.forEach((e=>{t.push(e.data)})),await(e=u.value[0].data,new Promise((t=>{const i=new Image;i.src=e,i.complete?t({width:i.width,height:i.height}):i.onload=()=>{t({width:i.width,height:i.height})}}))).then((e=>{let i={imageUrl:t.join("&"),fileInfo:JSON.stringify(e),prompt:c.value};w(i).then((t=>{c.value="",a.value.push(t.data),setTimeout((()=>Rt()),100),u.value=[]}))}));var e}());t.preventDefault(),p.value="enter"+f.value,f.value++}}function C(t){8==t.keyCode&&c.value!=P.value&&(R.value=[],N.value="")}function k(){if(!c.value)return;o.value=!1,-1!=c.value.indexOf("/")&&(d.value=!0);let t=R.value.filter((t=>0==t.isShow));c.value==P.value&&null!=c.value&&t.length==B.value.param.length&&(ut.value=!0,r.value=!0)}function S(){}const I=U(null);function E(){c.value="/",o.value=!1,I.value&&I.value.focus()}function T(){"/"==c.value&&(o.value=!1)}const P=U(),O=U(""),M=U(null),B=U(),R=U([]),N=U(),L=U(""),D=U(!1),V=U([]),z=U(),j=U(),F=U();function Q(t){if(t){if(F.value=t.version,j.value=t.type,M.value=null,V.value=[],0==t.param.length)return c.value=t.title,P.value=t.title,B.value=t,at.value=B.value.title,ot.value=B.value.intro,st.value=!0,void(d.value=!1);B.value=t,c.value=t.title,P.value=t.title,l.value=t.length,z.value=t.logo,nt(c.value,1),t.param.forEach((e=>{t.param.length>2?(t.param[0].isShow=!0,t.param[1].isShow=!0,-1!=e.name.indexOf("image")&&(V.value=[t.param[0],t.param[1]])):(-1!=e.name.indexOf("image")&&V.value.push(e),e.isShow=!0),ct.value=t.param.filter((t=>0==t.isShow)),R.value=t.param,N.value=t.param})),setTimeout((()=>{null!=M.value&&M.value[0].focus(),d.value=!1,st.value=!0,-1!=R.value[0].name.indexOf("image")&&(at.value=B.value.title,ot.value=B.value.intro)}),100)}}function q(){nt(L.value,2)}const H=U(0);function G(t){if(""==L.value&&8==t.keyCode){t.preventDefault(),R.value[H.value].isShow=!1,ut.value=!0,I.value.focus();let e=R.value.filter((t=>0==t.isShow));ct.value=e,1==e.length&&(h.value=1),e.length==R.value.length&&(l.value=0,N.value="")}13==t.keyCode&&(t.preventDefault(),$.value=!1,xt())}const J=U([]);function W(t){J.value.push(t)}function X(t){if(""==O.value){if(8==t.keyCode){t.preventDefault();let e=R.value.filter((t=>1==t.isShow)),i=e.length;R.value[i-1].isShow=!1;let n=R.value.filter((t=>0==t.isShow));V.value=V.value.slice(0,V.value.length-1),n.length>=1&&(D.value=!1),1==n.length&&(h.value=1),ct.value=n,1==e.length&&R.value.forEach((t=>{t.isShow=!1,N.value="",I.value.focus(),l.value=0,ct.value=R.value})),n.length==R.value.length&&(N.value="",I.value.focus()),ut.value=!0}13==t.keyCode&&xt()}}function K(){const t=new Date;return"今天 "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}function Y(){R.value=[],N.value="",c.value="",L.value=""}const $=U(!0);const tt=U(),et=U(1);function nt(t,e){if(1==e)tt.value=9*t.length;else if(2==e){if(""==t)return void(et.value=1);et.value=1*t.length}}const st=U(!1),at=U(),ot=U(),ut=U(!1),ct=U();function dt(t){R.value.forEach((e=>{if(-1!=t.name.indexOf("image")?D.value=!0:D.value=!1,e.name==t.name){e.isShow=!0,e.isBlur=!1,N.value="1";let i=R.value.filter((t=>0==t.isShow)),n=R.value.filter((t=>1==t.isShow));h.value=n.length,l.value=n.length,ct.value=i,-1!=t.name.indexOf("image")&&V.value.push(t)}}))}function pt(){o.value=!1,"/"==c.value&&(d.value=!0);let t=R.value.filter((t=>0==t.isShow));c.value==P.value&&null!=c.value&&t.length==B.value.param.length&&(ut.value=!0,r.value=!0)}const ft=U(!1),gt=U(),vt=U(),mt=U(!1),_t=async function(t){vt.value=!1,mt.value=!0;try{let e=null;if("TEXT_TO_IMAGE"==t.type)e=await m(t.parameter).catch((t=>{s.error(t.message),vt.value=!0,mt.value=!1;let e=a.value.length-1;a.value[e].fail=t.message}));else if("IMAGE_TO_TEXT"==t.type||"IMAGE_MIX_IMAGE"==t.type)e=await _(t.parameter).catch((t=>{s.error(t.message),vt.value=!0,mt.value=!1;let e=a.value.length-1;a.value[e].fail=t.message}));else if("addTaskDTO"==t.type){let i;localStorage.getItem("relaxValue")&&(i=Number(localStorage.getItem("relaxValue")));let n=K(),{extraParam:r,prompt:o,botType:l,id:h}=t.parent,u={botType:l,mode:i,extraParam:r,prompt:o,originPrompt:L.value,createdAt:n,status:0,action:t.parameter.params.action};9==t.parameter.params.action?a.value.forEach(((t,e)=>{t.id==h&&(a.value[e]=u)})):a.value.push(u),setTimeout((()=>Rt()),100),e=await m(t.parameter).catch((t=>{s.error(t.message),vt.value=!0,mt.value=!1;let e=a.value.length-1;a.value[e].fail=t.message}))}else"INSIGHT_FACE"==t.type&&(e=await y(t.parameter).catch((t=>{s.error(t.message),vt.value=!0,mt.value=!1;let e=a.value.length-1;a.value[e].fail=t.message})));if(e){const t=e.data;ft.value=!0,gt.value=e.data.createdAt,vt.value=!0;if(!a.value.find((e=>e.id===t.id))){let e=a.value.length-1;a.value[e]=t}t.status<3&&!wt.includes(t.jobId)&&(wt.push(t.jobId),Tt())}}catch(e){s.error(e.message),vt.value=!0,mt.value=!1;let t=a.value.length-1;a.value[t].fail=e.message}},yt=e;function xt(){var t;let e,i,n;a.value.push(),"mj"==F.value?localStorage.getItem("extendStr")&&(e=localStorage.getItem("extendStr")):"nj"==F.value&&localStorage.getItem("nj_extendStr")&&(e=localStorage.getItem("nj_extendStr")),localStorage.getItem("isTranslateValue")&&(i=Number(localStorage.getItem("isTranslateValue"))),localStorage.getItem("relaxValue")&&(n=Number(localStorage.getItem("relaxValue")));let r,o=0;if("TEXT_TO_IMAGE"==j.value){if(!L.value)return s.error("此为必选项，请指定一个值"),void yt("canNotSend");r={params:{action:oi.TEXT_TO_IMAGE,extend:e,prompt:L.value,translate:i,mode:n,botType:-1!=(null==e?void 0:e.indexOf("--v"))?"MID_JOURNEY":"NIJI_JOURNEY"},type:li.TEXT_TO_IMAGE}}else if("IMAGE_TO_TEXT"==j.value)r={action:oi.IMAGE_TO_TEXT,base64Array:J.value,files:"",mode:n,type:li.IMAGE_TO_TEXT,botType:-1!=(null==e?void 0:e.indexOf("--v"))?"MID_JOURNEY":"NIJI_JOURNEY"};else if("IMAGE_MIX_IMAGE"==j.value)r={action:oi.IMAGE_MIX_IMAGE,base64Array:J.value,files:"",mode:n,type:li.IMAGE_MIX_IMAGE,botType:-1!=(null==e?void 0:e.indexOf("--v"))?"MID_JOURNEY":"NIJI_JOURNEY"};else if(j.value="INSIGHT_FACE"){let t={base64:J.value,parampt:L.value};localStorage.setItem("changeFace",JSON.stringify(t)),r={action:22,base64Array:J.value,files:"",prompt:L.value,mode:n,type:li.INSIGHT_FACE,botType:"INSIGHT_FACE",id:"INSIGHT_FACE"+o},o++}if("INSIGHT_FACE"==j.value){let t=K(),i={action:22,mode:n,extraParam:e,prompt:e,originPrompt:L.value,createdAt:t,botType:"INSIGHT_FACE",status:null};a.value.push(i),setTimeout((()=>Rt()),100),Y()}else{let i,s={type:j.value,parameter:r},o=K();i="TEXT_TO_IMAGE"==j.value?null==(t=null==r?void 0:r.params)?void 0:t.botType:null==r?void 0:r.botType;let l={action:"IMAGE_TO_TEXT"==j.value?oi.IMAGE_TO_TEXT:"IMAGE_MIX_IMAGE"==j.value?oi.IMAGE_MIX_IMAGE:"TEXT_TO_IMAGE"==j.value?oi.TEXT_TO_IMAGE:"",mode:n,extraParam:e,prompt:e,originPrompt:L.value,createdAt:o,status:0,version:B.value.version,title:B.value.title,botType:i};a.value.push(l),setTimeout((()=>Rt()),100),_t(s),Y()}}let wt=[],kt=null;const Tt=async function(){try{kt&&window.clearTimeout(kt);(await v({jobIds:wt.join()})).data.forEach((t=>{const e=a.value.findIndex((e=>e.id===t.id));-1!==e&&a.value.splice(e,1,t),t.status>=3&&(wt=wt.filter((e=>e!==t.jobId)),mt.value=!1,setTimeout((()=>Rt()),100))})),wt.length?kt=setTimeout((()=>Tt()),3e3):kt&&window.clearTimeout(kt)}catch(t){kt=setTimeout((()=>Tt()),3e3)}},Mt=U(null);function Rt(){let t=Mt.value;t&&t.scrollTo({top:t.scrollHeight+t.clientHeight,behavior:"smooth"})}const Lt=U(null),Dt=U(!1),Vt=U(),zt=U(),Ut=U();function Ft(t){const{event:e,task:i}=t;let s=n.width.value,r=n.height.value;Dt.value=!0,Vt.value=e.clientX,zt.value=e.clientY,e.clientX+180>s&&(Vt.value=Vt.value-180),e.clientY+93>r&&(zt.value=zt.value-93),Ut.value=i}function Ht(){let t={id:Ut.value.id};x(t).then((t=>{200==t.code&&(s.success(t.data),a.value=a.value.filter((t=>t.id!==Ut.value.id)))}))}function Gt(){let{prompt:t}=Ut.value;t?(Hi({text:t}),s.success("复制成功")):s.error("复制失败")}function Jt(){!async function(t=1){let e;if(1===t){if(e=await Wt(),!e)return void s.error("选择文件错误")}else e=t;const n=new FormData;n.append("file",e),await jt.post(Zt.value,n,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{if(e.data){let{data:t}=e.data;o.value=!1;let i={imgName:t.split("/ai/")[1],data:t};u.value.push(i)}1!==t&&i.updateRecordDialog(!1)}))}(1)}const{selectFile:Wt}=Ar(),Zt=U("/api/file/upload");function Xt(t){u.value=u.value.filter((e=>e!=t))}function Kt(t){a.value=a.value.filter((e=>e.id!=t.id))}async function Yt(){let t,e,i;if(await A({taskId:Ut.value.id}).then((e=>{t=e.data})),localStorage.getItem("changeFace")){let t=localStorage.getItem("changeFace");e=JSON.parse(t).base64[0]}localStorage.getItem("relaxValue")&&(i=Number(localStorage.getItem("relaxValue")));let n={type:"INSIGHT_FACE",parameter:{params:{action:22,mode:i,sourceBase64:e,targetBase64:t},type:li.INSIGHT_FACE}},s={action:22,mode:i,createdAt:K(),botType:"INSIGHT_FACE",status:0};a.value.push(s),setTimeout((()=>Rt()),100),_t(n)}return(t,e)=>(bt(),It("div",{class:"mainBox",ref_key:"mainBox",ref:Lt,onClick:e[7]||(e[7]=t=>Dt.value=!1)},[Dt.value?(bt(),It("div",{key:0,class:"menu",style:lt({left:Vt.value+"px",top:zt.value+"px"})},[St("div",{class:"menyItem",onClick:Gt},ra),St("div",{class:"menyItem",onClick:E},aa),St("div",{class:"menyItem",onClick:Yt},oa),St("div",{class:"menyItem del",onClick:Ht},la)],4)):Pt("",!0),o.value||d.value?(bt(),It("div",{key:1,class:"mask",onClick:e[0]||(e[0]=t=>{o.value=!1,d.value=!1})})):Pt("",!0),ut.value&&r.value?(bt(),It("div",{key:2,class:"mask1",onClick:e[1]||(e[1]=t=>{ut.value=!1})})):Pt("",!0),mt.value?(bt(),It("div",ha,[St("div",ua,[St("div",ca,"自从"+Nt(gt.value)+"以来有一条新消息",1),St("div",{class:"messageLeft",onClick:e[2]||(e[2]=t=>mt.value=!1)},da)])])):Pt("",!0),St("div",{class:"contentBox",ref_key:"toTop",ref:Mt},[pa,St("div",fa,[(bt(!0),It(rt,null,Ot(a.value,((t,e)=>(bt(),It("div",{class:"darwItem",style:lt([{"margin-top":"10px"},22==t.action&&null==t.status?"background:#333541":22==t.action&&null!=t.status?"background:#444037":""]),key:t.id},[e==a.value.length-1&&mt.value?(bt(),It("div",ga,va)):Pt("",!0),Et(Qs,{isSuccess:vt.value,onAddTask:_t,task:t,onHandleClickRight:Ft,onDelete:Kt},null,8,["isSuccess","task"])],4)))),128))])],512),St("div",ma,[St("div",{style:lt([{width:"100%","border-radius":"12px","z-index":"11",padding:"0 12px",position:"relative"},st.value?"bottom: 0;left: 0;display:block":"bottom: 5000px;left: -1000px;display:none"])},[Et(zr,{onHandleNeedPromptFn:dt,needPromptArr:ct.value},null,8,["needPromptArr"]),St("div",_a,[St("p",ya,Nt(at.value),1),St("p",{style:lt(ot.value?"color: #B1B3B9;":"color: #FF453A;")},Nt(ot.value?ot.value:"此为必选项。请指定一个值"),5)]),St("div",xa,[(bt(!0),It(rt,null,Ot(V.value,(t=>(bt(),It("div",null,[Et(Nr,{onBase64Array:W,item:t,promptMessageText1:ot.value,promptMessageText:at.value},null,8,["item","promptMessageText1","promptMessageText"])])))),256))])],4),St("div",{style:lt([{position:"absolute",width:"100%","border-radius":"12px","z-index":"30"},d.value?"bottom: 55px;left: 0;":"bottom: 5000px;left: -1000;"])},[c.value?(bt(),Ct(wr,{key:0,selectType:p.value,promptValue:c.value,onHandle_Item:Q},null,8,["selectType","promptValue"])):Pt("",!0)],4),St("div",wa,[St("div",{style:lt([{display:"flex",position:"absolute",width:"100%","border-radius":"8px 8px 0 0",padding:"12px","background-color":"#2B2D31"},0==u.value.length?"bottom: 5000px;left: 5000;":"bottom: 49px;left: 0;"])},[(bt(!0),It(rt,null,Ot(u.value,((t,e)=>(bt(),Ct(na,{onDeleteFn:Xt,uploadItem:t,key:e},null,8,["uploadItem"])))),128))],4),o.value?(bt(),It("div",Aa,[St("div",{class:"popup",onClick:Jt},ba),St("div",{class:"popup",onClick:E},Ca)])):Pt("",!0),St("div",ka,[St("div",Sa,[z.value?(bt(),It("img",{key:1,style:{width:"18px",height:"18px"},src:z.value,alt:""},null,8,Ia)):(bt(),It("img",{key:0,src:"/static/svg/sendAdd-6e34162b.svg",alt:"",onClick:e[3]||(e[3]=t=>o.value=!0)}))]),St("div",Ea,[it(St("input",{class:"input1",ref_key:"inputRef",ref:I,onFocus:k,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t),type:"text",placeholder:"给 “ midjourney ” 发消息",onBlur:S,onKeydown:b,onInput:T,onKeyup:C,style:lt([N.value?{width:tt.value+"px"}:"width:100%",P.value==c.value?"font-weight: bold;color: #fff;":""])},null,36),[[Bt,c.value]]),0==l.value&&P.value==c.value&&null!=c.value&&1!=B.value.param.length&&0!=B.value.param.length?(bt(),It("div",Ta,"+2 选项")):Pt("",!0),N.value?(bt(),It("div",Pa,[(bt(!0),It(rt,null,Ot(R.value,((t,i)=>(bt(),It("div",null,[t.isShow?(bt(),It("div",{key:0,class:"paramBxo",style:lt([{display:"flex"},t.isBlur?"border:1px solid #FF4345":"border: 1px solid #007FE4;"])},[St("div",Oa,Nt(t.name),1),-1!=t.name.indexOf("image")?(bt(),It("div",Ma,"请添加文件")):it((bt(),It("textarea",{key:1,ref_for:!0,ref_key:"paramptRef",ref:M,rows:et.value>121?2:1,style:lt([{"background-color":"transparent","text-indent":"4px",position:"relative","z-index":"14","max-width":"1000px",resize:"none",color:"#DBDEE1","font-size":"15px"},R.value?{width:1.5*et.value+"rem"}:"width:20px"]),onInput:q,"onUpdate:modelValue":e[5]||(e[5]=t=>L.value=t),type:"text",onKeydown:G,onBlur:t=>function(t){$.value&&(L.value?R.value[t].isBlur=!1:R.value[t].isBlur=!0,at.value=B.value.title,ot.value=B.value.intro)}(i)},null,44,Ba)),[[Bt,L.value]])],4)):Pt("",!0)])))),256))])):Pt("",!0),N.value?(bt(),It("div",Ra,[it(St("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>O.value=t),onKeydown:X,onFocus:pt,style:{width:"100%","text-indent":"2px","background-color":"transparent",color:"#B2B8B5",position:"relative","z-index":"15"}},null,544),[[Bt,O.value]]),2==B.value.param.length&&1==h.value?(bt(),It("div",Na,"增加 1")):Pt("",!0)])):Pt("",!0)])])])])],512))}}),[["__scopeId","data-v-3923fd91"]]),Da=Lt('<div class="left" data-v-bffa8613><div class="siderBar" data-v-bffa8613><img src="'+n+'" alt="" style="position:absolute;left:0;top:82px;height:40px;width:5px;" data-v-bffa8613><div class="imgBox" data-v-bffa8613><img style="width:20px;height:20px;" src="'+i+'" alt="" data-v-bffa8613></div><div class="line" data-v-bffa8613></div><div class="TitleBox" data-v-bffa8613><p style="margin-top:2px;" data-v-bffa8613>M</p></div><div class="imgBox" data-v-bffa8613><img style="width:20px;height:20px;" src="'+s+'" alt="" data-v-bffa8613></div><div class="imgBox" data-v-bffa8613><img style="width:20px;height:20px;" src="'+r+'" alt="" data-v-bffa8613></div><div class="line" data-v-bffa8613></div><div class="imgBox" data-v-bffa8613><img style="width:20px;height:20px;" src="'+a+'" alt="" data-v-bffa8613></div></div><div class="mjList" data-v-bffa8613><div class="top" data-v-bffa8613><p style="font-size:16px;font-weight:bold;" data-v-bffa8613>MJ</p><img src="'+b+'" alt="" data-v-bffa8613></div><div class="line" data-v-bffa8613></div><div class="bottom" data-v-bffa8613><div class="line1" data-v-bffa8613></div><span style="font-size:16px;color:#5E6065;" data-v-bffa8613># </span><span style="font-size:16px;color:#FFFFFF;" data-v-bffa8613>常规</span><div class="userInfo" data-v-bffa8613><div class="avatar" data-v-bffa8613><div class="imgBox" data-v-bffa8613><img src="'+i+'" alt="" data-v-bffa8613><img src="'+o+'" style="position:absolute;right:0;bottom:-2px;" alt="" data-v-bffa8613></div><div style="margin-left:8px;" data-v-bffa8613><p style="font-size:14px;font-weight:bold;color:#edeef0;line-height:15px;" data-v-bffa8613>mj</p><p style="font-size:12px;color:#B1B3B9;line-height:15px;" data-v-bffa8613>在线</p></div></div><div class="imgList" data-v-bffa8613><img src="'+l+'" alt="" data-v-bffa8613><img src="'+h+'" alt="" data-v-bffa8613><img src="'+u+'" alt="" data-v-bffa8613></div></div></div><div class="warning" data-v-bffa8613><p data-v-bffa8613>为了保证每个人账号的私密性,避免你的频道被他人误删,我们左侧频道板块是设置成无法点击的，你进入的界面系统已经自动为你产生了你的私密频道,你可以直接在右下角对话框输入命令生成图片</p><div style="width:20px;height:20px;background-color:#00732C;position:absolute;bottom:-5px;left:calc(50% - 10px);transform:rotate(45deg);" data-v-bffa8613></div></div></div></div>',1),Va={class:"right"},za=Lt('<div class="top" data-v-bffa8613><div style="display:flex;align-items:center;" data-v-bffa8613><p style="margin-right:12px;font-size:19px;color:#B1B3B9;" data-v-bffa8613># 常规 </p><img style="width:12px;height:12px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABJSURBVHgBxY5bDgARDEVvJ7OxWchQCbbFSlHfQkiE89neF3AcZbwe/Z/mktP3swtYamEbt5nenoFAWfYRZtCSXBv2iyuym3GVAgR5Fx0lFvRnAAAAAElFTkSuQmCC" alt="" data-v-bffa8613><img src="'+ei+'" alt="" style="margin-right:4px;margin-left:12px;width:24px;height:24px;" data-v-bffa8613><p style="font-size:16px;color:#fff;font-weight:bold;" data-v-bffa8613>midjourney</p></div></div><div class="line" data-v-bffa8613></div>',2),Ua={class:"drawContent"},ja=zt(N({__name:"index",setup(t){const e=Ht(),i=O((()=>e.isLogin)),n=U(!0);function s(){n.value=!1,setTimeout((()=>n.value=!0),800)}return ht((()=>{i.value||Gt.push("/401")})),(t,e)=>(bt(),It("div",{class:Mt(["mainBox",n.value?"":"shake"])},[Da,St("div",Va,[za,St("div",Ua,[Et(La,{onCanNotSend:s})])])],2))}}),[["__scopeId","data-v-bffa8613"]]);export{ja as default};
