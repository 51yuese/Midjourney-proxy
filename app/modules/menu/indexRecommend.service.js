'use strict';const _0x3f049a=_0x4943;(function(_0x4da033,_0x32facf){const _0x2494f8=_0x4943,_0x16a36c=_0x4da033();while(!![]){try{const _0x47a978=-parseInt(_0x2494f8(0x110))/0x1+-parseInt(_0x2494f8(0x126))/0x2+parseInt(_0x2494f8(0x111))/0x3*(-parseInt(_0x2494f8(0x102))/0x4)+-parseInt(_0x2494f8(0x109))/0x5+parseInt(_0x2494f8(0xfa))/0x6*(parseInt(_0x2494f8(0x114))/0x7)+parseInt(_0x2494f8(0x112))/0x8+parseInt(_0x2494f8(0x11c))/0x9;if(_0x47a978===_0x32facf)break;else _0x16a36c['push'](_0x16a36c['shift']());}catch(_0x22f078){_0x16a36c['push'](_0x16a36c['shift']());}}}(_0x2a2e,0x91798));function _0x4943(_0x417218,_0x3c5009){const _0x2a2ebc=_0x2a2e();return _0x4943=function(_0x4943c9,_0x22c903){_0x4943c9=_0x4943c9-0xf8;let _0xef26b=_0x2a2ebc[_0x4943c9];return _0xef26b;},_0x4943(_0x417218,_0x3c5009);}var __decorate=this&&this[_0x3f049a(0x107)]||function(_0x23b381,_0x2d12ee,_0x1a8698,_0xc2d259){const _0x5baa0c=_0x3f049a;var _0x47bd70=arguments[_0x5baa0c(0x128)],_0x536643=_0x47bd70<0x3?_0x2d12ee:_0xc2d259===null?_0xc2d259=Object[_0x5baa0c(0x129)](_0x2d12ee,_0x1a8698):_0xc2d259,_0x19de41;if(typeof Reflect==='object'&&typeof Reflect[_0x5baa0c(0x113)]===_0x5baa0c(0x115))_0x536643=Reflect[_0x5baa0c(0x113)](_0x23b381,_0x2d12ee,_0x1a8698,_0xc2d259);else{for(var _0x1b1399=_0x23b381[_0x5baa0c(0x128)]-0x1;_0x1b1399>=0x0;_0x1b1399--)if(_0x19de41=_0x23b381[_0x1b1399])_0x536643=(_0x47bd70<0x3?_0x19de41(_0x536643):_0x47bd70>0x3?_0x19de41(_0x2d12ee,_0x1a8698,_0x536643):_0x19de41(_0x2d12ee,_0x1a8698))||_0x536643;}return _0x47bd70>0x3&&_0x536643&&Object[_0x5baa0c(0x117)](_0x2d12ee,_0x1a8698,_0x536643),_0x536643;},__metadata=this&&this[_0x3f049a(0x122)]||function(_0x1390de,_0x2db13b){const _0x43e43c=_0x3f049a;if(typeof Reflect===_0x43e43c(0x124)&&typeof Reflect[_0x43e43c(0x11f)]===_0x43e43c(0x115))return Reflect[_0x43e43c(0x11f)](_0x1390de,_0x2db13b);},__param=this&&this['__param']||function(_0x443ce5,_0x4614ad){return function(_0x49ea57,_0x331485){_0x4614ad(_0x49ea57,_0x331485,_0x443ce5);};};function _0x2a2e(){const _0x4c82e4=['metadata','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20COUNT(*)\x20as\x20count\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','./IndexRecommend.entity','__metadata','connection','object','typeorm','1827548oDimcD','getReqSaasId','length','getOwnPropertyDescriptor','Repository','isDefined','90834AIAsZu','InjectRepository','save','design:paramtypes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.sort\x20ASC,\x20i.createdAt\x20DESC\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x20','\x20AND\x20i.tag_id\x20=\x20','Injectable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','136JWPmDH','ids','\x20AND\x20i.saasId\x20=\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20=\x200\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','IndexRecommendEntity','__decorate','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','1361095kuWFik','isPlatform','page','clsService','entity','query','__esModule','1092721PRzgCh','81756ifCsfE','2074080LIxOOI','decorate','112VwBnXd','function','count','defineProperty','delete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','update','IndexRecommendService','29696958jObpKt','\x20AND\x20i.type\x20=\x20\x27','@nestjs/typeorm'];_0x2a2e=function(){return _0x4c82e4;};return _0x2a2e();}Object[_0x3f049a(0x117)](exports,_0x3f049a(0x10f),{'value':!![]}),exports[_0x3f049a(0x11b)]=void 0x0;const common_1=require('@nestjs/common'),typeorm_1=require(_0x3f049a(0x11e)),typeorm_2=require(_0x3f049a(0x125)),IndexRecommend_entity_1=require(_0x3f049a(0x121)),utils_1=require('../../common/utils'),nestjs_cls_1=require('nestjs-cls');let IndexRecommendService=class IndexRecommendService{constructor(_0x3282ec,_0x38e859,_0x279897){const _0x15deaf=_0x3f049a;this[_0x15deaf(0x10d)]=_0x3282ec,this[_0x15deaf(0x10c)]=_0x38e859,this['connection']=_0x279897;}async[_0x3f049a(0x10b)](_0x2fd522){const _0xf1ea7c=_0x3f049a,{page:page=0x1,size:size=0x14,type:_0x6506a7,tagId:_0x101d75,keyword:_0x181c33,saasId:_0x4944d7}=_0x2fd522,_0xd8c506=(0x0,utils_1['getReqSaasId'])(this[_0xf1ea7c(0x10c)]);let _0xb43811=_0xf1ea7c(0x105)+(_0x6506a7?_0xf1ea7c(0x11d)+_0x6506a7+'\x27':'')+_0xf1ea7c(0x101)+(_0x101d75?_0xf1ea7c(0xff)+_0x101d75:'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x181c33?'\x20AND\x20i.name\x20LIKE\x20\x27%'+_0x181c33+'%\x27':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';(0x0,utils_1[_0xf1ea7c(0x10a)])(this[_0xf1ea7c(0x10c)])?(0x0,utils_1[_0xf1ea7c(0xf9)])(_0x4944d7)&&(_0xb43811=_0xb43811+(_0xf1ea7c(0x104)+_0x4944d7)):_0xb43811=_0xb43811+('\x20AND\x20i.saasId\x20=\x20'+_0xd8c506);const [_0x243c0f]=await this[_0xf1ea7c(0x123)][_0xf1ea7c(0x10e)](_0xf1ea7c(0x120)+_0xb43811+_0xf1ea7c(0x108)),_0x551442=await this[_0xf1ea7c(0x123)][_0xf1ea7c(0x10e)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.*,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.tag_id\x20AS\x20tagId,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20i.del_flag\x20AS\x20delFlag,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20s.`name`\x20AS\x20saasName,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20d.dict_name\x20AS\x20tagName\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20index_recommend\x20i\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20saas\x20s\x20ON\x20i.saasId\x20=\x20s.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20ai_dict\x20d\x20ON\x20i.tag_id\x20=\x20d.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xb43811+_0xf1ea7c(0xfe)+size+'\x20OFFSET\x20'+(page-0x1)*size+_0xf1ea7c(0x119));return{'rows':_0x551442,'count':_0x243c0f[_0xf1ea7c(0x116)]};}async[_0x3f049a(0xfc)](_0x5efc6b){const _0xc2479b=_0x3f049a;try{const _0x58fd44={..._0x5efc6b};if(!_0x5efc6b['id']){const _0x19fe81=(0x0,utils_1[_0xc2479b(0x127)])(this[_0xc2479b(0x10c)]);_0x58fd44['saasId']=_0x19fe81;}return await this['entity'][_0xc2479b(0xfc)](_0x58fd44),!![];}catch(_0x363756){console['log'](_0x363756);}}async[_0x3f049a(0x118)](_0x4474fb){const _0x4baf6d=_0x3f049a;if(!_0x4474fb[_0x4baf6d(0x103)]||!_0x4474fb['ids'])return!![];return await this[_0x4baf6d(0x10d)][_0x4baf6d(0x11a)]({'id':(0x0,typeorm_2['In'])(_0x4474fb[_0x4baf6d(0x103)])},{'delFlag':0x1}),!![];}};IndexRecommendService=__decorate([(0x0,common_1[_0x3f049a(0x100)])(),__param(0x0,(0x0,typeorm_1[_0x3f049a(0xfb)])(IndexRecommend_entity_1[_0x3f049a(0x106)])),__metadata(_0x3f049a(0xfd),[typeorm_2[_0x3f049a(0xf8)],nestjs_cls_1['ClsService'],typeorm_2['Connection']])],IndexRecommendService),exports[_0x3f049a(0x11b)]=IndexRecommendService;