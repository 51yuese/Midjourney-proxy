'use strict';const _0x4e87f0=_0x1969;function _0x2ffd(){const _0x81b093=['syncMjpAccountAutomatic','EVERY_DAY_AT_MIDNIGHT','onModuleInit','debug','45001tdGgCW','decorate','./../globalConfig/globalConfig.service','design:returntype','Automatically\x20refresh\x20WeChat\x20access\x20every\x20hour\x20Token','length','WeMiniAKUpdateJob','__metadata','429171ytvxuH','syncLumaTask','EVERY_2_HOURS','globalConfigService','prototype','syncMusic','checkAuth','modelsService','syncAssets','refreshBaiduAccessToken','MidjourneyService','authService','50bVARfU','getWechatAccessToken','syncWorkFlowDict','handleCron','1nvrqPn','ChatgptService','midjourneyService','refreshBaiduAccesstoken','updateVipExpire2Redis','chatLogService','2020VdDaUD','ChatLogService','metadata','TaskService','design:paramtypes','../chatLog/chatLog.service','EVERY_HOUR','object','checkAiAuth','CronExpression','Cron','../models/models.service','syncModels','EVERY_5_MINUTES','WeMiniAKUpdateJobï¼š','AuthService','../auth/auth.service','0\x20*/25\x20*\x20*\x20*\x20*','900298mIWCgm','syncTask','function','64337YAPBet','__decorate','../user/user.service','syncMjpTask','4OApitL','chatgptService','648126bpKHJr','design:type','syncMjImg','../chatgpt/chatgpt.service','30036KLflLd','5068008YScHKC','ModelsService','userService','@nestjs/schedule','Logger','pushAuthLogs'];_0x2ffd=function(){return _0x81b093;};return _0x2ffd();}function _0x1969(_0x5dd155,_0x5b6410){const _0x2ffd25=_0x2ffd();return _0x1969=function(_0x196962,_0x1d2105){_0x196962=_0x196962-0x1cb;let _0x53a73e=_0x2ffd25[_0x196962];return _0x53a73e;},_0x1969(_0x5dd155,_0x5b6410);}(function(_0x475be1,_0x480e15){const _0x2bebf6=_0x1969,_0x65c599=_0x475be1();while(!![]){try{const _0xbc5d7a=-parseInt(_0x2bebf6(0x209))/0x1*(-parseInt(_0x2bebf6(0x1d9))/0x2)+parseInt(_0x2bebf6(0x1f9))/0x3*(parseInt(_0x2bebf6(0x1e0))/0x4)+-parseInt(_0x2bebf6(0x205))/0x5*(-parseInt(_0x2bebf6(0x1e6))/0x6)+parseInt(_0x2bebf6(0x1dc))/0x7+parseInt(_0x2bebf6(0x1e7))/0x8+-parseInt(_0x2bebf6(0x1e2))/0x9+-parseInt(_0x2bebf6(0x20f))/0xa*(parseInt(_0x2bebf6(0x1f1))/0xb);if(_0xbc5d7a===_0x480e15)break;else _0x65c599['push'](_0x65c599['shift']());}catch(_0x29f04c){_0x65c599['push'](_0x65c599['shift']());}}}(_0x2ffd,0x5e9ea));var __decorate=this&&this[_0x4e87f0(0x1dd)]||function(_0x5b332a,_0x4fa8cb,_0x5d3cd8,_0x528c7c){const _0x287459=_0x4e87f0;var _0x149b63=arguments['length'],_0x38bf6b=_0x149b63<0x3?_0x4fa8cb:_0x528c7c===null?_0x528c7c=Object['getOwnPropertyDescriptor'](_0x4fa8cb,_0x5d3cd8):_0x528c7c,_0x47db85;if(typeof Reflect===_0x287459(0x1ce)&&typeof Reflect['decorate']===_0x287459(0x1db))_0x38bf6b=Reflect[_0x287459(0x1f2)](_0x5b332a,_0x4fa8cb,_0x5d3cd8,_0x528c7c);else{for(var _0x340f1d=_0x5b332a[_0x287459(0x1f6)]-0x1;_0x340f1d>=0x0;_0x340f1d--)if(_0x47db85=_0x5b332a[_0x340f1d])_0x38bf6b=(_0x149b63<0x3?_0x47db85(_0x38bf6b):_0x149b63>0x3?_0x47db85(_0x4fa8cb,_0x5d3cd8,_0x38bf6b):_0x47db85(_0x4fa8cb,_0x5d3cd8))||_0x38bf6b;}return _0x149b63>0x3&&_0x38bf6b&&Object['defineProperty'](_0x4fa8cb,_0x5d3cd8,_0x38bf6b),_0x38bf6b;},__metadata=this&&this[_0x4e87f0(0x1f8)]||function(_0x49c2b3,_0x22181d){const _0x602a8d=_0x4e87f0;if(typeof Reflect===_0x602a8d(0x1ce)&&typeof Reflect[_0x602a8d(0x211)]===_0x602a8d(0x1db))return Reflect[_0x602a8d(0x211)](_0x49c2b3,_0x22181d);};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[_0x4e87f0(0x212)]=void 0x0;const globalConfig_service_1=require(_0x4e87f0(0x1f3)),common_1=require('@nestjs/common'),schedule_1=require(_0x4e87f0(0x1ea)),models_service_1=require(_0x4e87f0(0x1d2)),auth_service_1=require(_0x4e87f0(0x1d7)),midjourney_service_1=require('../midjourney/midjourney.service'),chatLog_service_1=require(_0x4e87f0(0x1cc)),user_service_1=require(_0x4e87f0(0x1de)),chatgpt_service_1=require(_0x4e87f0(0x1e5));let TaskService=class TaskService{constructor(_0x46e7e9,_0x5450ed,_0x620d94,_0x3efc66,_0x40ce88,_0x21aa26,_0x3d15dd){const _0x355d3c=_0x4e87f0;this[_0x355d3c(0x1fc)]=_0x46e7e9,this['midjourneyService']=_0x5450ed,this[_0x355d3c(0x1e1)]=_0x620d94,this[_0x355d3c(0x20e)]=_0x3efc66,this[_0x355d3c(0x200)]=_0x40ce88,this['authService']=_0x21aa26,this[_0x355d3c(0x1e9)]=_0x3d15dd;}[_0x4e87f0(0x1ef)](){const _0xd8244f=_0x4e87f0;this['authService']['renewMiniAccessToken'](),this[_0xd8244f(0x20b)][_0xd8244f(0x1ed)](),this['midjourneyService'][_0xd8244f(0x1da)](),this[_0xd8244f(0x20b)][_0xd8244f(0x1e4)](),this[_0xd8244f(0x1e1)][_0xd8244f(0x1fa)](),this[_0xd8244f(0x20e)][_0xd8244f(0x201)](),this[_0xd8244f(0x20b)]['syncWorkFlowDict'](),this[_0xd8244f(0x20b)][_0xd8244f(0x1d3)]();}[_0x4e87f0(0x208)](){const _0xff604b=_0x4e87f0;common_1[_0xff604b(0x1eb)][_0xff604b(0x1f0)](_0xff604b(0x1f5),_0xff604b(0x212)),this[_0xff604b(0x1fc)][_0xff604b(0x206)]();}async[_0x4e87f0(0x1f7)](){const _0x38f503=_0x4e87f0;try{await this[_0x38f503(0x204)]['renewMiniAccessToken']();}catch(_0x5dd449){common_1[_0x38f503(0x1eb)]['error'](_0x38f503(0x1d5),_0x5dd449);}}async['checkAuth'](){const _0x59519c=_0x4e87f0;await this['globalConfigService'][_0x59519c(0x1cf)]();}async['pushAuthLogs'](){const _0x325ede=_0x4e87f0;await this[_0x325ede(0x1fc)]['pushLog']();}[_0x4e87f0(0x202)](){const _0x233fd9=_0x4e87f0;this[_0x233fd9(0x200)][_0x233fd9(0x20c)]();}async[_0x4e87f0(0x1ed)](){const _0x38b7d9=_0x4e87f0;this[_0x38b7d9(0x20b)][_0x38b7d9(0x1ed)]();}async[_0x4e87f0(0x1df)](){const _0x26b1f6=_0x4e87f0;this['midjourneyService'][_0x26b1f6(0x1da)]();}async['syncLumaTask'](){const _0x489ddf=_0x4e87f0;this['chatgptService'][_0x489ddf(0x1fa)]();}async[_0x4e87f0(0x1e4)](){const _0x31e2b2=_0x4e87f0;this[_0x31e2b2(0x20b)][_0x31e2b2(0x1e4)]();}async[_0x4e87f0(0x1fe)](){const _0x457e76=_0x4e87f0;this[_0x457e76(0x20e)][_0x457e76(0x201)]();}async[_0x4e87f0(0x20d)](){const _0x31b27f=_0x4e87f0;this[_0x31b27f(0x1e9)]['updateVipExpire2Redis']();}async[_0x4e87f0(0x207)](){const _0x1bb1e3=_0x4e87f0;this[_0x1bb1e3(0x20b)][_0x1bb1e3(0x207)]();}async[_0x4e87f0(0x1d3)](){const _0x41771a=_0x4e87f0;this[_0x41771a(0x20b)][_0x41771a(0x1d3)]();}};__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1[_0x4e87f0(0x1d0)][_0x4e87f0(0x1cd)]),__metadata(_0x4e87f0(0x1e3),Function),__metadata('design:paramtypes',[]),__metadata(_0x4e87f0(0x1f4),void 0x0)],TaskService[_0x4e87f0(0x1fd)],_0x4e87f0(0x208),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x4e87f0(0x1d0)][_0x4e87f0(0x1d4)]),__metadata('design:type',Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata('design:returntype',Promise)],TaskService[_0x4e87f0(0x1fd)],_0x4e87f0(0x1f7),null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(_0x4e87f0(0x1d8)),__metadata(_0x4e87f0(0x1e3),Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata(_0x4e87f0(0x1f4),Promise)],TaskService['prototype'],_0x4e87f0(0x1ff),null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1[_0x4e87f0(0x1d0)][_0x4e87f0(0x1fb)]),__metadata(_0x4e87f0(0x1e3),Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata(_0x4e87f0(0x1f4),Promise)],TaskService[_0x4e87f0(0x1fd)],_0x4e87f0(0x1ec),null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1[_0x4e87f0(0x1d0)][_0x4e87f0(0x1cd)]),__metadata(_0x4e87f0(0x1e3),Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata(_0x4e87f0(0x1f4),void 0x0)],TaskService['prototype'],_0x4e87f0(0x202),null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1['CronExpression'][_0x4e87f0(0x1ee)]),__metadata(_0x4e87f0(0x1e3),Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata(_0x4e87f0(0x1f4),Promise)],TaskService[_0x4e87f0(0x1fd)],'syncMjpAccountAutomatic',null),__decorate([(0x0,schedule_1['Cron'])(schedule_1[_0x4e87f0(0x1d0)][_0x4e87f0(0x1d4)]),__metadata('design:type',Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata(_0x4e87f0(0x1f4),Promise)],TaskService[_0x4e87f0(0x1fd)],_0x4e87f0(0x1df),null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1[_0x4e87f0(0x1d0)][_0x4e87f0(0x1d4)]),__metadata('design:type',Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata(_0x4e87f0(0x1f4),Promise)],TaskService[_0x4e87f0(0x1fd)],_0x4e87f0(0x1fa),null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1['CronExpression'][_0x4e87f0(0x1d4)]),__metadata(_0x4e87f0(0x1e3),Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata(_0x4e87f0(0x1f4),Promise)],TaskService[_0x4e87f0(0x1fd)],_0x4e87f0(0x1e4),null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1['CronExpression'][_0x4e87f0(0x1d4)]),__metadata('design:type',Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],'syncMusic',null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1[_0x4e87f0(0x1d0)][_0x4e87f0(0x1ee)]),__metadata(_0x4e87f0(0x1e3),Function),__metadata('design:paramtypes',[]),__metadata(_0x4e87f0(0x1f4),Promise)],TaskService[_0x4e87f0(0x1fd)],_0x4e87f0(0x20d),null),__decorate([(0x0,schedule_1['Cron'])(schedule_1['CronExpression'][_0x4e87f0(0x1ee)]),__metadata(_0x4e87f0(0x1e3),Function),__metadata('design:paramtypes',[]),__metadata(_0x4e87f0(0x1f4),Promise)],TaskService[_0x4e87f0(0x1fd)],'syncWorkFlowDict',null),__decorate([(0x0,schedule_1[_0x4e87f0(0x1d1)])(schedule_1[_0x4e87f0(0x1d0)][_0x4e87f0(0x1ee)]),__metadata('design:type',Function),__metadata(_0x4e87f0(0x1cb),[]),__metadata('design:returntype',Promise)],TaskService['prototype'],_0x4e87f0(0x1d3),null),TaskService=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x4e87f0(0x1cb),[globalConfig_service_1['GlobalConfigService'],midjourney_service_1[_0x4e87f0(0x203)],chatgpt_service_1[_0x4e87f0(0x20a)],chatLog_service_1[_0x4e87f0(0x210)],models_service_1[_0x4e87f0(0x1e8)],auth_service_1[_0x4e87f0(0x1d6)],user_service_1['UserService']])],TaskService),exports[_0x4e87f0(0x212)]=TaskService;