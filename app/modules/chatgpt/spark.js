'use strict';const _0x106b6b=_0x35b0;(function(_0x46bd09,_0x39b12f){const _0x10e871=_0x35b0,_0x17a072=_0x46bd09();while(!![]){try{const _0x564470=-parseInt(_0x10e871(0x189))/0x1+parseInt(_0x10e871(0x180))/0x2+-parseInt(_0x10e871(0x191))/0x3+-parseInt(_0x10e871(0x17c))/0x4+-parseInt(_0x10e871(0x17e))/0x5+-parseInt(_0x10e871(0x17a))/0x6*(parseInt(_0x10e871(0x18d))/0x7)+parseInt(_0x10e871(0x18a))/0x8*(parseInt(_0x10e871(0x177))/0x9);if(_0x564470===_0x39b12f)break;else _0x17a072['push'](_0x17a072['shift']());}catch(_0x282478){_0x17a072['push'](_0x17a072['shift']());}}}(_0x96a9,0xb6d95));Object[_0x106b6b(0x17f)](exports,_0x106b6b(0x178),{'value':!![]}),exports[_0x106b6b(0x183)]=void 0x0;const spark_node_sdk_1=require('spark-node-sdk');class XunFeiSpark{constructor(_0x286094){const _0x2a5479=_0x106b6b;this[_0x2a5479(0x184)]={},this[_0x2a5479(0x176)]=_0x57b1e0=>{const _0x39ec99=_0x2a5479;return _0x57b1e0[_0x39ec99(0x17d)]('V1.5')?spark_node_sdk_1[_0x39ec99(0x18c)][_0x39ec99(0x18b)]:_0x57b1e0[_0x39ec99(0x17d)](_0x39ec99(0x181))?spark_node_sdk_1[_0x39ec99(0x18c)]['V2']:spark_node_sdk_1[_0x39ec99(0x18c)]['V3'];};const {appid:_0xf5b658,secret:_0x2f63c8,key:_0x4e1cdb}=_0x286094;this[_0x2a5479(0x187)]=new spark_node_sdk_1['SparkClient'](_0xf5b658,_0x4e1cdb,_0x2f63c8);}async['sendMessageFromXunFei'](_0x449f48,_0x2facec){const _0x464c7c=_0x106b6b;let _0x422ac6={'usage':{'completion_tokens':0x0,'prompt_tokens':0x0,'question_tokens':0x0,'total_tokens':0x0},'text':''},_0x554fec='';const {temperature:_0x48ddd7,chatId:_0x50e17b,model:_0x38cfeb,onProgress:_0x56615c,abortController:_0x3e3b2c}=_0x2facec,_0x20c36f=this['getModel'](_0x38cfeb);let _0x19e7ae=typeof _0x449f48===_0x464c7c(0x188)?[spark_node_sdk_1[_0x464c7c(0x17b)][_0x464c7c(0x192)](_0x449f48)]:_0x449f48[_0x464c7c(0x182)](_0x4b6fdc=>spark_node_sdk_1[_0x464c7c(0x17b)][_0x464c7c(0x192)](_0x4b6fdc[_0x464c7c(0x18f)]));return await this['spark'][_0x464c7c(0x190)](_0x20c36f,_0x19e7ae,_0x512475=>{const _0x22a6b0=_0x464c7c;try{_0x512475&&(_0x554fec+=_0x512475[_0x22a6b0(0x186)]),_0x422ac6[_0x22a6b0(0x185)]=_0x512475[_0x22a6b0(0x18e)],_0x422ac6[_0x22a6b0(0x186)]=_0x554fec,_0x56615c(_0x422ac6);}catch(_0x21ac8c){console[_0x22a6b0(0x179)](_0x21ac8c),_0x56615c(_0x422ac6);}},{'temperature':_0x48ddd7||0.5,'max_tokens':0x800,'top_k':0x4,'chat_id':null},_0x50e17b,_0x3e3b2c),{'text':_0x554fec,'usage':_0x422ac6[_0x464c7c(0x185)]};}}function _0x96a9(){const _0x15a97b=['usage','text','spark','string','1171747bNfJCS','4792coCksm','V1_5','ModelVersion','7pguuXU','uasge','content','chatAsync','1559781rqRmnh','fromUser','getModel','61497yoWQfS','__esModule','log','6717378MmreQJ','ChatMessage','1009936KdYPDd','includes','3816790MSVDjT','defineProperty','966122nRqeou','V2.0','map','XunFeiSpark','message'];_0x96a9=function(){return _0x15a97b;};return _0x96a9();}function _0x35b0(_0x4f6c77,_0x4635c1){const _0x96a992=_0x96a9();return _0x35b0=function(_0x35b0e2,_0x228a52){_0x35b0e2=_0x35b0e2-0x176;let _0x2eac73=_0x96a992[_0x35b0e2];return _0x2eac73;},_0x35b0(_0x4f6c77,_0x4635c1);}exports[_0x106b6b(0x183)]=XunFeiSpark;