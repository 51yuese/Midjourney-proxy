'use strict';const _0x440912=_0x15b1;(function(_0x160937,_0x2684e8){const _0x5543cf=_0x15b1,_0x272bcf=_0x160937();while(!![]){try{const _0x16b10b=-parseInt(_0x5543cf(0x17b))/0x1+parseInt(_0x5543cf(0x1cf))/0x2*(-parseInt(_0x5543cf(0x1d0))/0x3)+parseInt(_0x5543cf(0x182))/0x4+parseInt(_0x5543cf(0x1b3))/0x5*(-parseInt(_0x5543cf(0x192))/0x6)+-parseInt(_0x5543cf(0x1ab))/0x7*(parseInt(_0x5543cf(0x1b6))/0x8)+-parseInt(_0x5543cf(0x191))/0x9+-parseInt(_0x5543cf(0x1c0))/0xa*(-parseInt(_0x5543cf(0x171))/0xb);if(_0x16b10b===_0x2684e8)break;else _0x272bcf['push'](_0x272bcf['shift']());}catch(_0x42c42c){_0x272bcf['push'](_0x272bcf['shift']());}}}(_0x4453,0x66a2e));var __decorate=this&&this['__decorate']||function(_0x6e7d34,_0x5b8697,_0x1ad076,_0x437a6b){const _0x35aac3=_0x15b1;var _0x1a9f10=arguments[_0x35aac3(0x1cd)],_0x98803e=_0x1a9f10<0x3?_0x5b8697:_0x437a6b===null?_0x437a6b=Object[_0x35aac3(0x1ca)](_0x5b8697,_0x1ad076):_0x437a6b,_0x5258b8;if(typeof Reflect===_0x35aac3(0x1c3)&&typeof Reflect[_0x35aac3(0x195)]===_0x35aac3(0x198))_0x98803e=Reflect['decorate'](_0x6e7d34,_0x5b8697,_0x1ad076,_0x437a6b);else{for(var _0x466b04=_0x6e7d34[_0x35aac3(0x1cd)]-0x1;_0x466b04>=0x0;_0x466b04--)if(_0x5258b8=_0x6e7d34[_0x466b04])_0x98803e=(_0x1a9f10<0x3?_0x5258b8(_0x98803e):_0x1a9f10>0x3?_0x5258b8(_0x5b8697,_0x1ad076,_0x98803e):_0x5258b8(_0x5b8697,_0x1ad076))||_0x98803e;}return _0x1a9f10>0x3&&_0x98803e&&Object['defineProperty'](_0x5b8697,_0x1ad076,_0x98803e),_0x98803e;},__metadata=this&&this[_0x440912(0x1a4)]||function(_0x598d62,_0x20b6a4){const _0x2fa57a=_0x440912;if(typeof Reflect===_0x2fa57a(0x1c3)&&typeof Reflect[_0x2fa57a(0x199)]===_0x2fa57a(0x198))return Reflect[_0x2fa57a(0x199)](_0x598d62,_0x20b6a4);},__param=this&&this['__param']||function(_0x306c4b,_0x303e51){return function(_0x192329,_0x514f12){_0x303e51(_0x192329,_0x514f12,_0x306c4b);};};Object[_0x440912(0x16d)](exports,'__esModule',{'value':!![]}),exports['AuthController']=void 0x0;const verifyCode_dto_1=require('./../verification/dto/verifyCode.dto'),common_1=require(_0x440912(0x1ce)),jwtAuth_guard_1=require('../../common/auth/jwtAuth.guard'),auth_service_1=require(_0x440912(0x1ac)),swagger_1=require(_0x440912(0x1b4)),updatePassword_dto_1=require(_0x440912(0x190)),sendPhoneCode_dto_1=require(_0x440912(0x1c9)),adminLogin_dto_1=require(_0x440912(0x174)),Login_vo_1=require(_0x440912(0x1a2)),BindPhone_dto_1=require(_0x440912(0x180)),WeAppLogin_vo_1=require(_0x440912(0x177)),phoneWithOpenId_dto_1=require(_0x440912(0x19d)),LoginByPhoneV3_dto_1=require('./dto/LoginByPhoneV3.dto'),RegisteV3_dto_1=require(_0x440912(0x19b)),updateEmial_dto_1=require('./dto/updateEmial.dto'),UserLoginV4_dto_1=require(_0x440912(0x1c2));let AuthController=class AuthController{constructor(_0x188e92){this['authService']=_0x188e92;}async[_0x440912(0x185)](_0x414851){const {username:_0x49d0e0,id:_0x5e875f,email:_0x547432,teamName:_0x52b4be,registerSuccessEmailTitle:_0x555d99,registerSuccessEmailTeamName:_0x2d2eee,registerSuccessEmaileAppend:_0x30402f}=_0x414851;return{'username':_0x49d0e0,'id':_0x5e875f,'email':_0x547432,'teamName':_0x52b4be,'registerSuccessEmailTitle':_0x555d99,'registerSuccessEmailTeamName':_0x2d2eee,'registerSuccessEmaileAppend':_0x30402f};}async[_0x440912(0x1d3)](_0x3c083b){const {username:_0x4483a8,id:_0x4bb850,email:_0x18bce1,teamName:_0xf6158f,registerSuccessEmailTitle:_0x22b80c,registerSuccessEmailTeamName:_0x4c0a31,registerSuccessEmaileAppend:_0x566a09}=_0x3c083b;return{'username':_0x4483a8,'id':_0x4bb850,'email':_0x18bce1,'teamName':_0xf6158f,'registerSuccessEmailTitle':_0x22b80c,'registerSuccessEmailTeamName':_0x4c0a31,'registerSuccessEmaileAppend':_0x566a09};}async[_0x440912(0x1b7)](_0x567f2c){const {message:_0x1bb842,teamName:_0x30512b,registerFailEmailTitle:_0x445599,registerFailEmailTeamName:_0x3fa942}=_0x567f2c;return{'message':_0x1bb842,'teamName':_0x30512b,'registerFailEmailTitle':_0x445599,'registerFailEmailTeamName':_0x3fa942};}async[_0x440912(0x188)](_0xc6961b){const _0x515d15=_0x440912;return this[_0x515d15(0x1d1)]['loginByAdmin'](_0xc6961b);}async[_0x440912(0x1c8)](_0x13938d,_0x1bfbeb){const _0x5bb99d=_0x440912;return this[_0x5bb99d(0x1d1)][_0x5bb99d(0x1c8)](_0x13938d,_0x1bfbeb);}async[_0x440912(0x19c)](_0x4ab8da){const _0x124cf3=_0x440912;return this[_0x124cf3(0x1d1)]['captcha'](_0x4ab8da);}async[_0x440912(0x18a)](_0x3f5d76){const _0x233f48=_0x440912;return this[_0x233f48(0x1d1)][_0x233f48(0x18a)](_0x3f5d76);}async['sendEmailCode'](_0xb9fe43){const _0x1fbf8f=_0x440912;return this['authService'][_0x1fbf8f(0x1bf)](_0xb9fe43);}async[_0x440912(0x1a3)](_0x1fe930){const _0x1c7119=_0x440912;return await this[_0x1c7119(0x1d1)]['getPhoneInMini'](_0x1fe930);}async[_0x440912(0x18c)](_0x342cc3){return await this['authService']['phoneWithOpenId4regist'](_0x342cc3);}async[_0x440912(0x1bd)](_0x244b35,_0x4413f7){const _0x26c9a9=_0x440912;return await this[_0x26c9a9(0x1d1)]['registeV3'](_0x244b35,_0x4413f7);}async[_0x440912(0x17d)](_0x535bed,_0x391b27){const _0x35bd13=_0x440912;return await this['authService'][_0x35bd13(0x17d)](_0x535bed,_0x391b27);}async[_0x440912(0x19a)](_0x20624c,_0x461c2){const _0x3891bd=_0x440912;return this[_0x3891bd(0x1d1)]['loginV4'](_0x20624c,_0x461c2);}async['loginInMinigin'](_0xcdc23b){const _0x57c1db=_0x440912;return await this[_0x57c1db(0x1d1)][_0x57c1db(0x1b5)](_0xcdc23b);}async[_0x440912(0x1c7)](_0x19cfd5){const _0x53e6ca=_0x440912;return await this[_0x53e6ca(0x1d1)][_0x53e6ca(0x1c7)](_0x19cfd5);}async['activateAccount'](_0x43c6a6,_0x5dba4d){const _0x13c1ee=_0x440912;return this[_0x13c1ee(0x1d1)][_0x13c1ee(0x170)](_0x43c6a6,_0x5dba4d);}async[_0x440912(0x1ba)](_0x104bf4){return this['authService']['getInfo'](_0x104bf4);}async['updatePassword'](_0x390109,_0x1b0d79){const _0x5e8495=_0x440912;return this[_0x5e8495(0x1d1)]['updatePassword'](_0x390109,_0x1b0d79);}async['updateEmail'](_0x4e3bd1,_0x16cec9){const _0x56d0b8=_0x440912;return this[_0x56d0b8(0x1d1)][_0x56d0b8(0x181)](_0x4e3bd1,_0x16cec9);}async[_0x440912(0x16e)](_0x5824df){const _0x560e44=_0x440912;return await this[_0x560e44(0x1d1)][_0x560e44(0x16e)](_0x5824df);}async[_0x440912(0x1a9)](_0x64065d){const _0x138afa=_0x440912;return await this[_0x138afa(0x1d1)][_0x138afa(0x1a9)](_0x64065d);}};function _0x15b1(_0x349c10,_0xce599f){const _0x4453ce=_0x4453();return _0x15b1=function(_0x15b150,_0x243c68){_0x15b150=_0x15b150-0x16d;let _0x58b66d=_0x4453ce[_0x15b150];return _0x58b66d;},_0x15b1(_0x349c10,_0xce599f);}__decorate([(0x0,common_1[_0x440912(0x183)])(_0x440912(0x185)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x18b)}),(0x0,common_1[_0x440912(0x194)])(_0x440912(0x185)),__param(0x0,(0x0,common_1[_0x440912(0x18e)])()),__metadata(_0x440912(0x16f),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],AuthController['prototype'],_0x440912(0x185),null),__decorate([(0x0,common_1[_0x440912(0x183)])('registerSuccess'),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x1a7)}),(0x0,common_1['Render'])(_0x440912(0x1d3)),__param(0x0,(0x0,common_1[_0x440912(0x18e)])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[Object]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x1d3),null),__decorate([(0x0,common_1[_0x440912(0x183)])(_0x440912(0x1b7)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x1aa)}),(0x0,common_1[_0x440912(0x194)])(_0x440912(0x1b7)),__param(0x0,(0x0,common_1[_0x440912(0x18e)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x1b7),null),__decorate([(0x0,common_1[_0x440912(0x196)])(_0x440912(0x188)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x1cb)}),__param(0x0,(0x0,common_1[_0x440912(0x1c6)])()),__metadata(_0x440912(0x16f),Function),__metadata('design:paramtypes',[adminLogin_dto_1[_0x440912(0x19e)]]),__metadata('design:returntype',Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x188),null),__decorate([(0x0,common_1[_0x440912(0x183)])(_0x440912(0x1c8)),(0x0,swagger_1['ApiOperation'])({'summary':_0x440912(0x1be)}),__param(0x0,(0x0,common_1[_0x440912(0x18e)])()),__param(0x1,(0x0,common_1[_0x440912(0x1af)])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[verifyCode_dto_1[_0x440912(0x1a8)],Object]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x1c8),null),__decorate([(0x0,common_1[_0x440912(0x196)])(_0x440912(0x19c)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':'获取一个图形验证码'}),__param(0x0,(0x0,common_1[_0x440912(0x1c6)])()),__metadata(_0x440912(0x16f),Function),__metadata('design:paramtypes',[Object]),__metadata(_0x440912(0x189),Promise)],AuthController['prototype'],_0x440912(0x19c),null),__decorate([(0x0,common_1['Post'])(_0x440912(0x18a)),(0x0,swagger_1['ApiOperation'])({'summary':'发送短信验证码'}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[sendPhoneCode_dto_1[_0x440912(0x18f)]]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x18a),null),__decorate([(0x0,common_1['Post'])(_0x440912(0x1bf)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':'发送邮箱验证码'}),__param(0x0,(0x0,common_1['Query'])(_0x440912(0x1ae))),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[String]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x1bf),null),__decorate([(0x0,common_1[_0x440912(0x183)])('getPhoneInMini'),(0x0,swagger_1['ApiOperation'])({'summary':'小程序手机号获取'}),(0x0,swagger_1[_0x440912(0x1c1)])({'name':_0x440912(0x172),'type':String,'description':_0x440912(0x17a)}),(0x0,swagger_1['ApiResponse'])({'type':String,'description':_0x440912(0x1b1)}),__param(0x0,(0x0,common_1[_0x440912(0x18e)])('code')),__metadata('design:type',Function),__metadata(_0x440912(0x1bb),[String]),__metadata('design:returntype',Promise)],AuthController['prototype'],_0x440912(0x1a3),null),__decorate([(0x0,common_1[_0x440912(0x196)])(_0x440912(0x18c)),(0x0,swagger_1['ApiOperation'])({'summary':'微信App、微信小程序\x20手机号注册绑定查询'}),(0x0,swagger_1[_0x440912(0x176)])({'type':Boolean,'description':_0x440912(0x1d2)}),__param(0x0,(0x0,common_1['Body'])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[phoneWithOpenId_dto_1['default']]),__metadata(_0x440912(0x189),Promise)],AuthController['prototype'],_0x440912(0x18c),null),__decorate([(0x0,common_1[_0x440912(0x196)])(_0x440912(0x1bd)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x17e)}),(0x0,swagger_1[_0x440912(0x176)])({'type':String,'description':_0x440912(0x1a5)}),__param(0x0,(0x0,common_1[_0x440912(0x1c6)])()),__param(0x1,(0x0,common_1[_0x440912(0x1c4)])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[RegisteV3_dto_1[_0x440912(0x1b8)],Object]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x1bd),null),__decorate([(0x0,common_1[_0x440912(0x196)])(_0x440912(0x17d)),(0x0,swagger_1['ApiOperation'])({'summary':'用户手机号登录或注册V3'}),(0x0,swagger_1['ApiResponse'])({'type':String,'description':_0x440912(0x1b9)}),__param(0x0,(0x0,common_1[_0x440912(0x1c6)])()),__param(0x1,(0x0,common_1['Req'])()),__metadata(_0x440912(0x16f),Function),__metadata('design:paramtypes',[LoginByPhoneV3_dto_1['LoginByPhoneV3DTO'],Object]),__metadata('design:returntype',Promise)],AuthController[_0x440912(0x1a6)],'loginByPhoneV3',null),__decorate([(0x0,common_1[_0x440912(0x196)])(_0x440912(0x19a)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':'账户/邮箱/手机号登录'}),__param(0x0,(0x0,common_1[_0x440912(0x1c6)])()),__param(0x1,(0x0,common_1['Req'])()),__metadata('design:type',Function),__metadata(_0x440912(0x1bb),[UserLoginV4_dto_1[_0x440912(0x193)],Object]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x19a),null),__decorate([(0x0,common_1[_0x440912(0x183)])(_0x440912(0x1b5)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':'小程序登录'}),(0x0,swagger_1[_0x440912(0x1c1)])({'name':'code','type':String}),(0x0,swagger_1['ApiResponse'])({'type':Login_vo_1[_0x440912(0x179)]}),__param(0x0,(0x0,common_1['Query'])(_0x440912(0x172))),__metadata('design:type',Function),__metadata(_0x440912(0x1bb),[String]),__metadata(_0x440912(0x189),Promise)],AuthController['prototype'],'loginInMinigin',null),__decorate([(0x0,common_1[_0x440912(0x183)])('loginWithWechatApp'),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x1cc)}),(0x0,swagger_1[_0x440912(0x1c1)])({'name':_0x440912(0x172),'type':String}),(0x0,swagger_1[_0x440912(0x176)])({'type':WeAppLogin_vo_1['WeAppLoginVO']}),__param(0x0,(0x0,common_1[_0x440912(0x18e)])('code')),__metadata(_0x440912(0x16f),Function),__metadata('design:paramtypes',[String]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x1c7),null),__decorate([(0x0,common_1[_0x440912(0x183)])(_0x440912(0x170)),(0x0,swagger_1['ApiOperation'])({'summary':_0x440912(0x175)}),__param(0x0,(0x0,common_1[_0x440912(0x18e)])()),__param(0x1,(0x0,common_1['Res'])()),__metadata('design:type',Function),__metadata(_0x440912(0x1bb),[verifyCode_dto_1[_0x440912(0x1a8)],Object]),__metadata(_0x440912(0x189),Promise)],AuthController['prototype'],_0x440912(0x170),null),__decorate([(0x0,common_1[_0x440912(0x183)])(_0x440912(0x1ba)),(0x0,swagger_1['ApiOperation'])({'summary':_0x440912(0x1ad)}),(0x0,common_1['UseGuards'])(jwtAuth_guard_1[_0x440912(0x197)]),(0x0,swagger_1['ApiBearerAuth'])(),__param(0x0,(0x0,common_1['Req'])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[Object]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x1ba),null),__decorate([(0x0,common_1['Post'])(_0x440912(0x19f)),(0x0,swagger_1['ApiOperation'])({'summary':_0x440912(0x1bc)}),(0x0,common_1[_0x440912(0x1c5)])(jwtAuth_guard_1[_0x440912(0x197)]),(0x0,swagger_1[_0x440912(0x18d)])(),__param(0x0,(0x0,common_1[_0x440912(0x1c4)])()),__param(0x1,(0x0,common_1[_0x440912(0x1c6)])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[Object,updatePassword_dto_1['UpdatePasswordDto']]),__metadata(_0x440912(0x189),Promise)],AuthController[_0x440912(0x1a6)],_0x440912(0x19f),null),__decorate([(0x0,common_1[_0x440912(0x196)])(_0x440912(0x181)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x17c)}),(0x0,common_1[_0x440912(0x1c5)])(jwtAuth_guard_1[_0x440912(0x197)]),(0x0,swagger_1[_0x440912(0x18d)])(),__param(0x0,(0x0,common_1[_0x440912(0x1c4)])()),__param(0x1,(0x0,common_1[_0x440912(0x1c6)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,updateEmial_dto_1[_0x440912(0x178)]]),__metadata('design:returntype',Promise)],AuthController['prototype'],_0x440912(0x181),null),__decorate([(0x0,common_1[_0x440912(0x196)])(_0x440912(0x16e)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x1a0)}),(0x0,swagger_1[_0x440912(0x176)])({'type':Boolean,'description':_0x440912(0x1d2)}),__param(0x0,(0x0,common_1[_0x440912(0x18e)])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[String]),__metadata('design:returntype',Promise)],AuthController['prototype'],'getPhoneStatus',null),__decorate([(0x0,common_1['Post'])(_0x440912(0x1a9)),(0x0,swagger_1[_0x440912(0x1b2)])({'summary':_0x440912(0x173)}),(0x0,swagger_1[_0x440912(0x176)])({'type':Boolean,'description':'绑定成功/失败'}),__param(0x0,(0x0,common_1[_0x440912(0x1c6)])()),__metadata(_0x440912(0x16f),Function),__metadata(_0x440912(0x1bb),[BindPhone_dto_1[_0x440912(0x1a1)]]),__metadata(_0x440912(0x189),Promise)],AuthController['prototype'],_0x440912(0x1a9),null),AuthController=__decorate([(0x0,swagger_1[_0x440912(0x17f)])(_0x440912(0x186)),(0x0,common_1[_0x440912(0x184)])(_0x440912(0x186)),__metadata('design:paramtypes',[auth_service_1[_0x440912(0x187)]])],AuthController),exports[_0x440912(0x1b0)]=AuthController;function _0x4453(){const _0x4ff0ca=['./dto/BindPhone.dto','updateEmail','2082368ifbKzp','Get','Controller','changeEmailSuccess','auth','AuthService','loginByAdmin','design:returntype','sendPhoneCode','邮箱验证成功页面','phoneWithOpenId4regist','ApiBearerAuth','Query','SendPhoneCodeDto','./dto/updatePassword.dto','978831SFKtXJ','172758rQtFNX','UserLoginV4DTO','Render','decorate','Post','JwtAuthGuard','function','metadata','loginV4','./dto/RegisteV3.dto','captcha','./dto/phoneWithOpenId.dto','AdminLoginDto','updatePassword','绑定手机号前查询手机号状态,\x20用于已注册用户','BindPhoneDTO','./vo/Login.vo','getPhoneInMini','__metadata','用户\x20authToken','prototype','注册成功页面','VerifyCodeDto','bindPhone','注册失败页面','7zblNDg','./auth.service','获取用户个人信息','email','Res','AuthController','手机号','ApiOperation','35biPzmj','@nestjs/swagger','loginInMinigin','2850416lXNFbf','registerError','RegisteV3DTO','token','getInfo','design:paramtypes','用户更改密码','registeV3','邮箱验证','sendEmailCode','50qBrWqV','ApiQuery','./dto/UserLoginV4.dto','object','Req','UseGuards','Body','loginWithWechatApp','changeEmail','./dto/sendPhoneCode.dto','getOwnPropertyDescriptor','用户账号登录','微信App授权登录','length','@nestjs/common','274mZnSQR','10932jvWRGt','authService','手机号是否已经绑定','registerSuccess','defineProperty','getPhoneStatus','design:type','activateAccount','3900017xJvqDH','code','绑定/换绑手机号','./dto/adminLogin.dto','账户激活','ApiResponse','./vo/WeAppLogin.vo','UpdateEmialDTO','default','open-type=\x22getPhoneNumber\x22\x20获取到的code','707089eRpOuF','用户更改邮箱','loginByPhoneV3','注册接口V3','ApiTags'];_0x4453=function(){return _0x4ff0ca;};return _0x4453();}